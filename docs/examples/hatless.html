<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 126. Hatless</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Hatless</h1><div class="subheading">Example 126 ★★</div></div></div>
<div class="linkback">
<a href="../WI_8.html#section_11" title="Change &gt; Now...">WI §8.11 Now...</a><br><a href="../RB_11.html#section_1" title="Out Of World Actions and Effects &gt; Start-Up Features">RB §11.1 Start-Up Features</a>
</div>
<p class="example-desc">It&#39;s tempting to use &quot;now&hellip;&quot; to distribute items randomly at the start of play, but we need to be a little cautious about how we do that.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="bee_chambers.html" title="A maze with directions between rooms randomized at the start of play."><div class="nav-arrow">←125. </div><div class="doc-navbar-text">Bee Chambers</div></a></div><div class="doc-navbar-right"><a class="nav-el" href="technological_terror.html" title="A ray gun which destroys objects, leaving their component parts behind."><div class="doc-navbar-text">Technological Terror</div><div class="nav-arrow">127.→</div></a></div></div>
</header>
<p>Suppose we want a game in which each scenario starts with the characters wearing hats &ndash; randomly passed out. We might be tempted to write our scenario like this:</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex126a">Play/modify Hatless in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Hatless_1/index.html">Play Hatless in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Hatless&quot;\n\nThe Costumery is a room. Larry, Curly, and Moe are men in the Costumery. Janine is a woman in the Costumery.\n\nRule for writing a paragraph about a person (called the target) who wears a hat (called attire):\n\tsay &quot;[The target] is here, looking stylish in [an attire].&quot;\n\nRule for writing a paragraph about a hatless person (called the target):\n\tsay &quot;[The target] mopes about, hatless.&quot;\n\nA hat is a kind of thing. A hat is always wearable. Definition: a person is hatless if he is not the player and he does not wear a hat.\n\nThe indigo bowler, the polka-dotted fedora, the pink beret, and the scarlet cloche are hats.\n\nWhen play begins:\n\tnow every hat is worn by a random hatless person.`)">⧉</button><div class="codeline storytitle">&quot;Hatless&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The Costumery is a room. Larry, Curly, and Moe are men in the Costumery. Janine is a woman in the Costumery.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for writing a paragraph about a person (called the target) who wears a hat (called attire):</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[The target] is here, looking stylish in [an attire].&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for writing a paragraph about a hatless person (called the target):</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[The target] mopes about, hatless.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hat is a kind of thing. A hat is always wearable. Definition: a person is hatless if he is not the player and he does not wear a hat.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The indigo bowler, the polka-dotted fedora, the pink beret, and the scarlet cloche are hats.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">When play begins:</div>
<div class="codeline">&ensp;&ensp;&ensp;now every hat is worn by a random hatless person.</div>
</div><p>And we might hope that this would choose a new hatless person for each hat, but we would be wrong. It will instead choose one hatless person and put all the hats on him &ndash; and everyone else has to go bare-headed. That&#39;s clearly no good. Let&#39;s try again:</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex126b">Play/modify Hatless 2 in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Hatless_2/index.html">Play Hatless 2 in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Hatless 2&quot;\n\nThe Costumery is a room. Larry, Curly, and Moe are men in the Costumery. Janine is a woman in the Costumery.\n\nRule for writing a paragraph about a person (called the target) who wears a hat (called attire):\n\tsay &quot;[The target] is here, looking stylish in [an attire].&quot;\n\nRule for writing a paragraph about a hatless person (called the target):\n\tsay &quot;[The target] mopes about, hatless.&quot;\n\nA hat is a kind of thing. A hat is always wearable. Definition: a person is hatless if he is not the player and he does not wear a hat.\n\nThe indigo bowler, the polka-dotted fedora, the pink beret, and the scarlet cloche are hats.\n\nWhen play begins:\n\tnow every hatless person wears a random hat.`)">⧉</button><div class="codeline storytitle">&quot;Hatless 2&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The Costumery is a room. Larry, Curly, and Moe are men in the Costumery. Janine is a woman in the Costumery.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for writing a paragraph about a person (called the target) who wears a hat (called attire):</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[The target] is here, looking stylish in [an attire].&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for writing a paragraph about a hatless person (called the target):</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[The target] mopes about, hatless.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hat is a kind of thing. A hat is always wearable. Definition: a person is hatless if he is not the player and he does not wear a hat.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The indigo bowler, the polka-dotted fedora, the pink beret, and the scarlet cloche are hats.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">When play begins:</div>
<div class="codeline">&ensp;&ensp;&ensp;now every hatless person wears a random hat.</div>
</div><p>But this selects one random hat and assigns it to each hatless person in turn &ndash; so it will only wind up being worn by the last of them (since Inform knows that only one person can wear a hat at a time).</p>
<p>In this case, we do have to expand out our loop so that the game makes an explicit distribution:</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex126c">Play/modify Hatless 3 in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Hatless_3/index.html">Play Hatless 3 in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Hatless 3&quot;\n\nThe Costumery is a room. Larry, Curly, and Moe are men in the Costumery. Janine is a woman in the Costumery.\n\nRule for writing a paragraph about a person (called the target) who wears a hat (called attire):\n\tsay &quot;[The target] is here, looking stylish in [an attire].&quot;\n\nRule for writing a paragraph about a hatless person (called the target):\n\tsay &quot;[The target] mopes about, hatless.&quot;\n\nA hat is a kind of thing. A hat is always wearable. Definition: a person is hatless if he is not the player and he does not wear a hat.\n\nThe indigo bowler, the polka-dotted fedora, the pink beret, and the scarlet cloche are hats.\n\nWhen play begins:\n\trepeat with item running through hats:\n\t\tnow the item is worn by a random hatless person.`)">⧉</button><div class="codeline storytitle">&quot;Hatless 3&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The Costumery is a room. Larry, Curly, and Moe are men in the Costumery. Janine is a woman in the Costumery.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for writing a paragraph about a person (called the target) who wears a hat (called attire):</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[The target] is here, looking stylish in [an attire].&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for writing a paragraph about a hatless person (called the target):</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[The target] mopes about, hatless.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hat is a kind of thing. A hat is always wearable. Definition: a person is hatless if he is not the player and he does not wear a hat.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The indigo bowler, the polka-dotted fedora, the pink beret, and the scarlet cloche are hats.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">When play begins:</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat with item running through hats:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the item is worn by a random hatless person.</div>
</div><p>Each time Inform considers the instruction &quot;now the item is worn by a random hatless person&quot;, there is one fewer such person to choose from &ndash; so we can guarantee that the hats are distributed one per customer and that all hats are distributed.</p>
<p>Hatless 3 is only guaranteed to work because the number of hats is less than or equal to the number of people; otherwise the final use of random will return &quot;nothing&quot; and then a problem message will appear during play.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="bee_chambers.html" title="A maze with directions between rooms randomized at the start of play."><div class="nav-arrow">←125. </div><div class="doc-navbar-text">Bee Chambers</div></a></div><div class="doc-navbar-right"><a class="nav-el" href="technological_terror.html" title="A ray gun which destroys objects, leaving their component parts behind."><div class="doc-navbar-text">Technological Terror</div><div class="nav-arrow">127.→</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="nav-about" href="../about.html">About this edition</a> &bull; <a class="nav-about" href="https://twitter.com/inform7tips">@inform7tips</a></p></div></footer>
</body></html>
