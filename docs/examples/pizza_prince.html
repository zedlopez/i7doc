<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 378. Pizza Prince</title>
<script src="../i7doc.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,375;0,400;0,500;0,700;1,375;1,400;1,500;1,700&family=Source+Sans+Pro:ital,wght@0,350;0,400;0,550;0,700;1,350;1,400;1,550;1,700&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="../i7doc.css">
</head>
<body><main>
<header class="example-header">
<nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Pizza Prince</h1><div class="subheading"><wbr><div class="ex-no">Example 378</div> ★</div></div>
<div class="doc-navbar example-linkback"><div class="doc-navbar-left"><a class="raw nav-el" href="../WI_18.html#section_34" title="Activities &gt; Implicitly taking something"><div class="nav-arrow"><span class="sc">wi</span> 18.34</div><div class="doc-navbar-text">Implicitly taking something</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="../RB_10.html#section_3" title="Physics: Substances, Ropes, Energy and Weight &gt; Dispensers and Supplies of Small Objects"><div class="doc-navbar-text">Dispensers and Supplies of Small Objects</div><div class="nav-arrow"><span class="sc">rb</span> 10.3</div></a></div></div>
</div>
<div class="example-meta-desc"><p>Providing a pizza buffet from which the player can take as many pieces as he wants.</p></div>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="big_sainsburys.html" title="Making implicit takes add a minute to the clock, just as though the player had typed TAKE THING explicitly."><div class="nav-arrow">⬅377. </div><div class="doc-navbar-text">The Big Sainsbury's</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="lollipop_guild.html" title="Overriding the rules to allow the player to show something to another character without first taking it."><div class="doc-navbar-text">Lollipop Guild</div><div class="nav-arrow">379.⮕</div></a></div></div>
</header>
<div class="example-body"><p>Suppose we want the player to have a pizza buffet from which he can take a number of slices. But we don&#39;t want to actually put the slices there in front of him, because &quot;you can see 17 slices of pizza here&quot; is not the descriptive effect we want, and because we want to pretend, at least, that the pizza supply is nearly infinite. In fact, we&#39;re going to replenish the supply by allowing eaten slices to return to the buffet table (safer in IF than in real life).</p>
<p>To do this, we create one object to stand in for the pizza supply, but whenever the player tries to take it, we give him a different &quot;pizza slice&quot; object instead. Thus:</p>
<div class="play-example borogove"><a class="raw" href="https://snippets.borogove.app/inform7/v10ex378">Play/modify in Borogove</a></div>
<div class="play-example quixe"><a class="raw" href="PizzaPrince/index.html">Play in Quixe</a></div>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Pizza Prince&quot;\n\nThe Pizza Prince is a room.\n\nThe buffet table is a supporter in Pizza Prince.\n\nThe pizza selection is a thing on the buffet table. Understand &quot;slice&quot; as the pizza selection. The description is &quot;They are all cheese-only, and all luke-warm.&quot;\n\nRule for writing a paragraph about the buffet table:\n\tsay &quot;On [the buffet table] is [a pizza selection]. [description of the pizza selection][line break]&quot;.\n\n\nA pizza slice is a kind of thing. 10 pizza slices are in Pizza Limbo. A pizza slice is always edible. [After a fashion, anyway.]\n\n\nInstead of taking the pizza selection:\n\tlet chosen slice be a random pizza slice in Pizza Limbo;\n\tif chosen slice is nothing: [That is, there were no slices remaining]\n\t\tsay &quot;[manager refusal]&quot;;\n\totherwise:\n\t\tmove the chosen slice to the player;\n\t\tsay &quot;Taken (gingerly).&quot;\n\nTo say manager refusal:\n\tsay &quot;[one of]&apos;Hey!&apos; barks a hitherto-unseen manager from behind you. &apos;It&apos;s an &apos;all you can eat&apos; buffet, not an &apos;all you can stuff down your pants&apos; buffet.&apos;[or]You are conscious of a disapproving huff from the manager, so you refrain.[stopping]&quot;\n\n\nRule for implicitly taking the pizza selection:\n\tlet chosen slice be a random pizza slice in Pizza Limbo;\n\tif chosen slice is nothing: [That is, there were no slices remaining]\n\t\tsay &quot;[manager refusal]&quot;;\n\totherwise:\n\t\tmove the chosen slice to the player;\n\t\tsay &quot;(helping yourself from the selection)&quot;;\n\t\tnow the noun is the chosen slice.\n\n\nRule for clarifying the parser&apos;s choice of the pizza selection while taking:\n\tsay &quot;(from the magnificent selection before you)[line break]&quot;\n\n\nAfter eating a pizza slice:\n\tmove the noun to Pizza Limbo;\n\tcontinue the action.\n\nTest me with &quot;i / get pizza / g / i / get pizza / drop pizza / look / get pizza / g / look / eat pizza / g / g / g / g / get pizza / g / g / g / g / g / g / g / g / g / g / g / g / i / eat pizza / take pizza / g&quot;.`)"><span class="sym">⧉</span></button><div class="codeline storytitle">&quot;Pizza Prince&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Pizza Prince is a room.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The buffet table is a supporter in Pizza Prince.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The pizza selection is a thing on the buffet table. Understand &quot;slice&quot; as the pizza selection. The description is &quot;They are all cheese-only, and all luke-warm.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Rule for writing a paragraph about the buffet table:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;On [the buffet table] is [a pizza selection]. [description of the pizza selection][line break]&quot;.</div>
</div><p>Now we introduce our actual pizza slices, which are retained in a container out of play until they&#39;re needed:</p>
<div class="codeblock"><div class="codeline">A pizza slice is a kind of thing. 10 pizza slices are in Pizza Limbo. A pizza slice is always edible. [After a fashion, anyway.]</div>
</div><p>In this example we&#39;ve set that supply to be artificially small, to make it easier to test what happens when the player reaches the limit; but we could provide many more slices to start with in Pizza Limbo, and the aim in practice would be to pick a number high enough (such as 50 or 100) that the average player will get bored of TAKE PIZZA long before he reaches the limit.</p>
<p>The main thing to be aware of is that objects consume memory in the game file, so creating a large number of pizza slices might bulk the game out. This is more of a concern if we&#39;re compiling for the Z-machine than if we&#39;re compiling for Glulx.</p>
<p>Whenever the player tries to take the selection, we want him to wind up holding an individual slice instead; but of course we need to check and make sure that he hasn&#39;t exhausted the pizza slice supply.</p>
<div class="codeblock"><div class="codeline">Instead of taking the pizza selection:</div>
<div class="codeline">&ensp;&ensp;&ensp;let chosen slice be a random pizza slice in Pizza Limbo;</div>
<div class="codeline">&ensp;&ensp;&ensp;if chosen slice is nothing: [That is, there were no slices remaining]</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[manager refusal]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move the chosen slice to the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;Taken (gingerly).&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">To say manager refusal:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[one of]&#39;Hey!&#39; barks a hitherto-unseen manager from behind you. &#39;It&#39;s an &#39;all you can eat&#39; buffet, not an &#39;all you can stuff down your pants&#39; buffet.&#39;[or]You are conscious of a disapproving huff from the manager, so you refrain.[stopping]&quot;</div>
</div><p>That&#39;s fine for the case where the player is taking a new slice of pizza explicitly, but we need to handle it a little differently if the taking action is generated in response to EAT PIZZA. In that case, we need to take the slice and also change the identity of the noun, because after the implicit take action happens, the game will test whether the player is holding the noun before attempting to eat it. So we need to refocus its attention:</p>
<div class="codeblock"><div class="codeline">Rule for implicitly taking the pizza selection:</div>
<div class="codeline">&ensp;&ensp;&ensp;let chosen slice be a random pizza slice in Pizza Limbo;</div>
<div class="codeline">&ensp;&ensp;&ensp;if chosen slice is nothing: [That is, there were no slices remaining]</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[manager refusal]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move the chosen slice to the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;(helping yourself from the selection)&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the noun is the chosen slice.</div>
</div><p>And finally, a bit of touch-up:</p>
<div class="codeblock"><div class="codeline">Rule for clarifying the parser&#39;s choice of the pizza selection while taking:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;(from the magnificent selection before you)[line break]&quot;</div>
</div><p>For tidiness, we should probably also return the consumed pizza slices to Pizza Limbo so that they can be re-used later:</p>
<div class="codeblock"><div class="codeline">After eating a pizza slice:</div>
<div class="codeline">&ensp;&ensp;&ensp;move the noun to Pizza Limbo;</div>
<div class="codeline">&ensp;&ensp;&ensp;continue the action.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Test me with &quot;i / get pizza / g / i / get pizza / drop pizza / look / get pizza / g / look / eat pizza / g / g / g / g / get pizza / g / g / g / g / g / g / g / g / g / g / g / g / i / eat pizza / take pizza / g&quot;.</div>
</div><details class="testme-output"><summary><div class="summation">Test me with "i / get pizza / g / i / get pizza / drop pizza / look / get pizza / g / look / eat pizza / g / g / g / g / get pizza / g / g / g / g / g / g / g / g / g / g / g / g / i / eat pizza / take pizza / g".</div></summary><div class="testme-output">Pizza Prince<br>On the buffet table is a pizza selection. They are all cheese-only, and all luke-warm.<br><br><span class="mono">&gt;(Testing.)</span><br><br><span class="mono">&gt;[1] i</span><br>You are carrying nothing.<br><br><span class="mono">&gt;[2] get pizza</span><br>Taken (gingerly).<br><br><span class="mono">&gt;[3] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[4] i</span><br>You are carrying:<br>  two pizza slices<br><br><span class="mono">&gt;[5] get pizza</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[6] drop pizza</span><br>(the pizza slice)<br>Dropped.<br><br><span class="mono">&gt;[7] look</span><br>Pizza Prince<br>On the buffet table is a pizza selection. They are all cheese-only, and all luke-warm.<br><br>You can also see a pizza slice here.<br><br><span class="mono">&gt;[8] get pizza</span><br>(the pizza slice)<br>Taken.<br><br><span class="mono">&gt;[9] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[10] look</span><br>Pizza Prince<br>On the buffet table is a pizza selection. They are all cheese-only, and all luke-warm.<br><br><span class="mono">&gt;[11] eat pizza</span><br>(the pizza slice)<br>You eat the pizza slice. Not bad.<br><br><span class="mono">&gt;[12] g</span><br>(the pizza slice)<br>You eat the pizza slice. Not bad.<br><br><span class="mono">&gt;[13] g</span><br>(the pizza slice)<br>You eat the pizza slice. Not bad.<br><br><span class="mono">&gt;[14] g</span><br>(the pizza slice)<br>You eat the pizza slice. Not bad.<br><br><span class="mono">&gt;[15] g</span><br>That&#39;s plainly inedible.<br><br><span class="mono">&gt;[16] get pizza</span><br>Taken (gingerly).<br><br><span class="mono">&gt;[17] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[18] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[19] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[20] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[21] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[22] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[23] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[24] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[25] g</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[26] g</span><br>(from the magnificent selection before you)<br>&quot;Hey!&quot; barks a hitherto-unseen manager from behind you. &quot;It&#39;s an &quot;all you can eat&quot; buffet, not an &quot;all you can stuff down your pants&quot; buffet.&quot;<br><br><span class="mono">&gt;[27] g</span><br>(from the magnificent selection before you)<br>You are conscious of a disapproving huff from the manager, so you refrain.<br><br><span class="mono">&gt;[28] g</span><br>(from the magnificent selection before you)<br>You are conscious of a disapproving huff from the manager, so you refrain.<br><br><span class="mono">&gt;[29] i</span><br>You are carrying:<br>  ten pizza slices<br><br><span class="mono">&gt;[30] eat pizza</span><br>(the pizza slice)<br>You eat the pizza slice. Not bad.<br><br><span class="mono">&gt;[31] take pizza</span><br>(from the magnificent selection before you)<br>Taken (gingerly).<br><br><span class="mono">&gt;[32] g</span><br>(from the magnificent selection before you)<br>You are conscious of a disapproving huff from the manager, so you refrain.
</div></details></div><div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="big_sainsburys.html" title="Making implicit takes add a minute to the clock, just as though the player had typed TAKE THING explicitly."><div class="nav-arrow">⬅377. </div><div class="doc-navbar-text">The Big Sainsbury's</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="lollipop_guild.html" title="Overriding the rules to allow the player to show something to another character without first taking it."><div class="doc-navbar-text">Lollipop Guild</div><div class="nav-arrow">379.⮕</div></a></div></div>
</main><footer id="credits-footer"><nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="raw" href="../about.html">About this edition</a>&ensp;&bull;&ensp;<a class="raw" href="https://mastodon.gamedev.place/web/@inform7tips">@inform7tips@mastodon.gamedev.place</a></p></div></footer>
</body></html>
