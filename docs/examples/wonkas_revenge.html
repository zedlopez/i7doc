<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 175. Wonka's Revenge</title>
<script src="../i7doc.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,375;0,400;0,500;0,700;1,375;1,400;1,500;1,700&family=Source+Sans+Pro:ital,wght@0,350;0,400;0,550;0,700;1,350;1,400;1,550;1,700&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="../i7doc.css">
</head>
<body><main>
<header class="example-header">
<nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Wonka's Revenge</h1><div class="subheading"><wbr><div class="ex-no">Example 175</div> ★</div></div>
<div class="doc-navbar example-linkback"><div class="doc-navbar-left"><a class="raw nav-el" href="../WI_11.html#section_10" title="Phrases &gt; Repeat"><div class="nav-arrow"><span class="sc">wi</span> 11.10</div><div class="doc-navbar-text">Repeat</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="../RB_9.html#section_5" title="Props: Food, Clothing, Money, Toys, Books, Electronics &gt; Dice and Playing Cards"><div class="doc-navbar-text">Dice and Playing Cards</div><div class="nav-arrow"><span class="sc">rb</span> 9.5</div></a></div></div>
</div>
<div class="example-meta-desc"><p>A lottery drum which redistributes the tickets inside whenever the player spins it.</p></div>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="numberless.html" title="A simple exercise in printing the names of random numbers, comparing the use of &quot;otherwise if&hellip;&quot;, a switch statement, or a table-based alternative."><div class="nav-arrow">⬅174. </div><div class="doc-navbar-text">Numberless</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="strictly_ballroom.html" title="People who select partners for dance lessons each turn."><div class="doc-navbar-text">Strictly Ballroom</div><div class="nav-arrow">176.⮕</div></a></div></div>
</header>
<div class="example-body"><div class="play-example borogove"><a class="raw" href="https://snippets.borogove.app/inform7/v10ex175">Play/modify in Borogove</a></div>
<div class="play-example quixe"><a class="raw" href="Lottery/index.html">Play in Quixe</a></div>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Wonka&apos;s Revenge&quot;\n\nThe Caribou Lodge is a room. &quot;Hundreds of expectant faces are turned your way from every table.&quot; A lottery drum is in the Lodge. &quot;Before you is the lottery drum[if we have spun the drum], ready to disgorge a ticket[otherwise], waiting to be spun[end if].&quot; In the drum are a red ticket, an orange ticket, a yellow ticket, a green ticket, a blue ticket, a purple ticket, and a ticket of pure gold. The drum is closed and openable.\n\nUnderstand &quot;spin [something]&quot; as spinning.\n\nSpinning is an action applying to one thing.\n\nCheck spinning: if the noun is an open container which contains something, say &quot;[The list of things in the noun] would fly out.&quot; instead.\n\nCarry out spinning a container:\n\tshuffle the contents of the noun.\n\nReport spinning:\n\tif the noun contains something, say &quot;You rattle [if the noun is transparent][the list of things in the noun][otherwise]the stuff[end if] in [the noun].&quot;;\n\totherwise say &quot;Nothing results of your shaking [the noun].&quot;\n\n\nTo shuffle the contents of (basket - a container):\n\tlet moves be the number of things in the basket;\n\trepeat with counter running from 1 to moves:\n\t\tmove a random thing in the basket to the basket.\n\nAfter opening the drum when we have spun the drum for the first time:\n\tif something (called the pick) is in the drum:\n\t\ttry searching the drum;\n\t\tsay &quot;[The pick] it is, then.&quot;;\n\t\tsilently try taking the pick;\n\t\tif the pick is the ticket of pure gold, end the story finally;\n\t\totherwise end the story saying &quot;Oh well, better luck next time.&quot;\n\nTest me with &quot;open drum / look in drum / close drum / spin drum / open drum&quot;.`)"><span class="sym">⧉</span></button><div class="codeline storytitle">&quot;Wonka&#39;s Revenge&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Caribou Lodge is a room. &quot;Hundreds of expectant faces are turned your way from every table.&quot; A lottery drum is in the Lodge. &quot;Before you is the lottery drum[if we have spun the drum], ready to disgorge a ticket[otherwise], waiting to be spun[end if].&quot; In the drum are a red ticket, an orange ticket, a yellow ticket, a green ticket, a blue ticket, a purple ticket, and a ticket of pure gold. The drum is closed and openable.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Understand &quot;spin [something]&quot; as spinning.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Spinning is an action applying to one thing.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Check spinning: if the noun is an open container which contains something, say &quot;[The list of things in the noun] would fly out.&quot; instead.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Carry out spinning a container:</div>
<div class="codeline">&ensp;&ensp;&ensp;shuffle the contents of the noun.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Report spinning:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the noun contains something, say &quot;You rattle [if the noun is transparent][the list of things in the noun][otherwise]the stuff[end if] in [the noun].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise say &quot;Nothing results of your shaking [the noun].&quot;</div>
</div><p>Inform keeps track of the order in which things have been put into a container. If we want to change that order without the player&#39;s intervention, we can move the things ourselves.</p>
<div class="codeblock"><div class="codeline">To shuffle the contents of (basket - a container):</div>
<div class="codeline">&ensp;&ensp;&ensp;let moves be the number of things in the basket;</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat with counter running from 1 to moves:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move a random thing in the basket to the basket.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">After opening the drum when we have spun the drum for the first time:</div>
<div class="codeline">&ensp;&ensp;&ensp;if something (called the pick) is in the drum:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;try searching the drum;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[The pick] it is, then.&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;silently try taking the pick;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the pick is the ticket of pure gold, end the story finally;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;otherwise end the story saying &quot;Oh well, better luck next time.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Test me with &quot;open drum / look in drum / close drum / spin drum / open drum&quot;.</div>
</div><details class="testme-output"><summary><div class="summation">Test me with "open drum / look in drum / close drum / spin drum / open drum".</div></summary><div class="testme-output">Caribou Lodge<br>Hundreds of expectant faces are turned your way from every table.<br><br>Before you is the lottery drum, waiting to be spun.<br><br><span class="mono">&gt;(Testing.)</span><br><br><span class="mono">&gt;[1] open drum</span><br>You open the lottery drum, revealing a red ticket, an orange ticket, a yellow ticket, a green ticket, a blue ticket, a purple ticket and a ticket of pure gold.<br><br><span class="mono">&gt;[2] look in drum</span><br>In the lottery drum are a red ticket, an orange ticket, a yellow ticket, a green ticket, a blue ticket, a purple ticket and a ticket of pure gold.<br><br><span class="mono">&gt;[3] close drum</span><br>You close the lottery drum.<br><br><span class="mono">&gt;[4] spin drum</span><br>You rattle the stuff in the lottery drum.<br><br><span class="mono">&gt;[5] open drum</span><br>In the lottery drum are a ticket of pure gold, a red ticket, a yellow ticket, an orange ticket, a blue ticket, a green ticket and a purple ticket.<br><br>The ticket of pure gold it is, then.<br><br><br><br>    *** The End ***
</div></details></div></main><div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="numberless.html" title="A simple exercise in printing the names of random numbers, comparing the use of &quot;otherwise if&hellip;&quot;, a switch statement, or a table-based alternative."><div class="nav-arrow">⬅174. </div><div class="doc-navbar-text">Numberless</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="strictly_ballroom.html" title="People who select partners for dance lessons each turn."><div class="doc-navbar-text">Strictly Ballroom</div><div class="nav-arrow">176.⮕</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="raw" href="../about.html">About this edition</a>&ensp;&bull;&ensp;<a class="raw" href="https://mastodon.gamedev.place/web/@inform7tips">@inform7tips@mastodon.gamedev.place</a></p></div></footer>
</body></html>
