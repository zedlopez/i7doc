<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 181. A Haughty Spirit</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<h1>A Haughty Spirit</h1><div class="subheading">Example 181 ★★★</div>
<div class="linkback">
<a href="../WI_11.html#section_17" title="Phrases &gt; Phrases to decide other things">WI §11.17 Phrases to decide other things</a><br><a href="../RB_3.html#section_6" title="Place &gt; Windows">RB §3.6 Windows</a>
</div>
<p class="example-desc">Windows overlooking lower spaces which will prevent the player from climbing through if the lower space is too far below.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a href="witnessed2.html" title="A piece of ghost-hunting equipment that responds depending on whether or not the meter is on and a ghost is visible or touchable from the current location.">180. Witnessed 2</a></div><div class="doc-navbar-right"><a href="entropy.html" title="All objects in the game have a heat, but if not kept insulated they will tend toward room temperature (and at a somewhat exaggerated rate).">182. Entropy</a></div></div>
</header>
<p>Suppose we have a game in which the player can climb through windows which overlook rooms below. We want him to be allowed to climb out windows to reach a room on the same level or at most one level lower than the one he&#39;s on; otherwise, he should get a refusal, saying that he would break his neck.</p>
<p>To figure out the height distance between the start room and the destination room, we might have a repeat loop look at all the directions one has to follow along the &quot;best route&quot; path between the two rooms, and record any ups and downs; then subtract the number of &quot;up&quot; steps from the number of &quot;down&quot; steps, and report what remains.</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex181">Play/modify A Haughty Spirit in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Tower/index.html">Play A Haughty Spirit in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;A Haughty Spirit&quot;\n\nTo decide what number is the distance (first place - a room) rises above (second place - a room):\n\tlet the total distance be the number of moves from the first place to the second place;\n\tif the total distance is less than 1, decide on 0;\n\tlet count of down moves be 0;\n\tlet count of up moves be 0;\n\tlet next place be the first place;\n\trepeat with counter running from 1 to the total distance:\n\t\tlet the way be the best route from the next place to the second place;\n\t\tif the way is down, let count of down moves be the count of down moves plus 1;\n\t\tif the way is up, let the count of up moves be the count of up moves plus 1;\n\t\tlet next place be the room the way from next place;\n\tlet the decision be the count of down moves minus the count of up moves;\n\tdecide on the decision.\n\n\nA window is a kind of thing. A window is always fixed in place. A window can be open or closed. A window is usually closed. A window can be openable or unopenable. A window is usually openable.\n\nUnderstand &quot;climb through [something]&quot; as entering. Understand &quot;jump through/out [something]&quot; as entering.\n\nBefore entering a closed window:\n\tsay &quot;[The noun] would have to be opened first.&quot; instead.\n\nInstead of entering a window:\n\tif the noun overlooks a room (called the far side):\n\t\tlet fall be the distance the location rises above the far side;\n\t\tif fall is greater than 1, say &quot;You&apos;d break your neck.&quot; instead;\n\t\tsay &quot;You tumble into [the far side].&quot;;\n\t\tmove the player to the far side;\n\totherwise:\n\t\tsay &quot;There&apos;s nowhere to go.&quot;\n\nInstead of examining a window:\n\tsay &quot;[The noun] [if the noun is open]opens over[otherwise]gives a view of[end if] [the list of rooms overlooked by the noun].&quot;\n\n\nOverlooking relates various windows to various rooms. The verb to overlook means the overlooking relation. The initial appearance of a window is usually &quot;[The item described] overlooks [the list of rooms overlooked by the item described].&quot;\n\nThe Square Keep is above the Winding Staircase. The Winding Staircase is above the Motte. A crown and a broken sword are in the Motte. The Bailey is west of the Motte.\n\nThe long window is in the Keep. The long window overlooks the Bailey and the Motte. The narrow window is in the Winding Staircase. The narrow window overlooks the Bailey.\n\nTest me with &quot;jump through window / open window / jump through window / d / x narrow window / open window / climb through window / e / up / down&quot;.`)">⧉</button><div class="codeline storytitle">&quot;A Haughty Spirit&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">To decide what number is the distance (first place - a room) rises above (second place - a room):</div>
<div class="codeline">&ensp;&ensp;let the total distance be the number of moves from the first place to the second place;</div>
<div class="codeline">&ensp;&ensp;if the total distance is less than 1, decide on 0;</div>
<div class="codeline">&ensp;&ensp;let count of down moves be 0;</div>
<div class="codeline">&ensp;&ensp;let count of up moves be 0;</div>
<div class="codeline">&ensp;&ensp;let next place be the first place;</div>
<div class="codeline">&ensp;&ensp;repeat with counter running from 1 to the total distance:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;let the way be the best route from the next place to the second place;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;if the way is down, let count of down moves be the count of down moves plus 1;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;if the way is up, let the count of up moves be the count of up moves plus 1;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;let next place be the room the way from next place;</div>
<div class="codeline">&ensp;&ensp;let the decision be the count of down moves minus the count of up moves;</div>
<div class="codeline">&ensp;&ensp;decide on the decision.</div>
</div><p>Now we just have to create windows and some action rules for interacting with them&hellip;</p>
<div class="codeblock"><div class="codeline">A window is a kind of thing. A window is always fixed in place. A window can be open or closed. A window is usually closed. A window can be openable or unopenable. A window is usually openable.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Understand &quot;climb through [something]&quot; as entering. Understand &quot;jump through/out [something]&quot; as entering.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Before entering a closed window:</div>
<div class="codeline">&ensp;&ensp;say &quot;[The noun] would have to be opened first.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Instead of entering a window:</div>
<div class="codeline">&ensp;&ensp;if the noun overlooks a room (called the far side):</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;let fall be the distance the location rises above the far side;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;if fall is greater than 1, say &quot;You&#39;d break your neck.&quot; instead;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;say &quot;You tumble into [the far side].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;move the player to the far side;</div>
<div class="codeline">&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;say &quot;There&#39;s nowhere to go.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Instead of examining a window:</div>
<div class="codeline">&ensp;&ensp;say &quot;[The noun] [if the noun is open]opens over[otherwise]gives a view of[end if] [the list of rooms overlooked by the noun].&quot;</div>
</div><p>Here we must anticipate a little from the chapter on Relations, and provide ourselves with a way of keeping track of how windows and rooms relate to one another:</p>
<div class="codeblock"><div class="codeline">Overlooking relates various windows to various rooms. The verb to overlook means the overlooking relation. The initial appearance of a window is usually &quot;[The item described] overlooks [the list of rooms overlooked by the item described].&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The Square Keep is above the Winding Staircase. The Winding Staircase is above the Motte. A crown and a broken sword are in the Motte. The Bailey is west of the Motte.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The long window is in the Keep. The long window overlooks the Bailey and the Motte. The narrow window is in the Winding Staircase. The narrow window overlooks the Bailey.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;jump through window / open window / jump through window / d / x narrow window / open window / climb through window / e / up / down&quot;.</div>
</div><details class="testme-output"><summary>Test me with "jump through window / open window / jump through window / d / x narrow window / open window / climb through window / e / up / down".</summary><div class="testme-output">Square Keep<br>The long window overlooks the Motte and the Bailey.<br><br>>(Testing.)<br><br>>[1] jump through window<br>The long window would have to be opened first.<br><br>>[2] open window<br>You open the long window.<br><br>>[3] jump through window<br>You'd break your neck.<br><br>>[4] d<br><br>Winding Staircase<br>The narrow window overlooks the Bailey.<br><br>>[5] x narrow window<br>The narrow window gives a view of the Bailey.<br><br>>[6] open window<br>You open the narrow window.<br><br>>[7] climb through window<br>You tumble into the Bailey.<br><br>Bailey<br><br>>[8] e<br><br>Motte<br>You can see a crown and a broken sword here.<br><br>>[9] up<br><br>Winding Staircase<br>The narrow window overlooks the Bailey.<br><br>>[10] down<br><br>Motte<br>You can see a crown and a broken sword here.
</div></details><p>We could then add rules to allow the player to look through windows and see things in the rooms below, but that would require more material from later chapters.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a href="witnessed2.html" title="A piece of ghost-hunting equipment that responds depending on whether or not the meter is on and a ghost is visible or touchable from the current location.">180. Witnessed 2</a></div><div class="doc-navbar-right"><a href="entropy.html" title="All objects in the game have a heat, but if not kept insulated they will tend toward room temperature (and at a somewhat exaggerated rate).">182. Entropy</a></div></div>
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<footer id="credits-footer"><p><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p>Thanks go to <a href="http://nitku.net/blog/">Juhana Leinonen</a> for <a href="https://borogove.app">Borogove</a>. The playable examples use <a href="https://eblong.com">Andrew Plotkin</a>'s <a href="https://eblong.com/zarf/glk/glkote.html">GlkOte</a> and <a href="https://eblong.com/zarf/glulx/quixe/index.html">Quixe</a>, distributed under an <a href="../mit.html">MIT License.</a></p><p class="about"><a href="../about.html">About this edition</a> &bull; <a href="https://twitter.com/inform7tips">@inform7tips</a></p></footer>
</body></html>
