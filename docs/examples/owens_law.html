<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 179. Owen's Law</title>
<script src="../i7doc.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,375;0,400;0,500;0,700;1,375;1,400;1,500;1,700&family=Source+Sans+Pro:ital,wght@0,350;0,400;0,550;0,700;1,350;1,400;1,550;1,700&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="../i7doc.css">
</head>
<body><main>
<header class="example-header">
<nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Owen's Law</h1><div class="subheading"><wbr><div class="ex-no">Example 179</div> ★★★</div></div>
<div class="doc-navbar example-linkback"><div class="doc-navbar-left"><a class="raw nav-el" href="../WI_11.html#section_16" title="Phrases &gt; New conditions, new adjectives"><div class="nav-arrow"><span class="sc">wi</span>&nbsp;11.16</div><div class="doc-navbar-text">New conditions, new adjectives</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="../RB_6.html#section_9" title="Commands &gt; Going, Pushing Things in Directions"><div class="doc-navbar-text">Going, Pushing Things in Directions</div><div class="nav-arrow"><span class="sc">rb</span>&nbsp;6.9</div></a></div></div>
</div>
<div class="example-meta-desc"><p>OUT always means &quot;move to an outdoors room, or else to a room with more exits than this one has&quot;; IN always means the opposite.</p></div>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="m_melmoths_duel.html" title="Three basic ways to inject random or not-so-random variations into text."><div class="nav-arrow">⬅178. </div><div class="doc-navbar-text">M. Melmoth's Duel</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="witnessed2.html" title="A piece of ghost-hunting equipment that responds depending on whether or not the meter is on and a ghost is visible or touchable from the current location."><div class="doc-navbar-text">Witnessed 2</div><div class="nav-arrow">180.⮕</div></a></div></div>
</header>
<div class="example-body"><p>Suppose we want the game to interpret &quot;GO OUT&quot; as &quot;move towards an outdoors room, or towards a room with more exits than the current room&quot;, while &quot;GO IN&quot; means &quot;move toward a room with fewer exits, or towards an indoors room&quot;. Thus going in repeatedly within a building would lead towards dead-ends, while going out repeatedly would lead towards the center of the building and then towards an exit to the outside world.</p>
<p>We start by encoding these rules as definitions:</p>
<div class="play-example borogove"><a class="raw" href="https://snippets.borogove.app/inform7/v10ex179">Play/modify in Borogove</a></div>
<div class="play-example quixe"><a class="raw" href="OutAndIn/index.html">Play in Quixe</a></div>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Owen&apos;s Law&quot;\n\nA room can be indoors or outdoors. A room is usually indoors.\n\nDefinition: a room is outward:\n\tif it is not adjacent, no;\n\tif it is indoors and the location is outdoors, no;\n\tif it is outdoors and the location is indoors, yes;\n\tif the number of rooms adjacent to it is greater than the number of rooms adjacent to the location, yes;\n\totherwise no.\n\nDefinition: a room is inward:\n\tif it is not adjacent, no;\n\tif it is outdoors and the location is indoors, no;\n\tif it is indoors and the location is outdoors, yes;\n\tif the number of rooms adjacent to it is less than the number of rooms adjacent to the location, yes;\n\totherwise no.\n\nInstead of going nowhere when the noun is outside: try exiting.\n\nInstead of exiting when the player is in a room:\n\tif at least one room is outward:\n\t\tlet the destination be a random outward room;\n\t\tlet the way be the best route from the location to\t the destination;\n\t\tsay &quot;(that is, [way])[command clarification break]&quot;;\n\t\ttry going the way instead;\n\totherwise:\n\t\tsay &quot;It&apos;s not entirely obvious which way you mean. &quot;;\n\t\tcarry out the listing available exits activity.\n\nInstead of going inside when the room inside from the location is not a room and at least one room is inward:\n\tif more than one room is inward:\n\t\tcarry out the listing available exits activity;\n\totherwise:\n\t\tlet the destination be a random inward room;\n\t\tlet the way be the best route from the location to the destination;\n\t\tsay &quot;(that is, [way])[command clarification break]&quot;;\n\t\ttry going the way instead.\n\nInstead of going nowhere:\n\tcarry out the listing available exits activity.\n\n\nListing available exits is an activity.\n\nRule for listing available exits:\n\tif going inside and an adjacent room is inward:\n\t\tsay &quot;From here &apos;in&apos; could reasonably mean [a list of adjacent inward rooms].&quot;;\n\t\trule succeeds;\n\tif exiting and an adjacent room is outward:\n\t\tsay &quot;From here &apos;out&apos; could reasonably mean [a list of outward adjacent rooms].&quot;;\n\t\trule succeeds;\n\tsay &quot;From here you can go [a list of adjacent rooms].&quot;\n\nBefore printing the name of a room (called the target) while listing available exits:\n\tlet aim be the best route from the location to the target;\n\tsay &quot;[aim] to the &quot;.\n\nRule for printing the name of an unvisited room which is not the location:\n\tsay &quot;unknown location&quot;.\n\nDune is an outdoors room. &quot;Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation.&quot;\n\nOcean Shores Military Installation is east of the Dune. It is an outdoors room. &quot;The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.&quot;\n\nWalkway is above Ocean Shores Military Installation. &quot;From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel.&quot;\n\nDark Echoing Room is inside from Ocean Shores Military Installation. Dank Dripping Room is east of Dark Echoing Room. Narrow Room is south of Dark Echoing Room. Small Sealed Chamber is north of Dark Echoing Room. Room Smelling of Animal Urine is north of Dank Dripping Room. The description of a room is usually &quot;It is dark in here, and feels unsafe.&quot;\n\nTest me with &quot;e / u / d / in / s / out / n / out / e / in / out / out / out&quot;.`)"><span class="sym">⧉</span></button><div class="codeline storytitle">&quot;Owen&#39;s Law&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">A room can be indoors or outdoors. A room is usually indoors.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Definition: a room is outward:</div>
<div class="codeline">&ensp;&ensp;&ensp;if it is not adjacent, no;</div>
<div class="codeline">&ensp;&ensp;&ensp;if it is indoors and the location is outdoors, no;</div>
<div class="codeline">&ensp;&ensp;&ensp;if it is outdoors and the location is indoors, yes;</div>
<div class="codeline">&ensp;&ensp;&ensp;if the number of rooms adjacent to it is greater than the number of rooms adjacent to the location, yes;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise no.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Definition: a room is inward:</div>
<div class="codeline">&ensp;&ensp;&ensp;if it is not adjacent, no;</div>
<div class="codeline">&ensp;&ensp;&ensp;if it is outdoors and the location is indoors, no;</div>
<div class="codeline">&ensp;&ensp;&ensp;if it is indoors and the location is outdoors, yes;</div>
<div class="codeline">&ensp;&ensp;&ensp;if the number of rooms adjacent to it is less than the number of rooms adjacent to the location, yes;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise no.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Instead of going nowhere when the noun is outside: try exiting.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Instead of exiting when the player is in a room:</div>
<div class="codeline">&ensp;&ensp;&ensp;if at least one room is outward:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let the destination be a random outward room;</div>
<table>
<tr><td></td><td>let the way be the best route from the location to</td><td>the destination;</td></tr><tr><td></td><td>say &quot;(that is, [way])[command clarification break]&quot;;</td><td> </td></tr><tr><td></td><td>try going the way instead;</td><td> </td></tr><tr><td></td><td>otherwise:</td><td> </td></tr><tr><td></td><td>say &quot;It&#39;s not entirely obvious which way you mean. &quot;;</td><td> </td></tr><tr><td></td><td>carry out the listing available exits activity.</td><td> </td></tr></table>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Instead of going inside when the room inside from the location is not a room and at least one room is inward:</div>
<div class="codeline">&ensp;&ensp;&ensp;if more than one room is inward:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;carry out the listing available exits activity;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let the destination be a random inward room;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let the way be the best route from the location to the destination;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;(that is, [way])[command clarification break]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;try going the way instead.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Instead of going nowhere:</div>
<div class="codeline">&ensp;&ensp;&ensp;carry out the listing available exits activity.</div>
</div><p>This &quot;listing available exits&quot; is a refinement borrowed from a future chapter, which allows us to specify special listing and printing rules:</p>
<div class="codeblock"><div class="codeline">Listing available exits is an activity.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Rule for listing available exits:</div>
<div class="codeline">&ensp;&ensp;&ensp;if going inside and an adjacent room is inward:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;From here &#39;in&#39; could reasonably mean [a list of adjacent inward rooms].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;rule succeeds;</div>
<div class="codeline">&ensp;&ensp;&ensp;if exiting and an adjacent room is outward:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;From here &#39;out&#39; could reasonably mean [a list of outward adjacent rooms].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;rule succeeds;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;From here you can go [a list of adjacent rooms].&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Before printing the name of a room (called the target) while listing available exits:</div>
<div class="codeline">&ensp;&ensp;&ensp;let aim be the best route from the location to the target;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[aim] to the &quot;.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Rule for printing the name of an unvisited room which is not the location:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;unknown location&quot;.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Dune is an outdoors room. &quot;Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Ocean Shores Military Installation is east of the Dune. It is an outdoors room. &quot;The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Walkway is above Ocean Shores Military Installation. &quot;From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Dark Echoing Room is inside from Ocean Shores Military Installation. Dank Dripping Room is east of Dark Echoing Room. Narrow Room is south of Dark Echoing Room. Small Sealed Chamber is north of Dark Echoing Room. Room Smelling of Animal Urine is north of Dank Dripping Room. The description of a room is usually &quot;It is dark in here, and feels unsafe.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Test me with &quot;e / u / d / in / s / out / n / out / e / in / out / out / out&quot;.</div>
</div><details class="testme-output"><summary><div class="summation">Test me with "e / u / d / in / s / out / n / out / e / in / out / out / out".</div></summary><div class="testme-output">Dune<br>Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation.<br><br><span class="mono">&gt;(Testing.)</span><br><br><span class="mono">&gt;[1] e</span><br><br>Ocean Shores Military Installation<br>The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.<br><br><span class="mono">&gt;[2] u</span><br><br>Walkway<br>From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel.<br><br><span class="mono">&gt;[3] d</span><br><br>Ocean Shores Military Installation<br>The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.<br><br><span class="mono">&gt;[4] in</span><br><br>Dark Echoing Room<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[5] s</span><br><br>Narrow Room<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[6] out</span><br>(that is, north)<br><br>Dark Echoing Room<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[7] n</span><br><br>Small Sealed Chamber<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[8] out</span><br>(that is, south)<br><br>Dark Echoing Room<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[9] e</span><br><br>Dank Dripping Room<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[10] in</span><br>(that is, north)<br><br>Room Smelling of Animal Urine<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[11] out</span><br>(that is, south)<br><br>Dank Dripping Room<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[12] out</span><br>(that is, west)<br><br>Dark Echoing Room<br>It is dark in here, and feels unsafe.<br><br><span class="mono">&gt;[13] out</span><br>(that is, outside)<br><br>Ocean Shores Military Installation<br>The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.
</div></details></div><div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="m_melmoths_duel.html" title="Three basic ways to inject random or not-so-random variations into text."><div class="nav-arrow">⬅178. </div><div class="doc-navbar-text">M. Melmoth's Duel</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="witnessed2.html" title="A piece of ghost-hunting equipment that responds depending on whether or not the meter is on and a ghost is visible or touchable from the current location."><div class="doc-navbar-text">Witnessed 2</div><div class="nav-arrow">180.⮕</div></a></div></div>
</main><footer id="credits-footer"><nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="raw" href="../about.html">About this edition</a>&ensp;&bull;&ensp;<a class="raw" href="https://mastodon.gamedev.place/web/@inform7tips">@inform7tips@mastodon.gamedev.place</a></p></div></footer>
</body></html>
