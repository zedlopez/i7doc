<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 281. Farewell</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Farewell</h1><div class="subheading">Example 281 ★★</div></div></div>
<div class="linkback">
<a href="../WI_16.html#section_15" title="Tables &gt; Varying which table to look at">WI §16.15 Varying which table to look at</a><br><a href="../RB_7.html#section_8" title="Other Characters &gt; Saying Complicated Things">RB §7.8 Saying Complicated Things</a>
</div>
<p class="example-desc">People who respond to conversational gambits, summarize what they said before if asked again, and provide recap of conversation that is past.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="goatcheese_and_sage_chicken.html" title="Implementing a FULL SCORE command which lists more information than the regular SCORE command, adding times and rankings, as an extension of the example given in this chapter."><div class="nav-arrow">←280. </div><div class="doc-navbar-text">Goat-Cheese and Sage Chicken</div></a></div><div class="doc-navbar-center">&thinsp;</div><div class="doc-navbar-right"><a class="nav-el" href="sweeney.html" title="A conversation where each topic may have multiple questions and answers associated with it, and where a given exchange can lead to new additions to the list."><div class="doc-navbar-text">Sweeney</div><div class="nav-arrow">282.→</div></a></div></div>
</header>
<p>We begin with the idea that each person comes with his own table of things to say:</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex281">Play/modify Farewell in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Conversation/index.html">Play Farewell in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Farewell&quot;\n\nA person has a table name called conversation.\n\nInstead of asking someone about something:\n\tlet the source be the conversation of the noun;\n\tif topic understood is a topic listed in source:\n\t\tif there is a turn stamp entry:\n\t\t\tsay &quot;[The noun] has already told you that [summary entry].&quot;;\n\t\totherwise:\n\t\t\tnow turn stamp entry is the turn count;\n\t\t\tsay &quot;[reply entry][paragraph break]&quot;;\n\totherwise:\n\t\tsay &quot;[The noun] stares at you blankly.&quot;\n\n\nInstead of telling someone about something:\n\ttry asking the noun about it.\n\n\nDefinition: a person is other if it is not the player.\n\nUnderstand &quot;recap&quot; or &quot;recall&quot; or &quot;review&quot; as recalling conversations.\n\nRecalling conversations is an action applying to nothing.\n\n\nCarry out recalling conversations:\n\trepeat with speaker running through other people:\n\t\tlet source be the conversation of the speaker;\n\t\tsort source in turn stamp order;\n\t\tsay &quot;[The speaker] has so far told you: [line break]&quot;;\n\t\tlet index be 0;\n\t\trepeat through source:\n\t\t\tif there is a turn stamp entry:\n\t\t\t\tlet index be 1;\n\t\t\t\tsay &quot;  [summary entry][line break]&quot;;\n\t\tif index is 0, say &quot;  absolutely nothing[line break]&quot;;\n\t\tsay conditional paragraph break.\n\n\nThe Farewell Bend Cafe is a room. &quot;Beautiful Farewell Bend, Idaho -- or is it Oregon? An almost-abandoned truckstop, in any case, on one of those interminable American east-west highways.&quot;\n\nTina is a woman in the Farewell Bend Cafe. The conversation of Tina is the Table of Tina&apos;s Chatter. &quot;Tina the waitress is slowly pouring coffee from the pot with a black neck into the pot with an orange neck.&quot;\n\nGeorge is a man in the Farewell Bend Cafe. The conversation of George is the Table of George&apos;s Chatter. &quot;There is also a large man at table five. The tattoo on his arm says George. For the moment we will assume that it is his own name and not someone else&apos;s.&quot;\n\nTable of Tina&apos;s Chatter\ntopic\treply\tsummary\tturn stamp\n&quot;aasvogel&quot;\t&quot;&apos;Oh, it&apos;s a vulture.&apos;&quot;\t&quot;that an aasvogel is a vulture&quot;\ta number\n&quot;acaudate&quot;\t&quot;She shrugs, mid-pour. &apos;Means something doesn&apos;t have a tail.&apos;&quot;\t&quot;that acaudate means &apos;tailless&apos;&quot;\t--\n&quot;absorptiometer&quot;\t&quot;&apos;It&apos;s a thing that measures the solubility of gases in a liquid,&apos; she explains gently, as to a child.&quot;\t&quot;that an absorptiometer measures solubility of gasses in a liquid&quot;\t--\n\nTable of George&apos;s Chatter\ntopic\treply\tsummary\tturn stamp\n&quot;baccaceous&quot;\t&quot;&apos;Something that has or bears berries,&apos; says George, without looking up.&quot;\t&quot;that baccaceous means berry-bearing or berry-like&quot;\ta number\n&quot;bagheera&quot;\t&quot;&apos;Oh, that&apos;d be a velvet-like textile.&apos;&quot;\t&quot;that bagheera is a velvet-like textile&quot;\t--\n&quot;balistarius&quot;\t&quot;&apos;That&apos;s a crossbow-man,&apos; George replies instantly.&quot;\t&quot;that a balistarius is a crossbow-man&quot;\t--\n\n\nInstead of asking Tina about &quot;advertisement&quot; for the first time:\n\tsay &quot;Tina looks embarrassed. &apos;Of course! I almost forgot.&apos; She hands you a brochure.&quot;;\n\tmove the brochure to the player.\n\nThe encyclopedia sales brochure is a thing. The description is &quot;A glossy flyer indicating that you can receive a free Volume A-Aalto of the New Idahoan Encyclopedia Set if you send back the business reply card, and then have the option of purchasing the remaining volumes at a very very reasonable price.&quot;\n\nTest me with &quot;recap / ask tina about aasvogel / recap / ask george about baccaceous / ask tina about absorptiometer / recap / ask tina about advertisement / read brochure&quot;.`)">⧉</button><div class="codeline storytitle">&quot;Farewell&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A person has a table name called conversation.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Instead of asking someone about something:</div>
<div class="codeline">&ensp;&ensp;&ensp;let the source be the conversation of the noun;</div>
<div class="codeline">&ensp;&ensp;&ensp;if topic understood is a topic listed in source:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if there is a turn stamp entry:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[The noun] has already told you that [summary entry].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now turn stamp entry is the turn count;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[reply entry][paragraph break]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[The noun] stares at you blankly.&quot;</div>
</div><p>For the sake of simplicity, we&#39;ll conflate asking and telling here, though it would certainly be possible to have a more complex implementation if we want the characters to be told things as well.</p>
<div class="codeblock"><div class="codeline">Instead of telling someone about something:</div>
<div class="codeline">&ensp;&ensp;&ensp;try asking the noun about it.</div>
</div><p>Now we might want to add a recap command to review conversation that has already occurred.</p>
<div class="codeblock"><div class="codeline">Definition: a person is other if it is not the player.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Understand &quot;recap&quot; or &quot;recall&quot; or &quot;review&quot; as recalling conversations.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Recalling conversations is an action applying to nothing.</div>
</div><p>Since we&#39;ve been recording the turn count of each conversation bit, we can even present these in order by sorting the tables first.</p>
<div class="codeblock"><div class="codeline">Carry out recalling conversations:</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat with speaker running through other people:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let source be the conversation of the speaker;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;sort source in turn stamp order;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[The speaker] has so far told you: [line break]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let index be 0;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;repeat through source:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if there is a turn stamp entry:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let index be 1;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;  [summary entry][line break]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if index is 0, say &quot;  absolutely nothing[line break]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say conditional paragraph break.</div>
</div><p>Now it remains only to create a couple of characters and provide them both with something to say:</p>
<div class="codeblock"><div class="codeline">The Farewell Bend Cafe is a room. &quot;Beautiful Farewell Bend, Idaho -- or is it Oregon? An almost-abandoned truckstop, in any case, on one of those interminable American east-west highways.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Tina is a woman in the Farewell Bend Cafe. The conversation of Tina is the Table of Tina&#39;s Chatter. &quot;Tina the waitress is slowly pouring coffee from the pot with a black neck into the pot with an orange neck.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">George is a man in the Farewell Bend Cafe. The conversation of George is the Table of George&#39;s Chatter. &quot;There is also a large man at table five. The tattoo on his arm says George. For the moment we will assume that it is his own name and not someone else&#39;s.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline tablename">Table of Tina&#39;s Chatter</div><table>
<tr><td>topic</td><td>reply</td><td>summary</td><td>turn stamp</td></tr><tr><td>&quot;aasvogel&quot;</td><td>&quot;&#39;Oh, it&#39;s a vulture.&#39;&quot;</td><td>&quot;that an aasvogel is a vulture&quot;</td><td>a number</td></tr><tr><td>&quot;acaudate&quot;</td><td>&quot;She shrugs, mid-pour. &#39;Means something doesn&#39;t have a tail.&#39;&quot;</td><td>&quot;that acaudate means &#39;tailless&#39;&quot;</td><td>--</td></tr><tr><td>&quot;absorptiometer&quot;</td><td>&quot;&#39;It&#39;s a thing that measures the solubility of gases in a liquid,&#39; she explains gently, as to a child.&quot;</td><td>&quot;that an absorptiometer measures solubility of gasses in a liquid&quot;</td><td>--</td></tr></table>
<div class="codeline tablename">Table of George&#39;s Chatter</div><table>
<tr><td>topic</td><td>reply</td><td>summary</td><td>turn stamp</td></tr><tr><td>&quot;baccaceous&quot;</td><td>&quot;&#39;Something that has or bears berries,&#39; says George, without looking up.&quot;</td><td>&quot;that baccaceous means berry-bearing or berry-like&quot;</td><td>a number</td></tr><tr><td>&quot;bagheera&quot;</td><td>&quot;&#39;Oh, that&#39;d be a velvet-like textile.&#39;&quot;</td><td>&quot;that bagheera is a velvet-like textile&quot;</td><td>--</td></tr><tr><td>&quot;balistarius&quot;</td><td>&quot;&#39;That&#39;s a crossbow-man,&#39; George replies instantly.&quot;</td><td>&quot;that a balistarius is a crossbow-man&quot;</td><td>--</td></tr></table>
</div><p>A word of warning: this system does assume that every person in the game has a conversation table defined. If that were not the case, we would have to be a bit more careful.</p>
<p>As always, we can override specific words, too:</p>
<div class="codeblock"><div class="codeline">Instead of asking Tina about &quot;advertisement&quot; for the first time:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;Tina looks embarrassed. &#39;Of course! I almost forgot.&#39; She hands you a brochure.&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;move the brochure to the player.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The encyclopedia sales brochure is a thing. The description is &quot;A glossy flyer indicating that you can receive a free Volume A-Aalto of the New Idahoan Encyclopedia Set if you send back the business reply card, and then have the option of purchasing the remaining volumes at a very very reasonable price.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;recap / ask tina about aasvogel / recap / ask george about baccaceous / ask tina about absorptiometer / recap / ask tina about advertisement / read brochure&quot;.</div>
</div><details class="testme-output"><summary>Test me with "recap / ask tina about aasvogel / recap / ask george about baccaceous / ask tina about absorptiometer / recap / ask tina about advertisement / read brochure".</summary><div class="testme-output">Farewell Bend Cafe<br>Beautiful Farewell Bend, Idaho -- or is it Oregon? An almost-abandoned truckstop, in any case, on one of those interminable American east-west highways.<br><br>Tina the waitress is slowly pouring coffee from the pot with a black neck into the pot with an orange neck.<br><br>There is also a large man at table five. The tattoo on his arm says George. For the moment we will assume that it is his own name and not someone else&#39;s.<br><br>&gt;(Testing.)<br><br>&gt;[1] recap<br>Tina has so far told you:<br>  absolutely nothing<br><br>George has so far told you:<br>  absolutely nothing<br><br>&gt;[2] ask tina about aasvogel<br>&quot;Oh, it&#39;s a vulture.&quot;<br><br>&gt;[3] recap<br>Tina has so far told you:<br>  that an aasvogel is a vulture<br><br>George has so far told you:<br>  absolutely nothing<br><br>&gt;[4] ask george about baccaceous<br>&quot;Something that has or bears berries,&quot; says George, without looking up.<br><br>&gt;[5] ask tina about absorptiometer<br>&quot;It&#39;s a thing that measures the solubility of gases in a liquid,&quot; she explains gently, as to a child.<br><br>&gt;[6] recap<br>Tina has so far told you:<br>  that an aasvogel is a vulture<br>  that an absorptiometer measures solubility of gasses in a liquid<br><br>George has so far told you:<br>  that baccaceous means berry-bearing or berry-like<br><br>&gt;[7] ask tina about advertisement<br>Tina looks embarrassed. &quot;Of course! I almost forgot.&quot; She hands you a brochure.<br><br>&gt;[8] read brochure<br>A glossy flyer indicating that you can receive a free Volume A-Aalto of the New Idahoan Encyclopedia Set if you send back the business reply card, and then have the option of purchasing the remaining volumes at a very very reasonable price.
</div></details><div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="goatcheese_and_sage_chicken.html" title="Implementing a FULL SCORE command which lists more information than the regular SCORE command, adding times and rankings, as an extension of the example given in this chapter."><div class="nav-arrow">←280. </div><div class="doc-navbar-text">Goat-Cheese and Sage Chicken</div></a></div><div class="doc-navbar-center">&thinsp;</div><div class="doc-navbar-right"><a class="nav-el" href="sweeney.html" title="A conversation where each topic may have multiple questions and answers associated with it, and where a given exchange can lead to new additions to the list."><div class="doc-navbar-text">Sweeney</div><div class="nav-arrow">282.→</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="nav-about" href="../about.html">About this edition</a> &bull; <a class="nav-about" href="https://twitter.com/inform7tips">@inform7tips</a></p></div></footer>
</body></html>
