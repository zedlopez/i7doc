<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 357. The Eye of the Idol</title>
<script src="../i7doc.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,375;0,400;0,500;0,700;1,375;1,400;1,500;1,700&family=Source+Sans+Pro:ital,wght@0,350;0,400;0,550;0,700;1,350;1,400;1,550;1,700&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>The Eye of the Idol</h1><div class="subheading"><wbr><div class="ex-no">Example 357</div> ★★</div></div>
<div class="doc-navbar example-linkback"><div class="doc-navbar-left"><a class="raw nav-el" href="../WI_18.html#section_25" title="Activities &gt; Listing nondescript items of something"><div class="nav-arrow"><span class="sc">wi</span> 18.25</div><div class="doc-navbar-text">Listing nondescript items of something</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="../RB_3.html#section_1" title="Place &gt; Room Descriptions"><div class="doc-navbar-text">Room Descriptions</div><div class="nav-arrow"><span class="sc">rb</span> 3.1</div></a></div></div>
</div>
<div class="example-meta-desc"><p>A systematic way to allow objects in certain places to be described in the room description body text rather than in paragraphs following the room description, and to control whether supporters list their contents or not.</p></div>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="happy_hour.html" title="Listing visible characters as a group, then giving some followup details in the same paragraph about specific ones."><div class="nav-arrow">⬅356. </div><div class="doc-navbar-text">Happy Hour</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="priority_lab.html" title="A debugging rule useful for checking the priorities of objects about to be listed."><div class="doc-navbar-text">Priority Lab</div><div class="nav-arrow">358.⮕</div></a></div></div>
</header>
<div class="example-body"><div class="play-example borogove"><a class="raw" href="https://snippets.borogove.app/inform7/v10ex357">Play/modify in Borogove</a></div>
<div class="play-example quixe"><a class="raw" href="TheEyeOfTheIdol/index.html">Play in Quixe</a></div>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;The Eye of the Idol&quot;\n\nSection 1 - Reusable Material\n\n\nPositioning relates various things to various things. The verb to be placed in means the positioning relation. The verb to be placed on implies the positioning relation.\n\nRoom-positioning relates various things to various rooms. The verb to be room-placed in means the room-positioning relation.\n\n\nDefinition: a thing (called prop) is in-place:\n\tif the prop is in the location and the prop is room-placed in the location, yes;\n\tif the holder of the prop is a thing and the prop is placed in the holder of the prop, yes;\n\tno.\n\nDefinition: a thing is out-of-place if it is not in-place.\n\n\nBefore listing nondescript items:\n\tnow every marked for listing in-place thing is not marked for listing.\n\n\nA supporter can be quiet.\n\n\nRule for writing a paragraph about a quiet supporter (called chosen table):\n\tif an out-of-place thing is on the chosen table:\n\t\tif an in-place thing is on the chosen table,\n\t\t\tsay &quot;On [the chosen table], in addition to [the list of in-place things on the chosen table], [is-are a list of out-of-place things which are on the chosen table].&quot;;\n\t\totherwise say &quot;On [a chosen table] [is-are a list of out-of-place things which are on the chosen table].&quot;;\n\tnow the chosen table is mentioned.\n\n\nSection 2 - A Sample Scenario\n\nThe Sand-Floored Chamber is a room. &quot;The constant wind has filled this chamber with a layer of fine red sand, as soft as powder snow[if the diamond is in the Sand-floored Chamber]. Something sparkling is half-buried in the corner[end if]. A doorway lies open to the north.&quot;\n\nThe sparkling diamond is in the Sand-floored Chamber. The sparkling diamond is room-placed in the Sand-floored Chamber. The description is &quot;It is a vast diamond; the front is faceted, the back smoothed to fit in some sort of socket.&quot;\n\nThe Hexagonal Temple is north of the Sand-Floored Chamber. &quot;The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory[if the sparkling diamond is in the idol&apos;s eye], in whose single eye a vast diamond gleams[end if][mat-and-incense text].&quot;.\n\nTo say mat-and-incense text:\n\tif the mat is in the Temple and the incense stick is on the pedestal:\n\t\tsay &quot;. A prayer mat at the idol&apos;s feet, and an incense stick still burning on the pedestal, indicate that someone was only recently consigning her grievances to the care of the deity&quot;;\n\totherwise if the mat is in the Temple:\n\t\tsay &quot;. At the idol&apos;s feet, some worshipper has left a prayer mat&quot;;\n\totherwise if the incense stick is on the pedestal:\n\t\tsay &quot;. At the idol&apos;s side is a pedestal, on which incense still smolders&quot;.\n\n\nThe idol is scenery in the Hexagonal Temple. Understand &quot;sculpture&quot; or &quot;stone&quot; or &quot;ivory&quot; as the idol. The description is &quot;The idol is perhaps three times the height of an ordinary man.&quot;\n\nThe idol&apos;s eye is part of the idol. It is a container. The description is &quot;[if the diamond is in the idol&apos;s eye]It gleams with purpose and righteous wrath[otherwise]A round socket in the center of the idol&apos;s forehead from which something seems to be missing[end if].&quot;\n\nThe pedestal is a quiet supporter in the Hexagonal Temple. On the pedestal is an incense stick. The incense stick is placed on the pedestal.\n\nA mat is in the Hexagonal Temple. It is room-placed in the Hexagonal Temple. The description is &quot;Woven of assorted grasses.&quot;\n\nTest me with &quot;get diamond / look / n / get mat / look / drop diamond / look / get diamond / put diamond in eye / look / get incense / look / drop mat / look / get mat / put mat on pedestal / look / put incense on pedestal / look&quot;.`)"><span class="sym">⧉</span></button><div class="codeline storytitle">&quot;The Eye of the Idol&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline i7header">Section 1 - Reusable Material</div></div><p>We start by defining relations that let us know where items &quot;belong&quot;, with the understanding that if something is where it belongs, it will be described in the main room description and therefore should not be separately listed. Thus:</p>
<div class="codeblock"><div class="codeline">Positioning relates various things to various things. The verb to be placed in means the positioning relation. The verb to be placed on implies the positioning relation.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Room-positioning relates various things to various rooms. The verb to be room-placed in means the room-positioning relation.</div>
</div><p>We can&#39;t make relations relate various objects to various objects, and rooms are not things, so two separate cases are necessary. An alternative approach would be to say &quot;A thing has an object called the initial placement&quot;, which would allow a thing to have an initial placement that was a room, a supporter, or a container; an advantage of using relations, though, is that that way we can if we like specify multiple placements for the same object, so that, e.g., a sparkling diamond can be described in the main description paragraph as &quot;half-buried in dust&quot; in the beginning of the game, and then at the end as &quot;in the eye of the idol&quot; at the end.</p>
<p>Now we define, based on these relations, an &quot;in-place&quot; adjective, which will identify whether something is in a location which will specially describe it:</p>
<div class="codeblock"><div class="codeline">Definition: a thing (called prop) is in-place:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the prop is in the location and the prop is room-placed in the location, yes;</div>
<div class="codeline">&ensp;&ensp;&ensp;if the holder of the prop is a thing and the prop is placed in the holder of the prop, yes;</div>
<div class="codeline">&ensp;&ensp;&ensp;no.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Definition: a thing is out-of-place if it is not in-place.</div>
</div><p>With that done, removing these items automatically from the room description is actually pretty easy:</p>
<div class="codeblock"><div class="codeline">Before listing nondescript items:</div>
<div class="codeline">&ensp;&ensp;&ensp;now every marked for listing in-place thing is not marked for listing.</div>
</div><p>One tricky case remains: when something is placed on a supporter that is scenery, it can be mentioned even if we have marked that object &quot;not marked for listing&quot;. What matters here is not whether the object itself is marked for listing but whether the supporter has been &quot;mentioned&quot;. (A fuller description of how room descriptions are assembled is available in the Looking section of the <a href="RB_6.html">Commands chapter</a> in the Recipe Book.) So let&#39;s also add a feature whereby we can easily suppress the descriptions of these supporters when appropriate:</p>
<div class="codeblock"><div class="codeline">A supporter can be quiet.</div>
</div><p>A quiet supporter is one that is never mentioned itself and which only mentions its contents if they are out of place. This allows for maximum flexibility in incorporating it into the body of room descriptions.</p>
<div class="codeblock"><div class="codeline">Rule for writing a paragraph about a quiet supporter (called chosen table):</div>
<div class="codeline">&ensp;&ensp;&ensp;if an out-of-place thing is on the chosen table:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if an in-place thing is on the chosen table,</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;On [the chosen table], in addition to [the list of in-place things on the chosen table], [is-are a list of out-of-place things which are on the chosen table].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;otherwise say &quot;On [a chosen table] [is-are a list of out-of-place things which are on the chosen table].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;now the chosen table is mentioned.</div>
</div><p>Notice that we can still override this with writing a paragraph rules about specific supporters in our game, if we decide that we want something a little different in some cases.</p>
<p>Now, an example to test this out:</p>
<div class="codeblock"><div class="codeline i7header">Section 2 - A Sample Scenario</div><div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Sand-Floored Chamber is a room. &quot;The constant wind has filled this chamber with a layer of fine red sand, as soft as powder snow[if the diamond is in the Sand-floored Chamber]. Something sparkling is half-buried in the corner[end if]. A doorway lies open to the north.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The sparkling diamond is in the Sand-floored Chamber. The sparkling diamond is room-placed in the Sand-floored Chamber. The description is &quot;It is a vast diamond; the front is faceted, the back smoothed to fit in some sort of socket.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Hexagonal Temple is north of the Sand-Floored Chamber. &quot;The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory[if the sparkling diamond is in the idol&#39;s eye], in whose single eye a vast diamond gleams[end if][mat-and-incense text].&quot;.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">To say mat-and-incense text:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the mat is in the Temple and the incense stick is on the pedestal:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;. A prayer mat at the idol&#39;s feet, and an incense stick still burning on the pedestal, indicate that someone was only recently consigning her grievances to the care of the deity&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise if the mat is in the Temple:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;. At the idol&#39;s feet, some worshipper has left a prayer mat&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise if the incense stick is on the pedestal:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;. At the idol&#39;s side is a pedestal, on which incense still smolders&quot;.</div>
</div><p>We could have done all this with text conditions in the main room description, but it becomes difficult to read when there are too many conditions operating in the same text property, so we break it out into a clearer set of conditions.</p>
<div class="codeblock"><div class="codeline">The idol is scenery in the Hexagonal Temple. Understand &quot;sculpture&quot; or &quot;stone&quot; or &quot;ivory&quot; as the idol. The description is &quot;The idol is perhaps three times the height of an ordinary man.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The idol&#39;s eye is part of the idol. It is a container. The description is &quot;[if the diamond is in the idol&#39;s eye]It gleams with purpose and righteous wrath[otherwise]A round socket in the center of the idol&#39;s forehead from which something seems to be missing[end if].&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The pedestal is a quiet supporter in the Hexagonal Temple. On the pedestal is an incense stick. The incense stick is placed on the pedestal.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">A mat is in the Hexagonal Temple. It is room-placed in the Hexagonal Temple. The description is &quot;Woven of assorted grasses.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Test me with &quot;get diamond / look / n / get mat / look / drop diamond / look / get diamond / put diamond in eye / look / get incense / look / drop mat / look / get mat / put mat on pedestal / look / put incense on pedestal / look&quot;.</div>
</div><details class="testme-output"><summary><div class="summation">Test me with "get diamond / look / n / get mat / look / drop diamond / look / get diamond / put diamond in eye / look / get incense / look / drop mat / look / get mat / put mat on pedestal / look / put incense on pedestal / look".</div></summary><div class="testme-output">Sand-Floored Chamber<br>The constant wind has filled this chamber with a layer of fine red sand, as soft as powder snow. Something sparkling is half-buried in the corner. A doorway lies open to the north.<br><br><span class="mono">&gt;(Testing.)</span><br><br><span class="mono">&gt;[1] get diamond</span><br>Taken.<br><br><span class="mono">&gt;[2] look</span><br>Sand-Floored Chamber<br>The constant wind has filled this chamber with a layer of fine red sand, as soft as powder snow. A doorway lies open to the north.<br><br><span class="mono">&gt;[3] n</span><br><br>Hexagonal Temple<br>The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory. A prayer mat at the idol&#39;s feet, and an incense stick still burning on the pedestal, indicate that someone was only recently consigning her grievances to the care of the deity.<br><br>On the pedestal is an incense stick.<br><br><span class="mono">&gt;[4] get mat</span><br>Taken.<br><br><span class="mono">&gt;[5] look</span><br>Hexagonal Temple<br>The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory. At the idol&#39;s side is a pedestal, on which incense still smolders.<br><br>On the pedestal is an incense stick.<br><br><span class="mono">&gt;[6] drop diamond</span><br>Dropped.<br><br><span class="mono">&gt;[7] look</span><br>Hexagonal Temple<br>The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory. At the idol&#39;s side is a pedestal, on which incense still smolders.<br><br>On the pedestal is an incense stick.<br><br>You can also see a sparkling diamond here.<br><br><span class="mono">&gt;[8] get diamond</span><br>Taken.<br><br><span class="mono">&gt;[9] put diamond in eye</span><br>You put the sparkling diamond into the idol&#39;s eye.<br><br><span class="mono">&gt;[10] look</span><br>Hexagonal Temple<br>The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory, in whose single eye a vast diamond gleams. At the idol&#39;s side is a pedestal, on which incense still smolders.<br><br>On the pedestal is an incense stick.<br><br><span class="mono">&gt;[11] get incense</span><br>Taken.<br><br><span class="mono">&gt;[12] look</span><br>Hexagonal Temple<br>The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory, in whose single eye a vast diamond gleams.<br><br><span class="mono">&gt;[13] drop mat</span><br>Dropped.<br><br><span class="mono">&gt;[14] look</span><br>Hexagonal Temple<br>The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory, in whose single eye a vast diamond gleams. At the idol&#39;s feet, some worshipper has left a prayer mat.<br><br><span class="mono">&gt;[15] get mat</span><br>Taken.<br><br><span class="mono">&gt;[16] put mat on pedestal</span><br>You put the mat on the pedestal.<br><br><span class="mono">&gt;[17] look</span><br>Hexagonal Temple<br>The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory, in whose single eye a vast diamond gleams.<br><br>On a pedestal is a mat.<br><br><span class="mono">&gt;[18] put incense on pedestal</span><br>You put the incense stick on the pedestal.<br><br><span class="mono">&gt;[19] look</span><br>Hexagonal Temple<br>The temple walls are great ashlar blocks rising to a hundred feet overhead, perhaps more; the roof is a scarlet awning only, through which the sun filters down in blood hues. Overseeing all is a sculpture in stone and ivory, in whose single eye a vast diamond gleams. At the idol&#39;s side is a pedestal, on which incense still smolders.<br><br>On the pedestal, in addition to the incense stick, is a mat.
</div></details></div><div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="happy_hour.html" title="Listing visible characters as a group, then giving some followup details in the same paragraph about specific ones."><div class="nav-arrow">⬅356. </div><div class="doc-navbar-text">Happy Hour</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="priority_lab.html" title="A debugging rule useful for checking the priorities of objects about to be listed."><div class="doc-navbar-text">Priority Lab</div><div class="nav-arrow">358.⮕</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="raw" href="../about.html">About this edition</a>&ensp;&bull;&ensp;<a class="raw" href="https://twitter.com/inform7tips">@inform7tips</a></p></div></footer>
</body></html>
