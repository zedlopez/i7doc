<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 232. Swerve left? Swerve right? Or think about it and die?</title>
<script src="../i7doc.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,375;0,400;0,500;0,700;1,375;1,400;1,500;1,700&family=Source+Sans+Pro:ital,wght@0,350;0,400;0,550;0,700;1,350;1,400;1,550;1,700&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="../i7doc.css">
</head>
<body><main>
<header class="example-header">
<nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Swerve left? Swerve right? Or think about it and die?</h1><div class="subheading"><wbr><div class="ex-no">Example 232</div> ★</div></div>
<div class="doc-navbar example-linkback"><div class="doc-navbar-left"><a class="raw nav-el" href="../WI_13.html#section_10" title="Relations &gt; Defining new prepositions"><div class="nav-arrow"><span class="sc">wi</span> 13.10</div><div class="doc-navbar-text">Defining new prepositions</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="../RB_10.html#section_5" title="Physics: Substances, Ropes, Energy and Weight &gt; Volume, Height, Weight"><div class="doc-navbar-text">Volume, Height, Weight</div><div class="nav-arrow"><span class="sc">rb</span> 10.5</div></a></div></div>
</div>
<div class="example-meta-desc"><p>Building a marble chute track in which a dropped marble will automatically roll downhill.</p></div>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="abolition_of_love.html" title="A thorough exploration of all the kinds of relations established so far, with the syntax to set and unset them."><div class="nav-arrow">⬅231. </div><div class="doc-navbar-text">The Abolition of Love</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="beneath_the_surface.html" title="An &quot;underlying&quot; relation which adds to the world model the idea of objects hidden under other objects."><div class="doc-navbar-text">Beneath the Surface</div><div class="nav-arrow">233.⮕</div></a></div></div>
</header>
<div class="example-body"><p>Suppose we have marbles that roll downhill across our map, in a life-size version of one of those marble-chute toys. We might now want to keep track of both compass relationships and which-room-slopes-into-which, so we make a new relation:</p>
<div class="play-example borogove"><a class="raw" href="https://snippets.borogove.app/inform7/v10ex232">Play/modify in Borogove</a></div>
<div class="play-example quixe"><a class="raw" href="Marbles/index.html">Play in Quixe</a></div>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Swerve left? Swerve right? Or think about it and die?&quot;\n\nOverlooking relates various rooms to various rooms.\n\nThe verb to overlook means the overlooking relation.\n\nA thing can be spherical or lumpy. A marble is a kind of thing. A marble is always spherical. The player carries a marble called a red marble. The player carries a marble called an agate marble. The player carries a marble called a blue cloudy marble.\n\nThe Long Yellow Slide is north of the Funnel. The Long Yellow Slide overlooks the Blue Funnel. The Ski-jump is below the Blue Funnel. The Blue Funnel overlooks the Ski-jump. The Ski-jump overlooks the Landing Bowl. The Landing Bowl overlooks the Snake Run. The Landing Bowl is north of the Snake Run. The Snake Run overlooks the Goal. The Snake Run is north of the Goal.\n\nDefinition: a room is sloping if it overlooks a room.\n\n\nUnderstand &quot;sit&quot; as sitting down. Sitting down is an action applying to nothing. Check sitting down: if the player is spherical, say &quot;You are already seated.&quot; Carry out sitting down: now the player is spherical. Report sitting down: say &quot;You sit, ready to slide wherever fate takes you.&quot;\n\nUnderstand the command &quot;stand&quot; as something new.\n\nUnderstand &quot;stand&quot; or &quot;stand up&quot; as standing up. Standing up is an action applying to nothing. Check standing up: if the player is lumpy, say &quot;You are already standing.&quot; Carry out standing up: now the player is lumpy. Report standing up: say &quot;You get to your feet.&quot;\n\n\nEvery turn:\n\trepeat with item running through spherical things which are in sloping rooms:\n\t\tlet the current space be the holder of the item;\n\t\tlet the final space be a random room which is overlooked by the current space;\n\t\tif the player can see the item and the item is a marble, say &quot;[The item] rolls out of the room toward [the final space].[line break]&quot;;\n\t\tif the player is the item, say &quot;You keep sliding...&quot;;\n\t\tmove the item to the final space;\n\t\tif the player can see the item and the item is a marble, say &quot;[The item] rolls into the room from [the current space].[line break]&quot;.\n\n\nInstead of jumping in a sloping room:\n\tsay &quot;You leap...&quot;;\n\tmove the player to a random room overlooked by the location.\n\n\nThe Downhill Splitter is north of the Long Yellow Slide. &quot;The green plastic chute runs downhill towards a Y-junction, forcing incoming marbles right or left.&quot;\n\nThe Downhill Splitter overlooks the Long Yellow Slide and the Purple Snaking Passage. The Purple Snaking Passage is southeast of the Downhill Splitter. The Purple Snaking Passage overlooks the Landing Bowl. The Purple Snaking Passage is above the Landing Bowl.\n\nThe player is in the Downhill Splitter.\n\nTest me with &quot;drop red / drop blue / sit / z / stand up / drop agate / sit / z / z / z / z / z&quot;.`)"><span class="sym">⧉</span></button><div class="codeline storytitle">&quot;Swerve left? Swerve right? Or think about it and die?&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Overlooking relates various rooms to various rooms.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The verb to overlook means the overlooking relation.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">A thing can be spherical or lumpy. A marble is a kind of thing. A marble is always spherical. The player carries a marble called a red marble. The player carries a marble called an agate marble. The player carries a marble called a blue cloudy marble.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Long Yellow Slide is north of the Funnel. The Long Yellow Slide overlooks the Blue Funnel. The Ski-jump is below the Blue Funnel. The Blue Funnel overlooks the Ski-jump. The Ski-jump overlooks the Landing Bowl. The Landing Bowl overlooks the Snake Run. The Landing Bowl is north of the Snake Run. The Snake Run overlooks the Goal. The Snake Run is north of the Goal.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Definition: a room is sloping if it overlooks a room.</div>
</div><p>And let&#39;s say we want the player to be allowed to slide, too, since that would be much more fun than just watching the marbles go:</p>
<div class="codeblock"><div class="codeline">Understand &quot;sit&quot; as sitting down. Sitting down is an action applying to nothing. Check sitting down: if the player is spherical, say &quot;You are already seated.&quot; Carry out sitting down: now the player is spherical. Report sitting down: say &quot;You sit, ready to slide wherever fate takes you.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Understand the command &quot;stand&quot; as something new.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Understand &quot;stand&quot; or &quot;stand up&quot; as standing up. Standing up is an action applying to nothing. Check standing up: if the player is lumpy, say &quot;You are already standing.&quot; Carry out standing up: now the player is lumpy. Report standing up: say &quot;You get to your feet.&quot;</div>
</div><p>Now a rule to control what happens to all our sliding and rolling objects:</p>
<div class="codeblock"><div class="codeline">Every turn:</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat with item running through spherical things which are in sloping rooms:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let the current space be the holder of the item;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let the final space be a random room which is overlooked by the current space;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the player can see the item and the item is a marble, say &quot;[The item] rolls out of the room toward [the final space].[line break]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the player is the item, say &quot;You keep sliding...&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move the item to the final space;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the player can see the item and the item is a marble, say &quot;[The item] rolls into the room from [the current space].[line break]&quot;.</div>
</div><p>Since the Ski-jump overlooks the Landing Bowl, the marble will be able to fly through the air to its destination, even though there is no map connection to allow the player to cross. We might want to let the player make it across this barrier also, so:</p>
<div class="codeblock"><div class="codeline">Instead of jumping in a sloping room:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;You leap...&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;move the player to a random room overlooked by the location.</div>
</div><p>Because overlooking is various-to-various, we could include that element popular in marble chute toys, the splitter:</p>
<div class="codeblock"><div class="codeline">The Downhill Splitter is north of the Long Yellow Slide. &quot;The green plastic chute runs downhill towards a Y-junction, forcing incoming marbles right or left.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Downhill Splitter overlooks the Long Yellow Slide and the Purple Snaking Passage. The Purple Snaking Passage is southeast of the Downhill Splitter. The Purple Snaking Passage overlooks the Landing Bowl. The Purple Snaking Passage is above the Landing Bowl.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The player is in the Downhill Splitter.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Test me with &quot;drop red / drop blue / sit / z / stand up / drop agate / sit / z / z / z / z / z&quot;.</div>
</div><details class="testme-output"><summary><div class="summation">Test me with "drop red / drop blue / sit / z / stand up / drop agate / sit / z / z / z / z / z".</div></summary><div class="testme-output">Downhill Splitter<br>The green plastic chute runs downhill towards a Y-junction, forcing incoming marbles right or left.<br><br><span class="mono">&gt;(Testing.)</span><br><br><span class="mono">&gt;[1] drop red</span><br>Dropped.<br><br>The red marble rolls out of the room toward the Purple Snaking Passage.<br><br><span class="mono">&gt;[2] drop blue</span><br>Dropped.<br><br>The blue cloudy marble rolls out of the room toward the Long Yellow Slide.<br><br><span class="mono">&gt;[3] sit</span><br>You sit, ready to slide wherever fate takes you.<br><br>You keep sliding...<br><br>Purple Snaking Passage<br><br><span class="mono">&gt;[4] z</span><br>Time passes.<br><br>You keep sliding...<br><br>Landing Bowl<br><br><span class="mono">&gt;[5] stand up</span><br>You get to your feet.<br><br>The blue cloudy marble rolls into the room from the Ski-jump.<br><br><span class="mono">&gt;[6] drop agate</span><br>Dropped.<br><br>The agate marble rolls out of the room toward the Snake Run.<br>The blue cloudy marble rolls out of the room toward the Snake Run.<br><br><span class="mono">&gt;[7] sit</span><br>You sit, ready to slide wherever fate takes you.<br><br>You keep sliding...<br><br>Snake Run<br>You can see a blue cloudy marble and an agate marble here.<br><br>The agate marble rolls out of the room toward the Goal.<br>The blue cloudy marble rolls out of the room toward the Goal.<br><br><span class="mono">&gt;[8] z</span><br>Time passes.<br><br>You keep sliding...<br><br>Goal<br>You can see a blue cloudy marble, an agate marble and a red marble here.<br><br><span class="mono">&gt;[9] z</span><br>Time passes.<br><br><span class="mono">&gt;[10] z</span><br>Time passes.<br><br><span class="mono">&gt;[11] z</span><br>Time passes.<br><br><span class="mono">&gt;[12] z</span><br>Time passes.
</div></details></div><div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="abolition_of_love.html" title="A thorough exploration of all the kinds of relations established so far, with the syntax to set and unset them."><div class="nav-arrow">⬅231. </div><div class="doc-navbar-text">The Abolition of Love</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="beneath_the_surface.html" title="An &quot;underlying&quot; relation which adds to the world model the idea of objects hidden under other objects."><div class="doc-navbar-text">Beneath the Surface</div><div class="nav-arrow">233.⮕</div></a></div></div>
</main><footer id="credits-footer"><nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="raw" href="../about.html">About this edition</a>&ensp;&bull;&ensp;<a class="raw" href="https://mastodon.gamedev.place/web/@inform7tips">@inform7tips@mastodon.gamedev.place</a></p></div></footer>
</body></html>
