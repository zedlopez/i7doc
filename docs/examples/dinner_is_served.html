<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 217. Dinner is Served</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Dinner is Served</h1><div class="subheading">Example 217 ★★</div></div></div>
<div class="linkback">
<a href="../WI_12.html#section_18" title="Advanced Actions &gt; Changing reachability">WI §12.18 Changing reachability</a><br><a href="../RB_3.html#section_6" title="Place &gt; Windows">RB §3.6 Windows</a>
</div>
<p class="example-desc">A window between two locations. When the window is open, the player can reach through into the other location; when it isn&#39;t, access is barred.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="waterworld.html" title="A backdrop which the player can examine, but cannot interact with in any other way."><div class="nav-arrow">←</div> <div class="doc-navbar-text">216. Waterworld</div></a></div><div class="doc-navbar-center">&thinsp;</div><div class="doc-navbar-right"><a class="nav-el" href="flashlight.html" title="Visibility set so that looking under objects produces no result unless the player has a light source to shine there (regardless of the light level of the room)."><div class="doc-navbar-text">218. Flashlight</div> <div class="nav-arrow">→</div></a></div></div>
</header>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex217">Play/modify Dinner is Served in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Window/index.html">Play Dinner is Served in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Dinner is Served&quot;\n\nStreet in Kolonaki is a room. &quot;There is a single round table out on the street here, and a window more or less at knee level looks down into the Olive Tree Gyro Shop, which is partly basement.&quot;\n\nThe Street contains a round table. The table is scenery. On the round table is a plate. On the plate are a gyro and a mound of fresh potates. The plate is portable. The potates and the gyro are edible. The description of potates is &quot;They&apos;d be called french fries, at home, but these are steak-cut and fried in olive oil.&quot; The description of the gyro is &quot;Dripping garlic-yogurt sauce.&quot;\n\nOlive Tree Gyro Shop is inside from Street in Kolonaki. Kostis is a man in the Gyro Shop. In the Shop is a stand. On the stand is a rotating column of cooking lamb flesh. In the shop is a closed, openable container called a drinks refrigerator. The refrigerator contains a can of Mythos beer and a can of Coke Light.\n\n\nThe can&apos;t reach through closed window rule is listed instead of the can&apos;t reach inside rooms rule in the reaching inside rules.\n\nThis is the can&apos;t reach through closed window rule:\n\tlet reaching through the window be false;\n\tif the container in question is a room and the container in question is not the location:\n\t\tif the container in question is the Street and the location is the Olive Tree Gyro Shop:\n\t\t\tnow reaching through the window is true;\n\t\tif the container in question is the Gyro Shop and the location is the Street:\n\t\t\tnow reaching through the window is true;\n\t\tif reaching through the window is true:\n\t\t\tif the window is closed:\n\t\t\t\tsay &quot;You can&apos;t reach through the closed window.&quot;;\n\t\t\t\tdeny access;\n\t\t\totherwise:\n\t\t\t\tallow access;\n\t\totherwise:\n\t\t\tsay &quot;You can&apos;t reach into [the container in question] from here.&quot;;\n\t\t\tdeny access.\n\n\nAfter looking when a room (called the next room) is adjacent:\n\ttry examining the next room.\n\nInstead of examining a supporter, say &quot;On [the noun] [is-are a list of things on the noun].&quot; Instead of examining an open container, say &quot;In [the noun] [is-are a list of things in the noun].&quot;\n\nThe window is a backdrop. It is in the Street and the Shop. The window can be openable. The window can be open. The window is openable and closed. Instead of searching the window in the Street: try examining the shop. Instead of searching the window in the Shop: try examining the street.\n\nUnderstand &quot;examine [any adjacent room]&quot; as examining.\n\nInstead of examining a room:\n\tsay &quot;Over in [the noun], you can see [a list of visible things in the noun].&quot;\n\nAfter deciding the scope of the player:\n\tif the player is in the Street, place the Shop in scope;\n\tif the player is in the Shop, place the Street in scope.\n\nTest me with &quot;examine shop / open refrigerator / open window / examine shop / open refrigerator / get beer / in / examine street / out / get gyro / close window / put gyro in refrigerator / open window / put gyro in refrigerator&quot;.`)">⧉</button><div class="codeline storytitle">&quot;Dinner is Served&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Street in Kolonaki is a room. &quot;There is a single round table out on the street here, and a window more or less at knee level looks down into the Olive Tree Gyro Shop, which is partly basement.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The Street contains a round table. The table is scenery. On the round table is a plate. On the plate are a gyro and a mound of fresh potates. The plate is portable. The potates and the gyro are edible. The description of potates is &quot;They&#39;d be called french fries, at home, but these are steak-cut and fried in olive oil.&quot; The description of the gyro is &quot;Dripping garlic-yogurt sauce.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Olive Tree Gyro Shop is inside from Street in Kolonaki. Kostis is a man in the Gyro Shop. In the Shop is a stand. On the stand is a rotating column of cooking lamb flesh. In the shop is a closed, openable container called a drinks refrigerator. The refrigerator contains a can of Mythos beer and a can of Coke Light.</div>
</div><p>Here&#39;s the part that allows reaching through the window.</p>
<p>We replace the usual rule that says the player can never reach into a room with one that more specifically checks whether we are trying to reach through the window. If we aren&#39;t, we return the usual refusal. If we are, we return a custom refusal if the window is closed (&quot;You can&#39;t reach through the closed window&quot;), but allow access if the window is open.</p>
<div class="codeblock"><div class="codeline">The can&#39;t reach through closed window rule is listed instead of the can&#39;t reach inside rooms rule in the reaching inside rules.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">This is the can&#39;t reach through closed window rule:</div>
<div class="codeline">&ensp;&ensp;&ensp;let reaching through the window be false;</div>
<div class="codeline">&ensp;&ensp;&ensp;if the container in question is a room and the container in question is not the location:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the container in question is the Street and the location is the Olive Tree Gyro Shop:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now reaching through the window is true;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the container in question is the Gyro Shop and the location is the Street:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now reaching through the window is true;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if reaching through the window is true:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the window is closed:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;You can&#39;t reach through the closed window.&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;deny access;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;allow access;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;You can&#39;t reach into [the container in question] from here.&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;deny access.</div>
</div><p>And the rest is window-dressing.</p>
<div class="codeblock"><div class="codeline">After looking when a room (called the next room) is adjacent:</div>
<div class="codeline">&ensp;&ensp;&ensp;try examining the next room.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Instead of examining a supporter, say &quot;On [the noun] [is-are a list of things on the noun].&quot; Instead of examining an open container, say &quot;In [the noun] [is-are a list of things in the noun].&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The window is a backdrop. It is in the Street and the Shop. The window can be openable. The window can be open. The window is openable and closed. Instead of searching the window in the Street: try examining the shop. Instead of searching the window in the Shop: try examining the street.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Understand &quot;examine [any adjacent room]&quot; as examining.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Instead of examining a room:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;Over in [the noun], you can see [a list of visible things in the noun].&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">After deciding the scope of the player:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the player is in the Street, place the Shop in scope;</div>
<div class="codeline">&ensp;&ensp;&ensp;if the player is in the Shop, place the Street in scope.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;examine shop / open refrigerator / open window / examine shop / open refrigerator / get beer / in / examine street / out / get gyro / close window / put gyro in refrigerator / open window / put gyro in refrigerator&quot;.</div>
</div><details class="testme-output"><summary>Test me with "examine shop / open refrigerator / open window / examine shop / open refrigerator / get beer / in / examine street / out / get gyro / close window / put gyro in refrigerator / open window / put gyro in refrigerator".</summary><div class="testme-output">Street in Kolonaki<br>There is a single round table out on the street here, and a window more or less at knee level looks down into the Olive Tree Gyro Shop, which is partly basement.<br><br>On the round table is a plate (on which are a gyro and a mound of fresh potates).<br><br>Over in Olive Tree Gyro Shop, you can see Kostis, a stand and a drinks refrigerator.<br><br>&gt;(Testing.)<br><br>&gt;[1] examine shop<br>Over in Olive Tree Gyro Shop, you can see Kostis, a stand and a drinks refrigerator.<br><br>&gt;[2] open refrigerator<br>You can&#39;t reach through the closed window.<br><br>&gt;[3] open window<br>You open the window.<br><br>&gt;[4] examine shop<br>Over in Olive Tree Gyro Shop, you can see Kostis, a stand and a drinks refrigerator.<br><br>&gt;[5] open refrigerator<br>You open the drinks refrigerator, revealing a can of Mythos beer and a can of Coke Light.<br><br>&gt;[6] get beer<br>Taken.<br><br>&gt;[7] in<br><br>Olive Tree Gyro Shop<br>You can see Kostis, a stand (on which is a rotating column of cooking lamb flesh) and a drinks refrigerator (in which is a can of Coke Light) here.<br><br>Over in Street in Kolonaki, you can see a round table.<br><br>&gt;[8] examine street<br>Over in Street in Kolonaki, you can see a round table.<br><br>&gt;[9] out<br><br>Street in Kolonaki<br>There is a single round table out on the street here, and a window more or less at knee level looks down into the Olive Tree Gyro Shop, which is partly basement.<br><br>On the round table is a plate (on which are a gyro and a mound of fresh potates).<br><br>Over in Olive Tree Gyro Shop, you can see Kostis, a stand and a drinks refrigerator.<br><br>&gt;[10] get gyro<br>(the gyro)<br>Taken.<br><br>&gt;[11] close window<br>You close the window.<br><br>&gt;[12] put gyro in refrigerator<br>(the gyro in the drinks refrigerator)<br>You can&#39;t reach through the closed window.<br><br>&gt;[13] open window<br>You open the window.<br><br>&gt;[14] put gyro in refrigerator<br>(the gyro in the drinks refrigerator)<br>You put the gyro into the drinks refrigerator.
</div></details><div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="waterworld.html" title="A backdrop which the player can examine, but cannot interact with in any other way."><div class="nav-arrow">←</div> <div class="doc-navbar-text">216. Waterworld</div></a></div><div class="doc-navbar-center">&thinsp;</div><div class="doc-navbar-right"><a class="nav-el" href="flashlight.html" title="Visibility set so that looking under objects produces no result unless the player has a light source to shine there (regardless of the light level of the room)."><div class="doc-navbar-text">218. Flashlight</div> <div class="nav-arrow">→</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="nav-about" href="../about.html">About this edition</a> &bull; <a class="nav-about" href="https://twitter.com/inform7tips">@inform7tips</a></p></div></footer>
</body></html>
