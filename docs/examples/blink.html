<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 453. Blink</title>
<script src="../i7doc.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,375;0,400;0,500;0,700;1,375;1,400;1,500;1,700&family=Source+Sans+Pro:ital,wght@0,350;0,400;0,550;0,700;1,350;1,400;1,550;1,700&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="../i7doc.css">
</head>
<body><main>
<header class="example-header">
<nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Blink</h1><div class="subheading"><wbr><div class="ex-no">Example 453</div> ★</div></div>
<div class="doc-navbar example-linkback"><div class="doc-navbar-left"><a class="raw nav-el" href="../WI_27.html#section_30" title="Extensions &gt; To say one of"><div class="nav-arrow"><span class="sc">wi</span> 27.30</div><div class="doc-navbar-text">To say one of</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="../RB_2.html#section_1" title="Adaptive Prose &gt; Varying What Is Written"><div class="doc-navbar-text">Varying What Is Written</div><div class="nav-arrow"><span class="sc">rb</span> 2.1</div></a></div></div>
</div>
<div class="example-meta-desc"><p>Making a &quot;by atmosphere&quot; token, allowing us to design our own text variations such as &quot;[one of]normal[or]gloomy[or]scary[by atmosphere]&quot;.</p></div>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="chanel_version.html" title="Making paired italic and boldface tags like those used by HTML for web pages."><div class="nav-arrow">⬅452. </div><div class="doc-navbar-text">Chanel Version 1</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="uncommon_ground.html" title="Making a &quot;by viewpoint&quot; token, allowing us to design our own text variations such as &quot;[show to yourself]quaint[to Lolita]thrilling[to everyone else]squalid[end show]&quot; depending on the identity of the player at the moment."><div class="doc-navbar-text">Uncommon Ground</div><div class="nav-arrow">454.⮕</div></a></div></div>
</header>
<div class="example-body"><p>Suppose we are writing a game in which the mood of the piece changes, and we would like to have lots of descriptions that vary according to its current state. We might in that case want to create our own &quot;by atmosphere&quot; token, to control text variations, like this:</p>
<div class="play-example borogove"><a class="raw" href="https://snippets.borogove.app/inform7/v10ex453">Play/modify in Borogove</a></div>
<div class="play-example quixe"><a class="raw" href="Blink/index.html">Play in Quixe</a></div>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Blink&quot;\n\nAtmosphere is a kind of value. The atmospheres are normal, melancholy, and creepy.\n\nThe current atmosphere is an atmosphere that varies.\nThe current atmosphere variable translates into I6 as &quot;current_atmosphere&quot;.\n\nTo say by atmosphere -- ending say_one_of with marker I7_SOO_ATM:\n\t(- {-close-brace} -).\n\n\nInclude (-\nGlobal current_atmosphere = 1;\n[ I7_SOO_ATM oldval count;\n\tif (count < current_atmosphere) return count;\n\treturn current_atmosphere; ];\n-)\n\n\nThe Flat is a room. &quot;A small [one of]but cozy[or]depressing[or]imprisoning[by atmosphere] flat. Outside the window, the sun is [one of][or][or]apparently [by atmosphere]shining and there is a brisk breeze through the leaves of the birch trees. [one of]It would be quite nice weather for a walk[or]The rest of the world apparently has no appreciation of what you suffer[or]It all looks deceptively normal[by atmosphere].&quot;\n\nInstead of waiting when the current atmosphere is normal:\n\tsay &quot;Everything stretches wide and flat for just a moment, as though all the world around you were painted on a thin rubber sheet that is being [italic type]stretched[roman type]. Then it snaps back into place, leaving your ears ringing. But that little glitch was enough to warn you. Someone is tampering with space-time again. Someone very close by.&quot;;\n\tnow the current atmosphere is creepy.\n\nTest me with &quot;look / z / look&quot;.`)"><span class="sym">⧉</span></button><div class="codeline storytitle">&quot;Blink&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Atmosphere is a kind of value. The atmospheres are normal, melancholy, and creepy.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The current atmosphere is an atmosphere that varies.</div>
<div class="codeline">The current atmosphere variable translates into <span class="sc">i</span>6 as &quot;current_atmosphere&quot;.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">To say by atmosphere -- ending say_one_of with marker I7_SOO_ATM:</div>
<div class="codeline">&ensp;&ensp;&ensp;(- {-close-brace} -).</div>
</div><p>Since we&#39;re operating within the untyped Inform 6, we can make use of the fact that kinds of value are (internally) just constants, enumerated in the same order in which they were originally defined. In other words, &quot;normal&quot; at the <span class="sc">i</span>6 level translates to 1, &quot;melancholy&quot; to 2, and &quot;creepy&quot; to 3; so we can return the value of the current atmosphere, and thereby select option 1, 2, or 3:</p>
<div class="codeblock"><div class="codeline">Include (-</div>
<div class="codeline">Global current_atmosphere = 1;</div>
<div class="codeline">[ I7_SOO_ATM oldval count;</div>
<div class="codeline">&ensp;&ensp;&ensp;if (count &lt; current_atmosphere) return count;</div>
<div class="codeline">&ensp;&ensp;&ensp;return current_atmosphere; ];</div>
<div class="codeline">-)</div>
</div><p>And that concludes the hard part. Now to test that it works:</p>
<div class="codeblock"><div class="codeline">The Flat is a room. &quot;A small [one of]but cozy[or]depressing[or]imprisoning[by atmosphere] flat. Outside the window, the sun is [one of][or][or]apparently [by atmosphere]shining and there is a brisk breeze through the leaves of the birch trees. [one of]It would be quite nice weather for a walk[or]The rest of the world apparently has no appreciation of what you suffer[or]It all looks deceptively normal[by atmosphere].&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Instead of waiting when the current atmosphere is normal:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;Everything stretches wide and flat for just a moment, as though all the world around you were painted on a thin rubber sheet that is being [italic type]stretched[roman type]. Then it snaps back into place, leaving your ears ringing. But that little glitch was enough to warn you. Someone is tampering with space-time again. Someone very close by.&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;now the current atmosphere is creepy.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Test me with &quot;look / z / look&quot;.</div>
</div><details class="testme-output"><summary><div class="summation">Test me with "look / z / look".</div></summary><div class="testme-output">Flat<br>A small but cozy flat. Outside the window, the sun is shining and there is a brisk breeze through the leaves of the birch trees. It would be quite nice weather for a walk.<br><br><span class="mono">&gt;(Testing.)</span><br><br><span class="mono">&gt;[1] look</span><br>Flat<br>A small but cozy flat. Outside the window, the sun is shining and there is a brisk breeze through the leaves of the birch trees. It would be quite nice weather for a walk.<br><br><span class="mono">&gt;[2] z</span><br>Everything stretches wide and flat for just a moment, as though all the world around you were painted on a thin rubber sheet that is being stretched. Then it snaps back into place, leaving your ears ringing. But that little glitch was enough to warn you. Someone is tampering with space-time again. Someone very close by.<br><br><span class="mono">&gt;[3] look</span><br>Flat<br>A small imprisoning flat. Outside the window, the sun is apparently shining and there is a brisk breeze through the leaves of the birch trees. It all looks deceptively normal.
</div></details></div></main><div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="chanel_version.html" title="Making paired italic and boldface tags like those used by HTML for web pages."><div class="nav-arrow">⬅452. </div><div class="doc-navbar-text">Chanel Version 1</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="uncommon_ground.html" title="Making a &quot;by viewpoint&quot; token, allowing us to design our own text variations such as &quot;[show to yourself]quaint[to Lolita]thrilling[to everyone else]squalid[end show]&quot; depending on the identity of the player at the moment."><div class="doc-navbar-text">Uncommon Ground</div><div class="nav-arrow">454.⮕</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="raw" href="../about.html">About this edition</a>&ensp;&bull;&ensp;<a class="raw" href="https://mastodon.gamedev.place/web/@inform7tips">@inform7tips@mastodon.gamedev.place</a></p></div></footer>
</body></html>
