<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 102. Bumping into Walls</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<h1>Bumping into Walls</h1><div class="subheading">Example 102 ★★★</div>
<div class="linkback">
<a href="../WI_7.html#section_13" title="Basic Actions &gt; Going from, going to">WI §7.13 Going from, going to</a><br><a href="../RB_6.html#section_9" title="Commands &gt; Going, Pushing Things in Directions">RB §6.9 Going, Pushing Things in Directions</a>
</div>
<p class="example-desc">Offering the player a list of valid directions if he tries to go in a direction that leads nowhere.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a href="a&e.html" title="Using regions to block access to an entire area when the player does not carry a pass, regardless of which entrance he uses.">101. A&E</a></div><div class="doc-navbar-right"><a href="polarity.html" title="A &quot;go back&quot; command that keeps track of the direction from which the player came, and sends him back.">103. Polarity</a></div></div>
</header>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex102">Play/modify Bumping into Walls in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="BumpingIntoWalls/index.html">Play Bumping into Walls in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Bumping into Walls&quot;\n\n\nDefinition: a direction (called thataway) is viable if the room thataway from the location is a room.\n\n\nInstead of going nowhere:\n\tlet count of exits be the number of viable directions;\n\tif the count of exits is 0, say &quot;You appear to be trapped in here.&quot; instead;\n\tif the count of exits is 1, say &quot;From here, the only way out is [list of viable directions].&quot;;\n\totherwise say &quot;From here, the viable exits are [list of viable directions].&quot;\n\n\nDome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.\n\nThe Crypt is below the dome.\n\nThe church door is east of Eastern End and west of the Courtyard. The church door is a door.\n\nTest me with &quot;u / n / n / e / n / s / u / open door / e / n&quot;.`)">⧉</button><div class="codeline storytitle">&quot;Bumping into Walls&quot;</div>
</div><p>First we add an instruction to determine which ways lead to other rooms.</p>
<div class="codeblock"><div class="codeline">Definition: a direction (called thataway) is viable if the room thataway from the location is a room.</div>
</div><p>Now we build in the instruction for what Inform should say if the player tries to head in a direction that leads nowhere:</p>
<div class="codeblock"><div class="codeline">Instead of going nowhere:</div>
<div class="codeline">&ensp;&ensp;let count of exits be the number of viable directions;</div>
<div class="codeline">&ensp;&ensp;if the count of exits is 0, say &quot;You appear to be trapped in here.&quot; instead;</div>
<div class="codeline">&ensp;&ensp;if the count of exits is 1, say &quot;From here, the only way out is [list of viable directions].&quot;;</div>
<div class="codeline">&ensp;&ensp;otherwise say &quot;From here, the viable exits are [list of viable directions].&quot;</div>
</div><p>There is no theoretical reason why we have to define &quot;count of exits&quot; here: we could, if we wanted, just say &quot;if the number of viable directions is 0&quot;, &quot;if the number of viable directions is 1&quot;, and so on. However, each calculation of a &quot;viable direction&quot; takes a bit of computing power, so there is some slight savings in not requiring the game to count viable directions more than once in this routine.</p>
<div class="codeblock"><div class="codeline">Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The Crypt is below the dome.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The church door is east of Eastern End and west of the Courtyard. The church door is a door.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;u / n / n / e / n / s / u / open door / e / n&quot;.</div>
</div><details class="testme-output"><summary>Test me with "u / n / n / e / n / s / u / open door / e / n".</summary><div class="testme-output">Dome<br><br>&gt;(Testing.)<br><br>&gt;[1] u<br>From here, the viable exits are north, northeast, northwest, south, southeast, southwest, east, west and down.<br><br>&gt;[2] n<br><br>North Chapel<br><br>&gt;[3] n<br>From here, the viable exits are south, east and west.<br><br>&gt;[4] e<br><br>Loud Corner<br><br>&gt;[5] n<br>From here, the viable exits are south, southwest and west.<br><br>&gt;[6] s<br><br>Eastern End<br>You can see a church door here.<br><br>&gt;[7] u<br>From here, the viable exits are north, south, east and west.<br><br>&gt;[8] open door<br>You open the church door.<br><br>&gt;[9] e<br><br>Courtyard<br>You can see a church door here.<br><br>&gt;[10] n<br>From here, the only way out is west.
</div></details><div class="doc-navbar"><div class="doc-navbar-left"><a href="a&e.html" title="Using regions to block access to an entire area when the player does not carry a pass, regardless of which entrance he uses.">101. A&E</a></div><div class="doc-navbar-right"><a href="polarity.html" title="A &quot;go back&quot; command that keeps track of the direction from which the player came, and sends him back.">103. Polarity</a></div></div>
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<footer id="credits-footer"><p><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p>Thanks go to <a href="http://nitku.net/blog/">Juhana Leinonen</a> for <a href="https://borogove.app">Borogove</a>. The playable examples use <a href="https://eblong.com">Andrew Plotkin</a>'s <a href="https://eblong.com/zarf/glk/glkote.html">GlkOte</a> and <a href="https://eblong.com/zarf/glulx/quixe/index.html">Quixe</a>, distributed under an <a href="../mit.html">MIT License.</a></p><p class="about"><a href="../about.html">About this edition</a> &bull; <a href="https://twitter.com/inform7tips">@inform7tips</a></p></footer>
</body></html>
