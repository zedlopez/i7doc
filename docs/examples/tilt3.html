<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 449. Tilt 3</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Tilt 3</h1><div class="subheading">Playing cards with colored unicode suits: Example 449 ★★</div></div></div>
<div class="linkback">
<a href="../WI_27.html#section_7" title="Extensions &gt; Extensions and story file formats">WI §27.7 Extensions and story file formats</a><br><a href="../RB_12.html#section_1" title="Typography, Layout, and Multimedia Effects &gt; Typography">RB §12.1 Typography</a>
</div>
<p class="example-desc">Displaying the card suits from our deck of cards with red and black colored unicode symbols.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="tilt2.html" title="A deck of cards with fully implemented individual cards; when the player has a full poker hand, the inventory listing describes the resulting hand accordingly."><div class="nav-arrow">←406.</div><div class="doc-navbar-text">Tilt 2</div></a></div></div><div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="modern_conveniences.html" title="Exemplifying the kind of source we might use in writing extensions for kitchen and bathroom appliances."><div class="nav-arrow">←448. </div><div class="doc-navbar-text">Modern Conveniences</div></a></div><div class="doc-navbar-right"><a class="nav-el" href="pink_or_blue.html" title="Asking the player to select a gender to begin play."><div class="doc-navbar-text">Pink or Blue</div><div class="nav-arrow">450.→</div></a></div></div>
</header>
<p>Books and articles about card-playing traditionally abbreviate card names into a simple two-symbol notation: a number or letter representing the card rank, followed by a symbol indicating the card suit. Suppose that we want to emulate this notation when taking inventory in our poker game.</p>
<p>The trick here is that colored output is done in different ways by the Z-Machine and by Glulx, so we&#39;ll need two different versions of the same section in order to produce this output. The relevant source is right at the beginning:</p>
<div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Tilt&quot;\n\nSection 0 - Colored Output in Two Forms\n\n\nInclude Unicode Character Names by Graham Nelson.\n\nRule for printing the name of a card (called target) while grouping together:\n\tsay &quot;[rank of the target as abbreviated value][suit of the target as symbol]&quot;.\n\nTo say (current suit - a suit) as symbol:\n\tif current suit is diamonds, say &quot;[red letters][unicode black diamond suit][default letters]&quot;;\n\tif current suit is spades, say &quot;[unicode black spade suit]&quot;;\n\tif current suit is clubs, say &quot;[unicode black club suit]&quot;;\n\tif current suit is hearts, say &quot;[red letters][unicode black heart suit][default letters]&quot;.\n\nSection 0Z (for Z-machine only)\n\n\nInclude Basic Screen Effects by Emily Short.\n\nSection 0G (for Glulx only)\n\n\nInclude Glulx Text Effects by Emily Short.\n\nTable of User Styles (continued)\nstyle name\tglulx color\nspecial-style-1\tg-pure-red\n\nTable of Common Color Values (continued)\nglulx color value\tassigned number\ng-pure-red\t16711680\n\nTo say red letters: say first custom style.\n\nTo say default letters: say roman type.\n\n\nSection 1 - Cards\n\nSuit is a kind of value. The suits are hearts, clubs, diamonds, and spades. Understand &quot;heart&quot; as hearts. Understand &quot;club&quot; as clubs. Understand &quot;diamond&quot; as diamonds. Understand &quot;spade&quot; as spades.\n\nA card is a kind of thing.  A card has a suit. A card has a number called rank. Understand the suit property as describing a card. Understand the rank property as describing a card.\n\n52 cards are in the card repository.\n\nTo say (count - a number) as a card value:\n\tchoose row count in the Table of Value Names;\n\tsay &quot;[term entry]&quot;.\n\nRule for printing the name of a card (called target):\n\tsay &quot;[rank of the target as a card value] of [suit of the target]&quot;\n\nTo say (count - a number) as abbreviated value:\n\tchoose row count in the Table of Value Names;\n\tsay &quot;[abbrev entry]&quot;.\n\nTable of Value Names\nterm\tvalue\tabbrev\ttopic\n&quot;ace&quot;\t&quot;1&quot;\t&quot;A&quot;\t&quot;ace/A&quot;\n&quot;deuce&quot;\t&quot;2&quot;\t&quot;2&quot;\t&quot;deuce/two&quot;\n&quot;three&quot;\t&quot;3&quot;\t&quot;3&quot;\t&quot;three&quot;\n&quot;four&quot;\t&quot;4&quot;\t&quot;4&quot;\t&quot;four&quot;\n&quot;five&quot;\t&quot;5&quot;\t&quot;5&quot;\t&quot;five&quot;\n&quot;six&quot;\t&quot;6&quot;\t&quot;6&quot;\t&quot;six&quot;\n&quot;seven&quot;\t&quot;7&quot;\t&quot;7&quot;\t&quot;seven&quot;\n&quot;eight&quot;\t&quot;8&quot;\t&quot;8&quot;\t&quot;eight&quot;\n&quot;nine&quot;\t&quot;9&quot;\t&quot;9&quot;\t&quot;nine&quot;\n&quot;ten&quot;\t&quot;10&quot;\t&quot;10&quot;\t&quot;ten&quot;\n&quot;jack&quot;\t&quot;11&quot;\t&quot;J&quot;\t&quot;jack/knave/J&quot;\n&quot;queen&quot;\t&quot;12&quot;\t&quot;Q&quot;\t&quot;queen/Q&quot;\n&quot;king&quot;\t&quot;13&quot;\t&quot;K&quot;\t&quot;king/K&quot;\n\nAfter reading a command:\n\tif the player&apos;s command includes &quot;of [suit]&quot;:\n\t\twhile the player&apos;s command includes &quot;of&quot;:\n\t\t\tcut the matched text;\n\trepeat through the Table of Value Names:\n\t\twhile the player&apos;s command includes topic entry:\n\t\t\treplace the matched text with value entry.\n\nWhen play begins:\n\treconstitute deck.\n\nTo reconstitute deck:\n\tlet current suit be hearts;\n\tnow every card is in the card repository;\n\twhile a card is in the card repository:\n\t\trepeat with current rank running from 1 to 13:\n\t\t\tlet item be a random card in card repository;\n\t\t\tnow rank of item is current rank;\n\t\t\tnow suit of item is current suit;\n\t\t\tnow item is in the deck of cards;\n\t\tnow current suit is the suit after the current suit.\n\nSection 2 - The Deck and the Discard Pile\n\nThe Empty Room is a room. &quot;Nothing to see here.&quot;\n\nThe deck of cards is in the Empty Room. It is a closed unopenable container. The description is &quot;A standard poker deck.&quot;\n\nThe discard pile is a closed unopenable container. The description is &quot;Cards in this game are discarded face-down, so the discard pile is not very interesting to see. All you can observe is that it currently contains [if the number of cards which are in the discard pile is less than ten][the number of cards which are in the discard pile in words][otherwise]about [the rounded number of cards which are in the discard pile in words][end if] card[s].&quot;\n\nTo decide what number is the rounded number of (described set - a description of objects):\n\tlet N be the number of members of the described set;\n\tlet R be N divided by 5;\n\tlet total be R times 5;\n\tdecide on total.\n\nRule for printing room description details of something: do nothing instead.\n\nSection 3 - Drawing and Discarding Actions\n\nUnderstand the commands &quot;take&quot; and &quot;carry&quot; and &quot;hold&quot; and &quot;get&quot; and &quot;drop&quot; and &quot;throw&quot; and &quot;discard&quot; as something new.\n\nUnderstand &quot;take [text]&quot; or &quot;get [text]&quot; or &quot;drop [text]&quot; as a mistake (&quot;Here, you only draw and discard. Nothing else matters at the moment.&quot;).\n\nUnderstand &quot;draw&quot; or &quot;draw card&quot; or &quot;draw a card&quot; as drawing. Drawing is an action applying to nothing. The drawing action has an object called the card drawn.\n\nSetting action variables for drawing:\n\tnow the card drawn is a random card which is in the deck of cards.\n\nCheck drawing:\n\tif the card drawn is nothing, say &quot;The deck is completely depleted.&quot; instead.\n\nCheck drawing:\n\tif the number of cards carried by the player is greater than four,\n\t\tsay &quot;This is a five-card game; you must discard something before drawing anything further.&quot; instead.\n\nCarry out drawing:\n\tmove the card drawn to the player.\n\nReport drawing:\n\tsay &quot;You draw [a card drawn].&quot;\n\n\nUnderstand &quot;discard [card]&quot; as discarding. Discarding is an action applying to one thing.\n\nCheck discarding:\n\tif the player does not carry the noun, say &quot;You can only discard cards from your own hand.&quot; instead.\n\nCarry out discarding:\n\tnow the noun is in the discard pile;\n\tif the discard pile is not visible, move the discard pile to the location.\n\nReport discarding:\n\tsay &quot;You toss [the noun] nonchalantly onto the discard pile.&quot;\n\nSection 4 - Assessing Hands\n\nBefore listing contents while taking inventory: group cards together.\n\nBefore grouping together cards:\n\tif the number of cards carried by the player is 5:\n\t\tsay &quot;[run paragraph on]&quot;;\n\t\tfollow the hand-ranking rules;\n\t\tif the rule succeeded, say &quot;[the outcome of the rulebook]&quot;;\n\t\totherwise say &quot;some random cards&quot;;\n\t\tif the outcome of the rulebook is pair outcome, say &quot; of [rank of the first thing held by the player as a card value]s&quot;;\n\totherwise:\n\t\tsay &quot;[number of cards carried by the player in words] assorted cards&quot;;\n\tsay &quot; (&quot;.\n\nRule for grouping together cards:\n\tsay &quot;[list hand]&quot;.\n\nTo say list hand:\n\tlet chosen card be the first thing held by the player;\n\twhile chosen card is a card:\n\t\tsay &quot;[chosen card]&quot;;\n\t\tnow chosen card is the next thing held after chosen card;\n\t\tif chosen card is a card, say &quot;-&quot;.\n\nAfter grouping together cards:\n\tsay &quot;)&quot;.\n\nThe hand-ranking rules is a rulebook. The hand-ranking rules have outcomes royal flush, straight flush, four of a kind, full house, flush, straight, three of a kind, two pairs, pair, high card.\n\nThe hand-ranking rulebook has a truth state called the flushness.\nThe hand-ranking rulebook has a truth state called the straightness.\n\nThe hand-ranking rulebook has a number called the pair count.\nThe hand-ranking rulebook has a number called the triple count.\nThe hand-ranking rulebook has a number called the quadruple count.\n\nA card can be sorted or unsorted. A card is usually unsorted.\n\nDefinition: a card is high if its rank is 11 or more.\nDefinition: a card is low if its rank is 4 or less.\n\nA hand-ranking rule (this is the initial sort rule):\n\tnow every card is unsorted;\n\twhile the player carries an unsorted card:\n\t\tlet item be the lowest unsorted card held by the player;\n\t\tmove item to the player;\n\t\tnow the item is sorted;\n\tif sort-debugging is true, say &quot;-- after initial sort: [list hand]&quot;.\n\nA hand-ranking rule (this is the finding flushness rule):\n\tlet called suit be the suit of a random card carried by the player;\n\tif every card carried by the player is called suit, now flushness is true.\n\nA hand-ranking rule (this is the finding straightness rule):\n\tnow straightness is true;\n\tlet N be the rank of the highest card which is carried by the player;\n\trepeat with current rank running from N - 4 to N:\n\t\tnow the test rank is the current rank;\n\t\tunless the player carries a matching card:\n\t\t\tif the current rank is N - 4 and the current rank is 9 and the player carries an ace card, do nothing;\n\t\t\totherwise now straightness is false.\n\nA card can be quadrupled, tripled, paired or uncombined.\n\nTest rank is a number that varies. Definition: a card is matching if its rank is the test rank.\n\nA hand-ranking rule (this is the counting multiples rule):\n\tnow every card is uncombined;\n\trepeat with current rank running from 1 to 13:\n\t\tnow test rank is current rank;\n\t\tlet N be the number of matching cards held by the player;\n\t\tif N is 4:\n\t\t\tincrement the quadruple count;\n\t\t\tnow every matching card held by the player is quadrupled;\n\t\tif N is 3:\n\t\t\tincrement the triple count;\n\t\t\tnow every matching card held by the player is tripled;\n\t\tif N is 2:\n\t\t\tincrement the pair count;\n\t\t\tnow every matching card held by the player is paired.\n\nA hand-ranking rule (this is the move aces up unless there&apos;s a low straight rule):\n\tunless the straightness is true and the lowest card carried by the player is an ace card and the rank of the highest card carried by the player is 5,\n\t\tnow every ace card which is carried by the player is carried by the player;\n\tif sort-debugging is true, say &quot;-- after ace movement rule: [list hand]&quot;.\n\nA hand-ranking rule (this is the move pairs forward rule):\n\twhile the player carries a paired card:\n\t\tlet selection be the lowest paired card which is carried by the player;\n\t\tmove the selection to the player;\n\t\tnow the selection is uncombined;\n\tif sort-debugging is true, say &quot;-- after pairs movement: [list hand]&quot;.\n\nA hand-ranking rule (this is the raise ace pairs rule):\n\tif the player carries exactly two ace cards:\n\t\trepeat with item running through ace cards which are carried by the player:\n\t\t\tmove item to the player;\n\tif sort-debugging is true, say &quot;-- after paired-ace movement: [list hand]&quot;.\n\nA hand-ranking rule (this is the move multiples forward rule):\n\twhile the player carries a tripled card:\n\t\tlet selection be the lowest tripled card which is carried by the player;\n\t\tmove the selection to the player;\n\t\tnow the selection is uncombined;\n\twhile the player carries a quadrupled card:\n\t\tlet selection be the lowest quadrupled card which is carried by the player;\n\t\tmove the selection to the player;\n\t\tnow the selection is uncombined;\n\tif sort-debugging is true, say &quot;-- after multiples movement rule: [list hand]&quot;.\n\nDefinition: a card is ace if its rank is 1.\nDefinition: a card is king if its rank is 13.\n\nA hand-ranking rule (this is the royal-flush rule):\n\tif flushness is true and straightness is true and the highest card carried by the player is king and the lowest card carried by the player is ace, royal flush.\n\nA hand-ranking rule (this is the straight-flushes rule):\n\tif flushness is true and straightness is true, straight flush.\n\nA hand-ranking rule (this is the four-of-a-kind rule):\n\tif the quadruple count is 1, four of a kind.\n\nA hand-ranking rule (this is the full-house rule):\n\tif the pair count is 1 and the triple count is 1, full house.\n\nA hand-ranking rule (this is the flushes rule):\n\tif flushness is true, flush.\n\nA hand-ranking rule (this is the straights rule):\n\tif straightness is true, straight.\n\nA hand-ranking rule (this is the three-of-a-kind rule):\n\tif triple count is 1, three of a kind.\n\nA hand-ranking rule (this is the two-pair rule):\n\tif the pair count is 2, two pairs.\n\nA hand-ranking rule (this is the pair rule):\n\tif the pair count is 1, pair.\n\nA hand-ranking rule (this is the default rule):\n\thigh card.\n\nSort-debugging is a truth state that varies.\n\nSection 5 - Testing hand identification - Not for release\n\nUnderstand &quot;debug sorting&quot; as debugging hand sorting. Debugging hand sorting is an action out of world.\n\nCarry out debugging hand sorting:\n\tif sort-debugging is false, now sort-debugging is true;\n\totherwise now sort-debugging is false.\n\nReport debugging hand sorting:\n\tsay &quot;Sort debugging is now [if sort-debugging is true]on[otherwise]off[end if].&quot;\n\nTest me with &quot;draw / g / g / g / g / force hand / g / g / g / g / g / g / g / g / g / g / g / g&quot;.\n\nTable of Testing Hands\nset suit\tset rank\nspades\t1\t[royal flush]\nspades\t13\nspades\t12\nspades\t11\nspades\t10\nclubs\t12\t[straight flush]\nclubs\t11\nclubs\t10\nclubs\t9\nclubs\t8\ndiamonds\t8\t[four of a kind]\nhearts\t8\nspades\t8\nclubs\t8\nclubs\t3\nclubs\t1\t[full house]\nspades\t1\nhearts\t10\nspades\t10\nclubs\t10\nhearts\t2\t[flush]\nhearts\t5\nhearts\t7\nhearts\t11\nhearts\t12\nhearts\t1\t[straight]\nspades\t13\ndiamonds\t12\nclubs\t11\nhearts\t10\nhearts\t2\t[three of a kind]\nspades\t2\nclubs\t2\nclubs\t4\nspades\t3\ndiamonds\t6\t[two pairs]\nspades\t6\nclubs\t7\ndiamonds\t7\nhearts\t9\ndiamonds\t6\t[two pairs, ace high]\nspades\t6\nclubs\t1\ndiamonds\t7\nhearts\t1\nhearts\t12\t[pair]\nspades\t12\ndiamonds\t10\nspades\t7\nclubs\t4\ndiamonds\t13\t[high]\nhearts\t11\nspades\t9\nclubs\t7\ndiamonds\t5\nhearts\t1\t[tricky sorting: low straight]\ndiamonds\t2\nspades\t3\ndiamonds\t4\ndiamonds\t5\n\nUnderstand &quot;force hand&quot; as forcing a hand. Forcing a hand is an action out of world.\n\nCurrent marker is a number that varies.\n\nCarry out forcing a hand:\n\trepeat with item running through cards which are carried by the player:\n\t\tincrement current marker;\n\t\tif current marker is greater than the number of filled rows in the Table of Testing Hands, now current marker is 1;\n\t\tchoose row current marker in the Table of Testing Hands;\n\t\tnow the suit of item is the set suit entry;\n\t\tnow the rank of item is the set rank entry.\n\nReport forcing a hand:\n\ttry taking inventory.`)">⧉</button><div class="codeline storytitle">&quot;Tilt&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline i7header">Section 0 - Colored Output in Two Forms</div></div><p>For the suit symbols, we&#39;ll want the Unicode extension included with Inform:</p>
<div class="codeblock"><div class="codeline">Include Unicode Character Names by Graham Nelson.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for printing the name of a card (called target) while grouping together:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[rank of the target as abbreviated value][suit of the target as symbol]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">To say (current suit - a suit) as symbol:</div>
<div class="codeline">&ensp;&ensp;&ensp;if current suit is diamonds, say &quot;[red letters][unicode black diamond suit][default letters]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;if current suit is spades, say &quot;[unicode black spade suit]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;if current suit is clubs, say &quot;[unicode black club suit]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;if current suit is hearts, say &quot;[red letters][unicode black heart suit][default letters]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline i7header">Section 0Z (for Z-machine only)</div></div><p>The Basic Screen Effects extension bundled with Inform includes mechanisms to change the text color, so for the Z-machine, we need only include this:</p>
<div class="codeblock"><div class="codeline">Include Basic Screen Effects by Emily Short.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline i7header">Section 0G (for Glulx only)</div></div><p>Under Glulx, we need slightly more set-up: Glulx requires that we define special user font styles when we plan to make display changes. A fuller discussion of this (and of how to define new colors) appears in the documentation of &quot;Glulx Text Effects&quot;, but an implementation sufficient to our purposes would be</p>
<div class="codeblock"><div class="codeline">Include Glulx Text Effects by Emily Short.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline tablename">Table of User Styles (continued)</div><table>
<tr><td>style name</td><td>glulx color</td></tr><tr><td>special-style-1</td><td>g-pure-red</td></tr></table>
<div class="codeline tablename">Table of Common Color Values (continued)</div><table>
<tr><td>glulx color value</td><td>assigned number</td></tr><tr><td>g-pure-red</td><td>16711680</td></tr></table>
<div class="codeline">To say red letters: say first custom style.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">To say default letters: say roman type.</div>
</div><p>From here, the rest of the source is mostly as we&#39;ve seen in previous examples:</p>
<div class="codeblock"><div class="codeline i7header">Section 1 - Cards</div><div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Suit is a kind of value. The suits are hearts, clubs, diamonds, and spades. Understand &quot;heart&quot; as hearts. Understand &quot;club&quot; as clubs. Understand &quot;diamond&quot; as diamonds. Understand &quot;spade&quot; as spades.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A card is a kind of thing.  A card has a suit. A card has a number called rank. Understand the suit property as describing a card. Understand the rank property as describing a card.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">52 cards are in the card repository.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">To say (count - a number) as a card value:</div>
<div class="codeline">&ensp;&ensp;&ensp;choose row count in the Table of Value Names;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[term entry]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for printing the name of a card (called target):</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[rank of the target as a card value] of [suit of the target]&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">To say (count - a number) as abbreviated value:</div>
<div class="codeline">&ensp;&ensp;&ensp;choose row count in the Table of Value Names;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[abbrev entry]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline tablename">Table of Value Names</div><table>
<tr><td>term</td><td>value</td><td>abbrev</td><td>topic</td></tr><tr><td>&quot;ace&quot;</td><td>&quot;1&quot;</td><td>&quot;A&quot;</td><td>&quot;ace/A&quot;</td></tr><tr><td>&quot;deuce&quot;</td><td>&quot;2&quot;</td><td>&quot;2&quot;</td><td>&quot;deuce/two&quot;</td></tr><tr><td>&quot;three&quot;</td><td>&quot;3&quot;</td><td>&quot;3&quot;</td><td>&quot;three&quot;</td></tr><tr><td>&quot;four&quot;</td><td>&quot;4&quot;</td><td>&quot;4&quot;</td><td>&quot;four&quot;</td></tr><tr><td>&quot;five&quot;</td><td>&quot;5&quot;</td><td>&quot;5&quot;</td><td>&quot;five&quot;</td></tr><tr><td>&quot;six&quot;</td><td>&quot;6&quot;</td><td>&quot;6&quot;</td><td>&quot;six&quot;</td></tr><tr><td>&quot;seven&quot;</td><td>&quot;7&quot;</td><td>&quot;7&quot;</td><td>&quot;seven&quot;</td></tr><tr><td>&quot;eight&quot;</td><td>&quot;8&quot;</td><td>&quot;8&quot;</td><td>&quot;eight&quot;</td></tr><tr><td>&quot;nine&quot;</td><td>&quot;9&quot;</td><td>&quot;9&quot;</td><td>&quot;nine&quot;</td></tr><tr><td>&quot;ten&quot;</td><td>&quot;10&quot;</td><td>&quot;10&quot;</td><td>&quot;ten&quot;</td></tr><tr><td>&quot;jack&quot;</td><td>&quot;11&quot;</td><td>&quot;J&quot;</td><td>&quot;jack/knave/J&quot;</td></tr><tr><td>&quot;queen&quot;</td><td>&quot;12&quot;</td><td>&quot;Q&quot;</td><td>&quot;queen/Q&quot;</td></tr><tr><td>&quot;king&quot;</td><td>&quot;13&quot;</td><td>&quot;K&quot;</td><td>&quot;king/K&quot;</td></tr></table>
<div class="codeline">After reading a command:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the player&#39;s command includes &quot;of [suit]&quot;:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;while the player&#39;s command includes &quot;of&quot;:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;cut the matched text;</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat through the Table of Value Names:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;while the player&#39;s command includes topic entry:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;replace the matched text with value entry.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">When play begins:</div>
<div class="codeline">&ensp;&ensp;&ensp;reconstitute deck.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">To reconstitute deck:</div>
<div class="codeline">&ensp;&ensp;&ensp;let current suit be hearts;</div>
<div class="codeline">&ensp;&ensp;&ensp;now every card is in the card repository;</div>
<div class="codeline">&ensp;&ensp;&ensp;while a card is in the card repository:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;repeat with current rank running from 1 to 13:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let item be a random card in card repository;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now rank of item is current rank;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now suit of item is current suit;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now item is in the deck of cards;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now current suit is the suit after the current suit.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline i7header">Section 2 - The Deck and the Discard Pile</div><div class="codeline">The Empty Room is a room. &quot;Nothing to see here.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The deck of cards is in the Empty Room. It is a closed unopenable container. The description is &quot;A standard poker deck.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The discard pile is a closed unopenable container. The description is &quot;Cards in this game are discarded face-down, so the discard pile is not very interesting to see. All you can observe is that it currently contains [if the number of cards which are in the discard pile is less than ten][the number of cards which are in the discard pile in words][otherwise]about [the rounded number of cards which are in the discard pile in words][end if] card[s].&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">To decide what number is the rounded number of (described set - a description of objects):</div>
<div class="codeline">&ensp;&ensp;&ensp;let N be the number of members of the described set;</div>
<div class="codeline">&ensp;&ensp;&ensp;let R be N divided by 5;</div>
<div class="codeline">&ensp;&ensp;&ensp;let total be R times 5;</div>
<div class="codeline">&ensp;&ensp;&ensp;decide on total.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for printing room description details of something: do nothing instead.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline i7header">Section 3 - Drawing and Discarding Actions</div><div class="codeline">Understand the commands &quot;take&quot; and &quot;carry&quot; and &quot;hold&quot; and &quot;get&quot; and &quot;drop&quot; and &quot;throw&quot; and &quot;discard&quot; as something new.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Understand &quot;take [text]&quot; or &quot;get [text]&quot; or &quot;drop [text]&quot; as a mistake (&quot;Here, you only draw and discard. Nothing else matters at the moment.&quot;).</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Understand &quot;draw&quot; or &quot;draw card&quot; or &quot;draw a card&quot; as drawing. Drawing is an action applying to nothing. The drawing action has an object called the card drawn.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Setting action variables for drawing:</div>
<div class="codeline">&ensp;&ensp;&ensp;now the card drawn is a random card which is in the deck of cards.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Check drawing:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the card drawn is nothing, say &quot;The deck is completely depleted.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Check drawing:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the number of cards carried by the player is greater than four,</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;This is a five-card game; you must discard something before drawing anything further.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Carry out drawing:</div>
<div class="codeline">&ensp;&ensp;&ensp;move the card drawn to the player.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Report drawing:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;You draw [a card drawn].&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Understand &quot;discard [card]&quot; as discarding. Discarding is an action applying to one thing.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Check discarding:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the player does not carry the noun, say &quot;You can only discard cards from your own hand.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Carry out discarding:</div>
<div class="codeline">&ensp;&ensp;&ensp;now the noun is in the discard pile;</div>
<div class="codeline">&ensp;&ensp;&ensp;if the discard pile is not visible, move the discard pile to the location.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Report discarding:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;You toss [the noun] nonchalantly onto the discard pile.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline i7header">Section 4 - Assessing Hands</div><div class="codeline">Before listing contents while taking inventory: group cards together.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Before grouping together cards:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the number of cards carried by the player is 5:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[run paragraph on]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;follow the hand-ranking rules;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the rule succeeded, say &quot;[the outcome of the rulebook]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;otherwise say &quot;some random cards&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the outcome of the rulebook is pair outcome, say &quot; of [rank of the first thing held by the player as a card value]s&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[number of cards carried by the player in words] assorted cards&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot; (&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Rule for grouping together cards:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;[list hand]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">To say list hand:</div>
<div class="codeline">&ensp;&ensp;&ensp;let chosen card be the first thing held by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;while chosen card is a card:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;[chosen card]&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now chosen card is the next thing held after chosen card;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if chosen card is a card, say &quot;-&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">After grouping together cards:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;)&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The hand-ranking rules is a rulebook. The hand-ranking rules have outcomes royal flush, straight flush, four of a kind, full house, flush, straight, three of a kind, two pairs, pair, high card.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The hand-ranking rulebook has a truth state called the flushness.</div>
<div class="codeline">The hand-ranking rulebook has a truth state called the straightness.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The hand-ranking rulebook has a number called the pair count.</div>
<div class="codeline">The hand-ranking rulebook has a number called the triple count.</div>
<div class="codeline">The hand-ranking rulebook has a number called the quadruple count.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A card can be sorted or unsorted. A card is usually unsorted.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Definition: a card is high if its rank is 11 or more.</div>
<div class="codeline">Definition: a card is low if its rank is 4 or less.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the initial sort rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;now every card is unsorted;</div>
<div class="codeline">&ensp;&ensp;&ensp;while the player carries an unsorted card:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let item be the lowest unsorted card held by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move item to the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the item is sorted;</div>
<div class="codeline">&ensp;&ensp;&ensp;if sort-debugging is true, say &quot;-- after initial sort: [list hand]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the finding flushness rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;let called suit be the suit of a random card carried by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;if every card carried by the player is called suit, now flushness is true.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the finding straightness rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;now straightness is true;</div>
<div class="codeline">&ensp;&ensp;&ensp;let N be the rank of the highest card which is carried by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat with current rank running from N - 4 to N:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the test rank is the current rank;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;unless the player carries a matching card:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the current rank is N - 4 and the current rank is 9 and the player carries an ace card, do nothing;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;otherwise now straightness is false.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A card can be quadrupled, tripled, paired or uncombined.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Test rank is a number that varies. Definition: a card is matching if its rank is the test rank.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the counting multiples rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;now every card is uncombined;</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat with current rank running from 1 to 13:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now test rank is current rank;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let N be the number of matching cards held by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if N is 4:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;increment the quadruple count;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now every matching card held by the player is quadrupled;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if N is 3:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;increment the triple count;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now every matching card held by the player is tripled;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if N is 2:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;increment the pair count;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now every matching card held by the player is paired.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the move aces up unless there&#39;s a low straight rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;unless the straightness is true and the lowest card carried by the player is an ace card and the rank of the highest card carried by the player is 5,</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now every ace card which is carried by the player is carried by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;if sort-debugging is true, say &quot;-- after ace movement rule: [list hand]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the move pairs forward rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;while the player carries a paired card:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let selection be the lowest paired card which is carried by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move the selection to the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the selection is uncombined;</div>
<div class="codeline">&ensp;&ensp;&ensp;if sort-debugging is true, say &quot;-- after pairs movement: [list hand]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the raise ace pairs rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if the player carries exactly two ace cards:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;repeat with item running through ace cards which are carried by the player:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move item to the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;if sort-debugging is true, say &quot;-- after paired-ace movement: [list hand]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the move multiples forward rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;while the player carries a tripled card:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let selection be the lowest tripled card which is carried by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move the selection to the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the selection is uncombined;</div>
<div class="codeline">&ensp;&ensp;&ensp;while the player carries a quadrupled card:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;let selection be the lowest quadrupled card which is carried by the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;move the selection to the player;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the selection is uncombined;</div>
<div class="codeline">&ensp;&ensp;&ensp;if sort-debugging is true, say &quot;-- after multiples movement rule: [list hand]&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Definition: a card is ace if its rank is 1.</div>
<div class="codeline">Definition: a card is king if its rank is 13.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the royal-flush rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if flushness is true and straightness is true and the highest card carried by the player is king and the lowest card carried by the player is ace, royal flush.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the straight-flushes rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if flushness is true and straightness is true, straight flush.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the four-of-a-kind rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if the quadruple count is 1, four of a kind.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the full-house rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if the pair count is 1 and the triple count is 1, full house.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the flushes rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if flushness is true, flush.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the straights rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if straightness is true, straight.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the three-of-a-kind rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if triple count is 1, three of a kind.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the two-pair rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if the pair count is 2, two pairs.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the pair rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;if the pair count is 1, pair.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A hand-ranking rule (this is the default rule):</div>
<div class="codeline">&ensp;&ensp;&ensp;high card.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Sort-debugging is a truth state that varies.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline i7header">Section 5 - Testing hand identification - Not for release</div><div class="codeline">Understand &quot;debug sorting&quot; as debugging hand sorting. Debugging hand sorting is an action out of world.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Carry out debugging hand sorting:</div>
<div class="codeline">&ensp;&ensp;&ensp;if sort-debugging is false, now sort-debugging is true;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise now sort-debugging is false.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Report debugging hand sorting:</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;Sort debugging is now [if sort-debugging is true]on[otherwise]off[end if].&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;draw / g / g / g / g / force hand / g / g / g / g / g / g / g / g / g / g / g / g&quot;.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline tablename">Table of Testing Hands</div><table>
<tr><td>set suit</td><td>set rank</td><td> </td></tr><tr><td>spades</td><td>1</td><td>[royal flush]</td></tr><tr><td>spades</td><td>13</td><td> </td></tr><tr><td>spades</td><td>12</td><td> </td></tr><tr><td>spades</td><td>11</td><td> </td></tr><tr><td>spades</td><td>10</td><td> </td></tr><tr><td>clubs</td><td>12</td><td>[straight flush]</td></tr><tr><td>clubs</td><td>11</td><td> </td></tr><tr><td>clubs</td><td>10</td><td> </td></tr><tr><td>clubs</td><td>9</td><td> </td></tr><tr><td>clubs</td><td>8</td><td> </td></tr><tr><td>diamonds</td><td>8</td><td>[four of a kind]</td></tr><tr><td>hearts</td><td>8</td><td> </td></tr><tr><td>spades</td><td>8</td><td> </td></tr><tr><td>clubs</td><td>8</td><td> </td></tr><tr><td>clubs</td><td>3</td><td> </td></tr><tr><td>clubs</td><td>1</td><td>[full house]</td></tr><tr><td>spades</td><td>1</td><td> </td></tr><tr><td>hearts</td><td>10</td><td> </td></tr><tr><td>spades</td><td>10</td><td> </td></tr><tr><td>clubs</td><td>10</td><td> </td></tr><tr><td>hearts</td><td>2</td><td>[flush]</td></tr><tr><td>hearts</td><td>5</td><td> </td></tr><tr><td>hearts</td><td>7</td><td> </td></tr><tr><td>hearts</td><td>11</td><td> </td></tr><tr><td>hearts</td><td>12</td><td> </td></tr><tr><td>hearts</td><td>1</td><td>[straight]</td></tr><tr><td>spades</td><td>13</td><td> </td></tr><tr><td>diamonds</td><td>12</td><td> </td></tr><tr><td>clubs</td><td>11</td><td> </td></tr><tr><td>hearts</td><td>10</td><td> </td></tr><tr><td>hearts</td><td>2</td><td>[three of a kind]</td></tr><tr><td>spades</td><td>2</td><td> </td></tr><tr><td>clubs</td><td>2</td><td> </td></tr><tr><td>clubs</td><td>4</td><td> </td></tr><tr><td>spades</td><td>3</td><td> </td></tr><tr><td>diamonds</td><td>6</td><td>[two pairs]</td></tr><tr><td>spades</td><td>6</td><td> </td></tr><tr><td>clubs</td><td>7</td><td> </td></tr><tr><td>diamonds</td><td>7</td><td> </td></tr><tr><td>hearts</td><td>9</td><td> </td></tr><tr><td>diamonds</td><td>6</td><td>[two pairs, ace high]</td></tr><tr><td>spades</td><td>6</td><td> </td></tr><tr><td>clubs</td><td>1</td><td> </td></tr><tr><td>diamonds</td><td>7</td><td> </td></tr><tr><td>hearts</td><td>1</td><td> </td></tr><tr><td>hearts</td><td>12</td><td>[pair]</td></tr><tr><td>spades</td><td>12</td><td> </td></tr><tr><td>diamonds</td><td>10</td><td> </td></tr><tr><td>spades</td><td>7</td><td> </td></tr><tr><td>clubs</td><td>4</td><td> </td></tr><tr><td>diamonds</td><td>13</td><td>[high]</td></tr><tr><td>hearts</td><td>11</td><td> </td></tr><tr><td>spades</td><td>9</td><td> </td></tr><tr><td>clubs</td><td>7</td><td> </td></tr><tr><td>diamonds</td><td>5</td><td> </td></tr><tr><td>hearts</td><td>1</td><td>[tricky sorting: low straight]</td></tr><tr><td>diamonds</td><td>2</td><td> </td></tr><tr><td>spades</td><td>3</td><td> </td></tr><tr><td>diamonds</td><td>4</td><td> </td></tr><tr><td>diamonds</td><td>5</td><td> </td></tr></table>
<div class="codeline">Understand &quot;force hand&quot; as forcing a hand. Forcing a hand is an action out of world.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Current marker is a number that varies.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Carry out forcing a hand:</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat with item running through cards which are carried by the player:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;increment current marker;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if current marker is greater than the number of filled rows in the Table of Testing Hands, now current marker is 1;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;choose row current marker in the Table of Testing Hands;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the suit of item is the set suit entry;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the rank of item is the set rank entry.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Report forcing a hand:</div>
<div class="codeline">&ensp;&ensp;&ensp;try taking inventory.</div>
</div><div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="tilt2.html" title="A deck of cards with fully implemented individual cards; when the player has a full poker hand, the inventory listing describes the resulting hand accordingly."><div class="nav-arrow">←406.</div><div class="doc-navbar-text">Tilt 2</div></a></div></div><div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="modern_conveniences.html" title="Exemplifying the kind of source we might use in writing extensions for kitchen and bathroom appliances."><div class="nav-arrow">←448. </div><div class="doc-navbar-text">Modern Conveniences</div></a></div><div class="doc-navbar-right"><a class="nav-el" href="pink_or_blue.html" title="Asking the player to select a gender to begin play."><div class="doc-navbar-text">Pink or Blue</div><div class="nav-arrow">450.→</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="nav-about" href="../about.html">About this edition</a> &bull; <a class="nav-about" href="https://twitter.com/inform7tips">@inform7tips</a></p></div></footer>
</body></html>
