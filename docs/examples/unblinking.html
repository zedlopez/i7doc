<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 81. Unblinking</title>
<script src="../i7doc.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,375;0,400;0,500;0,700;1,375;1,400;1,500;1,700&family=Source+Sans+Pro:ital,wght@0,350;0,400;0,550;0,700;1,350;1,400;1,550;1,700&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="../i7doc.css">
</head>
<body><main>
<header class="example-header">
<nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Unblinking</h1><div class="subheading"><wbr><div class="ex-no">Example 81</div> ★★★</div></div>
<div class="doc-navbar example-linkback"><div class="doc-navbar-left"><a class="raw nav-el" href="../WI_6.html#section_14" title="Descriptions &gt; Adjacent rooms and routes through the map"><div class="nav-arrow"><span class="sc">wi</span>&nbsp;6.14</div><div class="doc-navbar-text">Adjacent rooms and routes through the map</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="../RB_3.html#section_7" title="Place &gt; Lighting"><div class="doc-navbar-text">Lighting</div><div class="nav-arrow"><span class="sc">rb</span>&nbsp;3.7</div></a></div></div>
</div>
<div class="example-meta-desc"><p>Finding a best route through light-filled rooms only, leaving aside any that might be dark.</p></div>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="view_of_green_hills.html" title="A LOOK [direction] command which allows the player to see descriptions of the nearby landscape."><div class="nav-arrow">⬅80. </div><div class="doc-navbar-text">A View of Green Hills</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="revenge_of_the_fussy_table.html" title="A small game about resentful furniture and inconvenient objects."><div class="doc-navbar-text">Revenge of the Fussy Table</div><div class="nav-arrow">82.⮕</div></a></div></div>
</header>
<div class="example-body"><p>Suppose we&#39;re simulating a situation where the player needs to travel through lit areas only, but we want to give him some hints about which way might be safe. Here we&#39;ll find our best route through light-filled rooms.</p>
<p>The slightly tricky part is that it&#39;s not necessarily easy to tell whether a room has a lamp in it. We may say &quot;if the Crypt is lighted&quot;, but that only tells us whether it has been declared to be inherently lighted or dark, not whether it happens to contain a light source that the player would be able to see if he went in.</p>
<p>The easiest way to get around this is to create an object -- the light-meter; place it in the target location; and check whether it &quot;can see&quot; a lit object. This preserves all the usual rules about open and closed containers, transparency, etc.</p>
<div class="play-example borogove"><a class="raw" href="https://snippets.borogove.app/inform7/v10ex81">Play/modify in Borogove</a></div>
<div class="play-example quixe"><a class="raw" href="Unblinking/index.html">Play in Quixe</a></div>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Unblinking&quot;\n\nSection 1 - Procedure\n\nThe light-meter is a privately-named scenery thing.\n\nDefinition: a room (called the target room) is light-filled:\n\tif the target room is lighted:\n\t\tyes;\n\tmove the light-meter to the target room;\n\tlet the answer be false;\n\tif the light-meter can see a lit thing:\n\t\tnow the answer is true;\n\tnow the light-meter is nowhere;\n\tdecide on the answer.\n\n\nSection 2 - Scenario\n\nThe Tomb of Angels is a room. &quot;This ancient underground tomb is lightless but for a few shafts from the surface. Everywhere in the shadows are carved angels, their faces worn away by water and pollution, their wings little more than nubs.&quot;\n\nThe Upward Path is above the Tomb of Angels. It is dark. &quot;The staircase switches back on itself many times as it ascends towards the Crash Site.&quot;\n\nA container called the sarcophagus is in the Upward Path. It is closed and openable. &quot;A sarcophagus rests in the niche here, [if open]the lid pushed aside[otherwise]the lid firmly in place[end if].&quot;\n\nThe Crash Site is above the Upward Path. &quot;The ceiling has wholly caved in here, and the belly of the spaceship above you is visible -- including the escape hatch.&quot;\n\nA candle is a kind of thing. A candle is usually lit. The player carries four candles.\n\nAfter looking when the location is not the Crash Site:\n\tif the best route from the location to the Crash Site through light-filled rooms is a direction (called next way):\n\t\tsay &quot;It looks like there&apos;s a safe, lit path [if the number of moves from the location to the Crash Site through light-filled rooms is 1]straight[otherwise]if you go[end if] [next way].&quot;;\n\totherwise:\n\t\tsay &quot;It looks like there is no fully lit path from here to the Crash Site.&quot;\n\nTest me with &quot;up / drop candle / down / up / take the candle / open sarcophagus / put candle in sarcophagus / down / up / close sarcophagus / d&quot;.`)"><span class="sym">⧉</span></button><div class="codeline storytitle">&quot;Unblinking&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline i7header">Section 1 - Procedure</div><div class="codeline blankline">&thinsp;</div>
<div class="codeline">The light-meter is a privately-named scenery thing.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Definition: a room (called the target room) is light-filled:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the target room is lighted:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;yes;</div>
<div class="codeline">&ensp;&ensp;&ensp;move the light-meter to the target room;</div>
<div class="codeline">&ensp;&ensp;&ensp;let the answer be false;</div>
<div class="codeline">&ensp;&ensp;&ensp;if the light-meter can see a lit thing:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the answer is true;</div>
<div class="codeline">&ensp;&ensp;&ensp;now the light-meter is nowhere;</div>
<div class="codeline">&ensp;&ensp;&ensp;decide on the answer.</div>
</div><p>That done, we&#39;re free to use our best-route phrases to choose a particular route.</p>
<div class="codeblock"><div class="codeline i7header">Section 2 - Scenario</div><div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Tomb of Angels is a room. &quot;This ancient underground tomb is lightless but for a few shafts from the surface. Everywhere in the shadows are carved angels, their faces worn away by water and pollution, their wings little more than nubs.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Upward Path is above the Tomb of Angels. It is dark. &quot;The staircase switches back on itself many times as it ascends towards the Crash Site.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">A container called the sarcophagus is in the Upward Path. It is closed and openable. &quot;A sarcophagus rests in the niche here, [if open]the lid pushed aside[otherwise]the lid firmly in place[end if].&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The Crash Site is above the Upward Path. &quot;The ceiling has wholly caved in here, and the belly of the spaceship above you is visible -- including the escape hatch.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">A candle is a kind of thing. A candle is usually lit. The player carries four candles.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">After looking when the location is not the Crash Site:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the best route from the location to the Crash Site through light-filled rooms is a direction (called next way):</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;It looks like there&#39;s a safe, lit path [if the number of moves from the location to the Crash Site through light-filled rooms is 1]straight[otherwise]if you go[end if] [next way].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;otherwise:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;say &quot;It looks like there is no fully lit path from here to the Crash Site.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Test me with &quot;up / drop candle / down / up / take the candle / open sarcophagus / put candle in sarcophagus / down / up / close sarcophagus / d&quot;.</div>
</div><details class="testme-output"><summary><div class="summation">Test me with "up / drop candle / down / up / take the candle / open sarcophagus / put candle in sarcophagus / down / up / close sarcophagus / d".</div></summary><div class="testme-output">Tomb of Angels<br>This ancient underground tomb is lightless but for a few shafts from the surface. Everywhere in the shadows are carved angels, their faces worn away by water and pollution, their wings little more than nubs.<br><br>It looks like there is no fully lit path from here to the Crash Site.<br><br><span class="mono">&gt;(Testing.)</span><br><br><span class="mono">&gt;[1] up</span><br><br>Upward Path<br>The staircase switches back on itself many times as it ascends towards the Crash Site.<br><br>A sarcophagus rests in the niche here, the lid firmly in place.<br><br>It looks like there&#39;s a safe, lit path straight up.<br><br><span class="mono">&gt;[2] drop candle</span><br>Dropped.<br><br><span class="mono">&gt;[3] down</span><br><br>Tomb of Angels<br>This ancient underground tomb is lightless but for a few shafts from the surface. Everywhere in the shadows are carved angels, their faces worn away by water and pollution, their wings little more than nubs.<br><br>It looks like there&#39;s a safe, lit path if you go up.<br><br><span class="mono">&gt;[4] up</span><br><br>Upward Path<br>The staircase switches back on itself many times as it ascends towards the Crash Site.<br><br>A sarcophagus rests in the niche here, the lid firmly in place.<br><br>You can also see a candle (providing light) here.<br><br>It looks like there&#39;s a safe, lit path straight up.<br><br><span class="mono">&gt;[5] take the candle</span><br>Taken.<br><br><span class="mono">&gt;[6] open sarcophagus</span><br>You open the sarcophagus.<br><br><span class="mono">&gt;[7] put candle in sarcophagus</span><br>You put the candle into the sarcophagus.<br><br><span class="mono">&gt;[8] down</span><br><br>Tomb of Angels<br>This ancient underground tomb is lightless but for a few shafts from the surface. Everywhere in the shadows are carved angels, their faces worn away by water and pollution, their wings little more than nubs.<br><br>It looks like there&#39;s a safe, lit path if you go up.<br><br><span class="mono">&gt;[9] up</span><br><br>Upward Path<br>The staircase switches back on itself many times as it ascends towards the Crash Site.<br><br>A sarcophagus rests in the niche here, the lid pushed aside.<br><br>It looks like there&#39;s a safe, lit path straight up.<br><br><span class="mono">&gt;[10] close sarcophagus</span><br>You close the sarcophagus.<br><br><span class="mono">&gt;[11] d</span><br><br>Tomb of Angels<br>This ancient underground tomb is lightless but for a few shafts from the surface. Everywhere in the shadows are carved angels, their faces worn away by water and pollution, their wings little more than nubs.<br><br>It looks like there is no fully lit path from here to the Crash Site.
</div></details><p>An important word of caution: this method would give false negatives if there were a backdrop lightsource, such as the moon, providing light to the Upward Path. This is because backdrops are actually moved around the map by Inform during play, following the player around. So if the moon backdrop is in the Crash Site with the player, it will not be in the Upward Path as well -- even if it&#39;s scheduled to move there as soon as the player does.</p>
</div><div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="view_of_green_hills.html" title="A LOOK [direction] command which allows the player to see descriptions of the nearby landscape."><div class="nav-arrow">⬅80. </div><div class="doc-navbar-text">A View of Green Hills</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="revenge_of_the_fussy_table.html" title="A small game about resentful furniture and inconvenient objects."><div class="doc-navbar-text">Revenge of the Fussy Table</div><div class="nav-arrow">82.⮕</div></a></div></div>
</main><footer id="credits-footer"><nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="raw" href="../about.html">About this edition</a>&ensp;&bull;&ensp;<a class="raw" href="https://mastodon.gamedev.place/web/@inform7tips">@inform7tips@mastodon.gamedev.place</a></p></div></footer>
</body></html>
