<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 431. Circle of Misery</title>
<script src="../i7doc.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,375;0,400;0,500;0,700;1,375;1,400;1,500;1,700&family=Source+Sans+Pro:ital,wght@0,350;0,400;0,550;0,700;1,350;1,400;1,550;1,700&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="../i7doc.css">
</head>
<body><main>
<header class="example-header">
<nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Circle of Misery</h1><div class="subheading"><wbr><div class="ex-no">Example 431</div> ★</div></div>
<div class="doc-navbar example-linkback"><div class="doc-navbar-left"><a class="raw nav-el" href="../WI_21.html#section_11" title="Lists &gt; Variations: arrays, logs, queues, stacks, sets, sieves and rings"><div class="nav-arrow"><span class="sc">wi</span> 21.11</div><div class="doc-navbar-text">Variations: arrays, logs, queues, stacks, sets, sieves and rings</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="../RB_8.html#section_4" title="Vehicles, Animals and Furniture &gt; Furniture"><div class="doc-navbar-text">Furniture</div><div class="nav-arrow"><span class="sc">rb</span> 8.4</div></a></div></div>
</div>
<div class="example-meta-desc"><p>Retrieving items from an airport luggage carousel is such fun, how can we resist simulating it, using a list as a ring buffer?</p></div>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="facts_were_these.html" title="Creating a variant GIVE action that lets the player give multiple objects simultaneously with commands like GIVE ALL TO ATTENDANT or GIVE THREE DOLLARS TO ATTENDANT or GIVE PIE AND HAT TO ATTENDANT. The attendant accepts the gifts only if their total combined value matches some minimum amount."><div class="nav-arrow">⬅430. </div><div class="doc-navbar-text">The Facts Were These</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="eyes_fingers_toes.html" title="A safe with a multi-number combination, meant to be dialed over multiple turns, is implemented using a log of the last three numbers dialed. The log can then be compared to the safe&#39;s correct combination."><div class="doc-navbar-text">Eyes, Fingers, Toes</div><div class="nav-arrow">432.⮕</div></a></div></div>
</header>
<div class="example-body"><p>The only point we need to be careful about is that the carousel is simulated twice over, in the following text: once in the built-in way that objects are inside other objects, so that the luggage items are objects contained in the carousel object; but then again by the &quot;circle of misery&quot; list, a ring buffer keeping track of what order things are in. We need to be careful that these two records do not fall out of synchrony: anything put into the carousel must be added to the list, anything taken out must be removed. (In fact we forbid things to be added, for simplicity&#39;s sake.)</p>
<div class="play-example borogove"><a class="raw" href="https://snippets.borogove.app/inform7/v10ex431">Play/modify in Borogove</a></div>
<div class="play-example quixe"><a class="raw" href="CircleOfMisery/index.html">Play in Quixe</a></div>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Circle Of Misery&quot;\n\nLuggage item is a kind of thing. The blue golf bag, the leopardskin suitcase, the green rucksack and the Lufthansa shoulder-bag are luggage items.\n\nHeathrow Baggage Claim is a room. The carousel is a container in Heathrow. &quot;The luggage carousel, a scaly rubbered ring, does for the roundabout what Heathrow Airport does for the dream of flight: that is, turns the purest magic into the essence of boredom, only with extra stress. [if the number of entries in the circle of misery is 0]For once it stands idle. Perhaps it&apos;s broken.[otherwise]The baggage approaching you now: [the circle of misery with indefinite articles].&quot;\n\nThe circle of misery is a list of objects that varies.\n\nWhen play begins:\n\tnow all the luggage items are in the carousel;\n\tadd the list of luggage items to the circle of misery.\n\n\nEvery turn when the number of entries in the circle of misery is not 0:\n\trotate the circle of misery;\n\tlet the bag be entry 1 of the circle of misery;\n\tsay &quot;The carousel trundles on, bringing [a bag] to within reach.&quot;\n\nAfter taking a luggage item (called the bag):\n\tremove the bag from the circle of misery, if present;\n\tsay &quot;Taken.&quot;\n\nBefore doing something with a luggage item (called the bag) which is in the carousel:\n\tif the bag is not entry 1 of the circle of misery, say &quot;[The bag] is maddeningly out of range. You&apos;ll have to wait for it to come round.&quot; instead.\n\nInstead of inserting something into the carousel, say &quot;In recent years, the authorities have tended to frown upon depositing bags in random places at airports.&quot;\n\nTest me with &quot;get suitcase / get suitcase / get suitcase / get suitcase / look / get golf bag / look / get golf bag&quot;.`)"><span class="sym">⧉</span></button><div class="codeline storytitle">&quot;Circle Of Misery&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Luggage item is a kind of thing. The blue golf bag, the leopardskin suitcase, the green rucksack and the Lufthansa shoulder-bag are luggage items.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Heathrow Baggage Claim is a room. The carousel is a container in Heathrow. &quot;The luggage carousel, a scaly rubbered ring, does for the roundabout what Heathrow Airport does for the dream of flight: that is, turns the purest magic into the essence of boredom, only with extra stress. [if the number of entries in the circle of misery is 0]For once it stands idle. Perhaps it&#39;s broken.[otherwise]The baggage approaching you now: [the circle of misery with indefinite articles].&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">The circle of misery is a list of objects that varies.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">When play begins:</div>
<div class="codeline">&ensp;&ensp;&ensp;now all the luggage items are in the carousel;</div>
<div class="codeline">&ensp;&ensp;&ensp;add the list of luggage items to the circle of misery.</div>
</div><p>The list &quot;circle of misery&quot; is our ring, in which entry 1 is considered to be the position of whichever bag is currently frontmost. And here it goes, round and round:</p>
<div class="codeblock"><div class="codeline">Every turn when the number of entries in the circle of misery is not 0:</div>
<div class="codeline">&ensp;&ensp;&ensp;rotate the circle of misery;</div>
<div class="codeline">&ensp;&ensp;&ensp;let the bag be entry 1 of the circle of misery;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;The carousel trundles on, bringing [a bag] to within reach.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">After taking a luggage item (called the bag):</div>
<div class="codeline">&ensp;&ensp;&ensp;remove the bag from the circle of misery, if present;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;Taken.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Before doing something with a luggage item (called the bag) which is in the carousel:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the bag is not entry 1 of the circle of misery, say &quot;[The bag] is maddeningly out of range. You&#39;ll have to wait for it to come round.&quot; instead.</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Instead of inserting something into the carousel, say &quot;In recent years, the authorities have tended to frown upon depositing bags in random places at airports.&quot;</div>
<div class="codeline blankline">&thinsp;</div>
<div class="codeline">Test me with &quot;get suitcase / get suitcase / get suitcase / get suitcase / look / get golf bag / look / get golf bag&quot;.</div>
</div><details class="testme-output"><summary><div class="summation">Test me with "get suitcase / get suitcase / get suitcase / get suitcase / look / get golf bag / look / get golf bag".</div></summary><div class="testme-output">Heathrow Baggage Claim<br>The luggage carousel, a scaly rubbered ring, does for the roundabout what Heathrow Airport does for the dream of flight: that is, turns the purest magic into the essence of boredom, only with extra stress. The baggage approaching you now: a blue golf bag, a leopardskin suitcase, a green rucksack and a Lufthansa shoulder-bag.<br><br><span class="mono">&gt;(Testing.)</span><br><br><span class="mono">&gt;[1] get suitcase</span><br>The leopardskin suitcase is maddeningly out of range. You&#39;ll have to wait for it to come round.<br><br>The carousel trundles on, bringing a Lufthansa shoulder-bag to within reach.<br><br><span class="mono">&gt;[2] get suitcase</span><br>The leopardskin suitcase is maddeningly out of range. You&#39;ll have to wait for it to come round.<br><br>The carousel trundles on, bringing a green rucksack to within reach.<br><br><span class="mono">&gt;[3] get suitcase</span><br>The leopardskin suitcase is maddeningly out of range. You&#39;ll have to wait for it to come round.<br><br>The carousel trundles on, bringing a leopardskin suitcase to within reach.<br><br><span class="mono">&gt;[4] get suitcase</span><br>Taken.<br><br>The carousel trundles on, bringing a blue golf bag to within reach.<br><br><span class="mono">&gt;[5] look</span><br>Heathrow Baggage Claim<br>The luggage carousel, a scaly rubbered ring, does for the roundabout what Heathrow Airport does for the dream of flight: that is, turns the purest magic into the essence of boredom, only with extra stress. The baggage approaching you now: a blue golf bag, a green rucksack and a Lufthansa shoulder-bag.<br><br>The carousel trundles on, bringing a Lufthansa shoulder-bag to within reach.<br><br><span class="mono">&gt;[6] get golf bag</span><br>The blue golf bag is maddeningly out of range. You&#39;ll have to wait for it to come round.<br><br>The carousel trundles on, bringing a green rucksack to within reach.<br><br><span class="mono">&gt;[7] look</span><br>Heathrow Baggage Claim<br>The luggage carousel, a scaly rubbered ring, does for the roundabout what Heathrow Airport does for the dream of flight: that is, turns the purest magic into the essence of boredom, only with extra stress. The baggage approaching you now: a green rucksack, a Lufthansa shoulder-bag and a blue golf bag.<br><br>The carousel trundles on, bringing a blue golf bag to within reach.<br><br><span class="mono">&gt;[8] get golf bag</span><br>Taken.<br><br>The carousel trundles on, bringing a Lufthansa shoulder-bag to within reach.
</div></details></div><div class="doc-navbar"><div class="doc-navbar-left"><a class="raw nav-el" href="facts_were_these.html" title="Creating a variant GIVE action that lets the player give multiple objects simultaneously with commands like GIVE ALL TO ATTENDANT or GIVE THREE DOLLARS TO ATTENDANT or GIVE PIE AND HAT TO ATTENDANT. The attendant accepts the gifts only if their total combined value matches some minimum amount."><div class="nav-arrow">⬅430. </div><div class="doc-navbar-text">The Facts Were These</div></a></div><div class="doc-navbar-right"><a class="raw nav-el" href="eyes_fingers_toes.html" title="A safe with a multi-number combination, meant to be dialed over multiple turns, is implemented using a log of the last three numbers dialed. The log can then be compared to the safe&#39;s correct combination."><div class="doc-navbar-text">Eyes, Fingers, Toes</div><div class="nav-arrow">432.⮕</div></a></div></div>
</main><footer id="credits-footer"><nav><div class="nav-el"><a class="raw nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="raw nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="raw nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="raw nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="raw" href="../about.html">About this edition</a>&ensp;&bull;&ensp;<a class="raw" href="https://mastodon.gamedev.place/web/@inform7tips">@inform7tips@mastodon.gamedev.place</a></p></div></footer>
</body></html>
