<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 403. Kyoto</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<h1>Kyoto</h1><div class="subheading">Example 403 ★★</div>
<div class="linkback">
<a href="../WI_19.html#section_11" title="Rulebooks &gt; Success and failure">WI §19.11 Success and failure</a><br><a href="../RB_10.html#section_4" title="Physics: Substances, Ropes, Energy and Weight &gt; Glass and Other Damage-Prone Substances">RB §10.4 Glass and Other Damage-Prone Substances</a>
</div>
<p class="example-desc">Expanding the effects of the THROW something AT something command so that objects do make contact with one another.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a href="flotation.html" title="Objects that can sink or float in a well, depending on their own properties and the state of the surrounding environment.">402. Flotation</a></div><div class="doc-navbar-right"><a href="being_peter.html" title="A set of rules determining the attitude a character will take when asked about certain topics.">404. Being Peter</a></div></div>
</header>
<p>Suppose we want to expand the function of the existing THROW SOMETHING AT command so that a thrown object actually does make contact most of the time. A glance at the Actions index tells us that the Throwing it at rulebook currently looks like this:</p>
<div class="codeblock"><div class="codeline">Throwing something at something (past tense thrown it at)</div>
<div class="codeline">&ensp;&ensp;&quot;drop [something held] at/against/on/onto [something]&quot;</div>
<table>
<tr><td>check</td><td>an actor throwing something at</td><td>implicitly remove thrown clothing rule</td></tr><tr><td>check</td><td>an actor throwing something at</td><td>futile to throw things at inanimate objects rule</td></tr><tr><td>check</td><td>an actor throwing something at</td><td>block throwing at rule</td></tr></table>
</div><p>Some of those still look useful. We want to leave the &quot;implicitly remove thrown clothing&quot; rule, for instance -- no fair having the player throw a hat that&#39;s on his head. On the other hand, the &quot;futile to throw things at inanimate objects rule&quot; is going to have to go, because that would prevent us from ever being able to complete the throwing command. So let&#39;s get rid of that:</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex403">Play/modify Kyoto in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Throwing/index.html">Play Kyoto in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Kyoto&quot;\n\nPart 1 - Throwing Rules\n\nThe futile to throw things at inanimate objects rule is not listed in the check throwing it at rules.\n\n\nThe block throwing at people rule is listed instead of the block throwing at rule in the check throwing it at rules.\n\nThis is the block throwing at people rule:\n\tif the second noun is a person, say &quot;That might be construed as an attack.&quot; instead.\n\n\nA thing can be hard or soft. A thing can be fragile or strong. Shape is a kind of value. The shapes are round, flat, and linear. A thing has shape.\n\n\nCheck throwing it at (this is the block juggling rule):\n\tif the player is carrying the second noun, say &quot;It would be difficult to throw at something you are yourself holding.&quot; instead.\n\nCheck throwing it at (this is the avoid throwing things into themselves rule):\n\tif the second noun is within the noun, say &quot;That would be a nice magic trick.&quot; instead.\n\n\nCarry out throwing it at (this is the check aerodynamics rule):\n\tif the noun is flat:\n\t\tmove noun to location;\n\t\tsay &quot;[The noun], unwieldy, flutters to the ground.&quot;;\n\t\trule succeeds.\n\n\nCarry out throwing it at (this is the contact rule):\n\tsay &quot;[The noun] hits [the second noun].[paragraph break]&quot;;\n\tif the second noun is fragile and the noun is hard:\n\t\tdestroy the second noun.\n\nCarry out throwing it at (this is the landing rule):\n\tlet destination be the location;\n\tif the second noun is on a supporter (called endtable), let destination be the endtable;\n\tif the second noun is a supporter, let destination be the second noun;\n\tmove the noun to the destination;\n\tif the noun is fragile and the second noun is hard:\n\t\tdestroy the noun;\n\t\trule succeeds;\n\tsay &quot;[The noun] lands [if the destination is the location]nearby[otherwise]on [the destination][end if].&quot;\n\n\nReliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.\n\nTo destroy (item - a thing):\n\tlet home be the holder of the item;\n\tif the item is part of something (called the superstructure), let home be the holder of the superstructure;\n\tif the item is visible:\n\t\tsay &quot;[The item] breaks[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if].&quot;;\n\tif something is relying on the item,\n\t\tnow all the things which are relying on the item are in the home;\n\tnow the item is nowhere.\n\n\nTo destroy (item - a door):\n\tnow the item is open;\n\tnow the item is unopenable;\n\tsay &quot;[The item] smashes.&quot;\n\nRule for printing the name of an unopenable open door while not throwing something at something:\n\tsay &quot;open doorway&quot;.\n\nUnderstand &quot;door&quot; or &quot;doorway&quot; as a door.\n\n\nThis is the flying through doorways rule:\n\tif the second noun is an open door:\n\t\tlet the distant room be the other side of the second noun;\n\t\tmove the noun to the distant room;\n\t\tsay &quot;[The noun] flies out of sight into [the distant room].&quot;;\n\t\trule succeeds.\n\n\nThe flying through doorways rule is listed before the contact rule in the carry out throwing it at rules.\n\n\nPart 2 - The Study\n\nThe sliding paper screen is a door. It is north of the Moss Garden and south of the Study. The paper screen is fragile.\n\nThe player carries a netsuke and a shamisen. The description of the netsuke is &quot;A weight for the cord on which you wear your purse or your medicine box. This particular one has the shape of a bullfrog, carved from green stone.&quot; The netsuke is round, hard, and strong. Understand &quot;green&quot; or &quot;stone&quot; or &quot;bullfrog&quot; as the netsuke.\n\nThe description of the shamisen is &quot;An instrument you have only begun to learn to play.&quot; The shamisen is linear, soft, and fragile. A neck is part of the shamisen. The neck is linear, strong, and hard. A body is part of the shamisen. The body is round, fragile, and soft. A string is part of the shamisen. The string is linear, soft, and strong. The printed name of the body is &quot;[if the body is not part of the shamisen]shamisen [end if]body&quot;. The printed name of the neck is &quot;[if the neck is not part of the shamisen]shamisen [end if]neck&quot;. Understand &quot;shamisen&quot; as the body when the body is not part of the shamisen. Understand &quot;shamisen&quot; as the neck when the neck is not part of the shamisen.\n\nThe description of the Study is &quot;A restful three-tatami room.&quot; The Study contains a calligraphy box and a hanging scroll. The initial appearance of the hanging scroll is &quot;A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background.&quot; The calligraphy box contains a brush. The box is openable and closed. The brush is hard, linear, and strong. The calligraphy box is round, soft, and strong. The hanging scroll is flat, soft, and strong.\n\nThe description of the Moss Garden is &quot;Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.&quot; The leaves are scenery in the Moss Garden. Instead of throwing something at the leaves: say &quot;You spent too long over their placement.&quot;\n\nTest me with &quot;test one / test two&quot;.\n\nTest one with &quot;open screen / throw netsuke at screen / n / get netsuke / close screen / get scroll / throw scroll at screen / throw netsuke at scroll / get netsuke / throw netsuke at shamisen / drop netsuke&quot;.\n\nTest two with &quot;throw shamisen at netsuke / get all / throw netsuke at screen / get netsuke / throw netsuke at door / s / get netsuke&quot;.`)">⧉</button><div class="codeline storytitle">&quot;Kyoto&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline i7header">Part 1 - Throwing Rules</div><div class="codeline">The futile to throw things at inanimate objects rule is not listed in the check throwing it at rules.</div>
</div><p>That &quot;block throwing at&quot; rule also looks sinister: any &quot;block&hellip;&quot; rule in the standard actions library is there to print a message telling the player he can&#39;t do what he&#39;s asked to do.</p>
<p>But it&#39;s not enough to ignore it, the way we did the &quot;futile&quot; rule. Since we are only expanding the command to affect inanimate objects, let&#39;s replace the &quot;block throwing at&quot; rule with a different one which will only prevent the player throwing things at people:</p>
<div class="codeblock"><div class="codeline">The block throwing at people rule is listed instead of the block throwing at rule in the check throwing it at rules.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">This is the block throwing at people rule:</div>
<div class="codeline">&ensp;&ensp;if the second noun is a person, say &quot;That might be construed as an attack.&quot; instead.</div>
</div><p>Now we&#39;ve changed the command so that some action can sometimes be carried out here -- but we don&#39;t have any rules for what happens. It&#39;s time to create some rules for our model world.</p>
<div class="codeblock"><div class="codeline">A thing can be hard or soft. A thing can be fragile or strong. Shape is a kind of value. The shapes are round, flat, and linear. A thing has shape.</div>
</div><p>If we&#39;re actually going to allow throwing, we might want to add a couple of extra checks to the rulebook to make sure that this happens when it ought:</p>
<div class="codeblock"><div class="codeline">Check throwing it at (this is the block juggling rule):</div>
<div class="codeline">&ensp;&ensp;if the player is carrying the second noun, say &quot;It would be difficult to throw at something you are yourself holding.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Check throwing it at (this is the avoid throwing things into themselves rule):</div>
<div class="codeline">&ensp;&ensp;if the second noun is within the noun, say &quot;That would be a nice magic trick.&quot; instead.</div>
</div><p>And then the rules for the action itself:</p>
<div class="codeblock"><div class="codeline">Carry out throwing it at (this is the check aerodynamics rule):</div>
<div class="codeline">&ensp;&ensp;if the noun is flat:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;move noun to location;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;say &quot;[The noun], unwieldy, flutters to the ground.&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;rule succeeds.</div>
</div><p>That &quot;rule succeeds&quot; ends the action here, if the noun is flat. If not, Inform goes on to the next rule in the carry out throwing it at rulebook:</p>
<div class="codeblock"><div class="codeline">Carry out throwing it at (this is the contact rule):</div>
<div class="codeline">&ensp;&ensp;say &quot;[The noun] hits [the second noun].[paragraph break]&quot;;</div>
<div class="codeline">&ensp;&ensp;if the second noun is fragile and the noun is hard:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;destroy the second noun.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Carry out throwing it at (this is the landing rule):</div>
<div class="codeline">&ensp;&ensp;let destination be the location;</div>
<div class="codeline">&ensp;&ensp;if the second noun is on a supporter (called endtable), let destination be the endtable;</div>
<div class="codeline">&ensp;&ensp;if the second noun is a supporter, let destination be the second noun;</div>
<div class="codeline">&ensp;&ensp;move the noun to the destination;</div>
<div class="codeline">&ensp;&ensp;if the noun is fragile and the second noun is hard:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;destroy the noun;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;rule succeeds;</div>
<div class="codeline">&ensp;&ensp;say &quot;[The noun] lands [if the destination is the location]nearby[otherwise]on [the destination][end if].&quot;</div>
</div><p>These rules are assuming some backup information, so let&#39;s provide that as well:</p>
<div class="codeblock"><div class="codeline">Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">To destroy (item - a thing):</div>
<div class="codeline">&ensp;&ensp;let home be the holder of the item;</div>
<div class="codeline">&ensp;&ensp;if the item is part of something (called the superstructure), let home be the holder of the superstructure;</div>
<div class="codeline">&ensp;&ensp;if the item is visible:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;say &quot;[The item] breaks[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if].&quot;;</div>
<div class="codeline">&ensp;&ensp;if something is relying on the item,</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;now all the things which are relying on the item are in the home;</div>
<div class="codeline">&ensp;&ensp;now the item is nowhere.</div>
</div><p>Now suppose we&#39;d like to add some further cases for what happens if the player breaks a fragile door this way:</p>
<div class="codeblock"><div class="codeline">To destroy (item - a door):</div>
<div class="codeline">&ensp;&ensp;now the item is open;</div>
<div class="codeline">&ensp;&ensp;now the item is unopenable;</div>
<div class="codeline">&ensp;&ensp;say &quot;[The item] smashes.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Rule for printing the name of an unopenable open door while not throwing something at something:</div>
<div class="codeline">&ensp;&ensp;say &quot;open doorway&quot;.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Understand &quot;door&quot; or &quot;doorway&quot; as a door.</div>
</div><p>This works, except that objects will continue to &quot;strike&quot; open, unopenable doors, with the result that the player can smash the same door over and over. What we need is another rule, after the aerodynamics rule and before the contact rule, that tells Inform how to handle throwing things at open doors.</p>
<div class="codeblock"><div class="codeline">This is the flying through doorways rule:</div>
<div class="codeline">&ensp;&ensp;if the second noun is an open door:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;let the distant room be the other side of the second noun;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;move the noun to the distant room;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;say &quot;[The noun] flies out of sight into [the distant room].&quot;;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;rule succeeds.</div>
</div><p>If the original rulebook is one we wrote ourselves, we could just add that rule in the proper spot in order. If we got it from an extension, though, we might need to put it in the right place explicitly:</p>
<div class="codeblock"><div class="codeline">The flying through doorways rule is listed before the contact rule in the carry out throwing it at rules.</div>
</div><p>The magic of rulebooks is that they allow authors to amend each other&#39;s work (or the Standard Rules) with a fair amount of freedom. A well-written extension will give individual names to its rules, to allow subsequent authors to modify the function of the extension without too much trouble.</p>
<p>Now for an actual scenario with which to test this:</p>
<div class="codeblock"><div class="codeline i7header">Part 2 - The Study</div><div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The sliding paper screen is a door. It is north of the Moss Garden and south of the Study. The paper screen is fragile.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The player carries a netsuke and a shamisen. The description of the netsuke is &quot;A weight for the cord on which you wear your purse or your medicine box. This particular one has the shape of a bullfrog, carved from green stone.&quot; The netsuke is round, hard, and strong. Understand &quot;green&quot; or &quot;stone&quot; or &quot;bullfrog&quot; as the netsuke.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The description of the shamisen is &quot;An instrument you have only begun to learn to play.&quot; The shamisen is linear, soft, and fragile. A neck is part of the shamisen. The neck is linear, strong, and hard. A body is part of the shamisen. The body is round, fragile, and soft. A string is part of the shamisen. The string is linear, soft, and strong. The printed name of the body is &quot;[if the body is not part of the shamisen]shamisen [end if]body&quot;. The printed name of the neck is &quot;[if the neck is not part of the shamisen]shamisen [end if]neck&quot;. Understand &quot;shamisen&quot; as the body when the body is not part of the shamisen. Understand &quot;shamisen&quot; as the neck when the neck is not part of the shamisen.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The description of the Study is &quot;A restful three-tatami room.&quot; The Study contains a calligraphy box and a hanging scroll. The initial appearance of the hanging scroll is &quot;A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background.&quot; The calligraphy box contains a brush. The box is openable and closed. The brush is hard, linear, and strong. The calligraphy box is round, soft, and strong. The hanging scroll is flat, soft, and strong.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The description of the Moss Garden is &quot;Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.&quot; The leaves are scenery in the Moss Garden. Instead of throwing something at the leaves: say &quot;You spent too long over their placement.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;test one / test two&quot;.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Test one with &quot;open screen / throw netsuke at screen / n / get netsuke / close screen / get scroll / throw scroll at screen / throw netsuke at scroll / get netsuke / throw netsuke at shamisen / drop netsuke&quot;.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Test two with &quot;throw shamisen at netsuke / get all / throw netsuke at screen / get netsuke / throw netsuke at door / s / get netsuke&quot;.</div>
</div><details class="testme-output"><summary>Test me with "test one / test two".</summary><div class="testme-output">Moss Garden<br>Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.<br><br>You can see a sliding paper screen here.<br><br>>(Testing.)<br><br>>[1] test one<br>(Testing.)<br><br>>[2] open screen<br>You open the sliding paper screen.<br><br>>[3] throw netsuke at screen<br>The netsuke flies out of sight into the Study.<br><br>>[4] n<br><br>Study<br>A restful three-tatami room.<br><br>A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background.<br><br>You can also see a sliding paper screen, a netsuke and a calligraphy box (closed) here.<br><br>>[5] get netsuke<br>Taken.<br><br>>[6] close screen<br>You close the sliding paper screen.<br><br>>[7] get scroll<br>Taken.<br><br>>[8] throw scroll at screen<br>The hanging scroll, unwieldy, flutters to the ground.<br><br>>[9] throw netsuke at scroll<br>The netsuke hits the hanging scroll.<br><br>The netsuke lands nearby.<br><br>>[10] get netsuke<br>Taken.<br><br>>[11] throw netsuke at shamisen<br>It would be difficult to throw at something you are yourself holding.<br><br>>[12] drop netsuke<br>Dropped.<br><br>>[13] test two<br>(Testing.)<br><br>>[14] throw shamisen at netsuke<br>The shamisen hits the netsuke.<br><br>The shamisen breaks, leaving a neck, a body and a string behind.<br><br>>[15] get all<br>string: Taken.<br>shamisen body: Taken.<br>shamisen neck: Taken.<br>netsuke: Taken.<br>hanging scroll: Taken.<br>calligraphy box: Taken.<br><br>>[16] throw netsuke at screen<br>The netsuke hits the sliding paper screen.<br><br>The sliding paper screen smashes.<br><br>The netsuke lands nearby.<br><br>>[17] get netsuke<br>Taken.<br><br>>[18] throw netsuke at door<br>The netsuke flies out of sight into the Moss Garden.<br><br>>[19] s<br><br>Moss Garden<br>Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.<br><br>You can see an open doorway and a netsuke here.<br><br>>[20] get netsuke<br>Taken.
</div></details><div class="doc-navbar"><div class="doc-navbar-left"><a href="flotation.html" title="Objects that can sink or float in a well, depending on their own properties and the state of the surrounding environment.">402. Flotation</a></div><div class="doc-navbar-right"><a href="being_peter.html" title="A set of rules determining the attitude a character will take when asked about certain topics.">404. Being Peter</a></div></div>
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<footer id="credits-footer"><p><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p>Thanks go to <a href="http://nitku.net/blog/">Juhana Leinonen</a> for <a href="https://borogove.app">Borogove</a>. The playable examples use <a href="https://eblong.com">Andrew Plotkin</a>'s <a href="https://eblong.com/zarf/glk/glkote.html">GlkOte</a> and <a href="https://eblong.com/zarf/glulx/quixe/index.html">Quixe</a>, distributed under an <a href="../mit.html">MIT License.</a></p><p class="about"><a href="../about.html">About this edition</a> &bull; <a href="https://twitter.com/inform7tips">@inform7tips</a></p></footer>
</body></html>
