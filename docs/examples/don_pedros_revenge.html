<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 113. Don Pedro's Revenge</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Don Pedro's Revenge</h1><div class="subheading">Example 113 ★★★</div></div></div>
<div class="linkback">
<a href="../WI_8.html#section_2" title="Change &gt; Changing the command prompt">WI §8.2 Changing the command prompt</a><br><a href="../RB_7.html#section_5" title="Other Characters &gt; Combat and Death">RB §7.5 Combat and Death</a>
</div>
<p class="example-desc">Combat scenario in which the player&#39;s footing and position changes from move to move, and the command prompt also changes to reflect that.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="day_for_fresh_sushi.html" title="A complete story by Emily Short, called &quot;A Day for Fresh Sushi&quot;, rewritten using Inform 7. Noteworthy is the snarky commenter who remarks on everything the player does, but only the first time each action is performed."><div class="nav-arrow">←</div> <div class="doc-navbar-text">112. A Day For Fresh Sushi</div></a></div><div class="doc-navbar-center">&thinsp;</div><div class="doc-navbar-right"><a class="nav-el" href="politics_as_usual.html" title="Have the status line indicate the current region of the map."><div class="doc-navbar-text">114. Politics as Usual</div> <div class="nav-arrow">→</div></a></div></div>
</header>
<p>Suppose our game features a detailed simulated combat between the player character and his opponent. He might have several weapons available, and several types of attack available; and at any given time he might be perched up in the rigging of his ship, standing on the open deck, or boxed in between some barrels. His options will vary depending on his position, and obviously it would detract from the pacing to make the player keep LOOKing in the middle of combat in order to remind himself where he is. Instead, we&#39;ll roll this information into the command prompt:</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex113">Play/modify Don Pedro's Revenge in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Pedro/index.html">Play Don Pedro's Revenge in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Don Pedro&apos;s Revenge&quot;\n\nThe Deck of the Helene Marie is a room. &quot;The two crews are embattled all around you, but your attention is reserved for your particular enemy: Don Pedro.&quot;\n\nTable of Random Prompts\nposition\tprompt\nboxed\t&quot;So securely boxed-in that you can really only parry or thrust, you try to &quot;\nboxed\t&quot;Trapped between your barrels, you decide to &quot;\nperched\t&quot;Able to slice at your attackers but not to advance or retreat, you choose to &quot;\nperched\t&quot;Perched up here with the advantage of height (but little mobility), you attempt to &quot;\nfree\t&quot;Out on the open deck with no impediments, free to advance or retreat, you decide to &quot;\n\nWhen play begins: reset the prompt.\n\nEvery turn: reset the prompt.\n\nTo reset the prompt:\n\tsort the Table of Random Prompts in random order;\n\trepeat through the Table of Random Prompts:\n\t\tif the position entry is the placement of the player:\n\t\t\tnow the command prompt is prompt entry;\n\t\t\tstop.\n\nAfter reading a command: say conditional paragraph break.\n\nA placement is a kind of value. The placements are boxed, perched, free. The player has a placement. The player is free.\n\nUnderstand &quot;retreat&quot; or &quot;parry&quot; as retreating. Retreating is an action applying to nothing.\n\nCheck retreating:\n\tif the player is perched, say &quot;You can&apos;t move backward or parry very successfully from this position.&quot; instead.\n\nCarry out retreating:\n\tnow the player is boxed;\n\tsay &quot;You protect yourself, but end up wedged in between two barrels.&quot;\n\nUnderstand &quot;thrust&quot; or &quot;advance&quot; as advancing. Advancing is an action applying to nothing.\n\nCheck advancing:\n\tif the player is perched, say &quot;You can&apos;t move forward from here, only slash.&quot; instead.\n\nCarry out advancing:\n\tnow the player is free;\n\tsay &quot;You push forward aggressively, making your way to the open deck.&quot;\n\nInstead of jumping:\n\tnow the player is perched;\n\tsay &quot;You leap and swing yourself boldly up into the rigging, leaving your attackers beneath you.&quot;\n\nInstead of jumping when the player is perched:\n\tnow the player is free;\n\tsay &quot;You leap down from your position, into the middle of the deck.&quot;\n\nTest me with &quot;advance / jump / advance / retreat / jump / retreat / retreat / advance&quot;.`)">⧉</button><div class="codeline storytitle">&quot;Don Pedro&#39;s Revenge&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">The Deck of the Helene Marie is a room. &quot;The two crews are embattled all around you, but your attention is reserved for your particular enemy: Don Pedro.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline tablename">Table of Random Prompts</div><table>
<tr><td>position</td><td>prompt</td></tr><tr><td>boxed</td><td>&quot;So securely boxed-in that you can really only parry or thrust, you try to &quot;</td></tr><tr><td>boxed</td><td>&quot;Trapped between your barrels, you decide to &quot;</td></tr><tr><td>perched</td><td>&quot;Able to slice at your attackers but not to advance or retreat, you choose to &quot;</td></tr><tr><td>perched</td><td>&quot;Perched up here with the advantage of height (but little mobility), you attempt to &quot;</td></tr><tr><td>free</td><td>&quot;Out on the open deck with no impediments, free to advance or retreat, you decide to &quot;</td></tr></table>
<div class="codeline">When play begins: reset the prompt.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Every turn: reset the prompt.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">To reset the prompt:</div>
<div class="codeline">&ensp;&ensp;&ensp;sort the Table of Random Prompts in random order;</div>
<div class="codeline">&ensp;&ensp;&ensp;repeat through the Table of Random Prompts:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;if the position entry is the placement of the player:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;now the command prompt is prompt entry;</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;stop.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">After reading a command: say conditional paragraph break.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">A placement is a kind of value. The placements are boxed, perched, free. The player has a placement. The player is free.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Understand &quot;retreat&quot; or &quot;parry&quot; as retreating. Retreating is an action applying to nothing.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Check retreating:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the player is perched, say &quot;You can&#39;t move backward or parry very successfully from this position.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Carry out retreating:</div>
<div class="codeline">&ensp;&ensp;&ensp;now the player is boxed;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;You protect yourself, but end up wedged in between two barrels.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Understand &quot;thrust&quot; or &quot;advance&quot; as advancing. Advancing is an action applying to nothing.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Check advancing:</div>
<div class="codeline">&ensp;&ensp;&ensp;if the player is perched, say &quot;You can&#39;t move forward from here, only slash.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Carry out advancing:</div>
<div class="codeline">&ensp;&ensp;&ensp;now the player is free;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;You push forward aggressively, making your way to the open deck.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Instead of jumping:</div>
<div class="codeline">&ensp;&ensp;&ensp;now the player is perched;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;You leap and swing yourself boldly up into the rigging, leaving your attackers beneath you.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Instead of jumping when the player is perched:</div>
<div class="codeline">&ensp;&ensp;&ensp;now the player is free;</div>
<div class="codeline">&ensp;&ensp;&ensp;say &quot;You leap down from your position, into the middle of the deck.&quot;</div>
<div class="codeline">&ensp;&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;advance / jump / advance / retreat / jump / retreat / retreat / advance&quot;.</div>
</div><details class="testme-output"><summary>Test me with "advance / jump / advance / retreat / jump / retreat / retreat / advance".</summary><div class="testme-output">Deck of the Helene Marie<br>The two crews are embattled all around you, but your attention is reserved for your particular enemy: Don Pedro.<br><br>Out on the open deck with no impediments, free to advance or retreat, you decide to<br>(Testing.)<br><br>Out on the open deck with no impediments, free to advance or retreat, you decide to [1] advance<br><br>You push forward aggressively, making your way to the open deck.<br><br>Out on the open deck with no impediments, free to advance or retreat, you decide to [2] jump<br><br>You leap and swing yourself boldly up into the rigging, leaving your attackers beneath you.<br><br>Perched up here with the advantage of height (but little mobility), you attempt to [3] advance<br><br>You can&#39;t move forward from here, only slash.<br><br>Perched up here with the advantage of height (but little mobility), you attempt to [4] retreat<br><br>You can&#39;t move backward or parry very successfully from this position.<br><br>Perched up here with the advantage of height (but little mobility), you attempt to [5] jump<br><br>You leap down from your position, into the middle of the deck.<br><br>Out on the open deck with no impediments, free to advance or retreat, you decide to [6] retreat<br><br>You protect yourself, but end up wedged in between two barrels.<br><br>Trapped between your barrels, you decide to [7] retreat<br><br>You protect yourself, but end up wedged in between two barrels.<br><br>So securely boxed-in that you can really only parry or thrust, you try to [8] advance<br><br>You push forward aggressively, making your way to the open deck.<br><br>Out on the open deck with no impediments, free to advance or retreat, you decide to
</div></details><p>Of course, this won&#39;t be much fun until we also provide the player with a few weapons, some more fighting maneuvers, and, most of all, a Don Pedro to defeat.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="day_for_fresh_sushi.html" title="A complete story by Emily Short, called &quot;A Day for Fresh Sushi&quot;, rewritten using Inform 7. Noteworthy is the snarky commenter who remarks on everything the player does, but only the first time each action is performed."><div class="nav-arrow">←</div> <div class="doc-navbar-text">112. A Day For Fresh Sushi</div></a></div><div class="doc-navbar-center">&thinsp;</div><div class="doc-navbar-right"><a class="nav-el" href="politics_as_usual.html" title="Have the status line indicate the current region of the map."><div class="doc-navbar-text">114. Politics as Usual</div> <div class="nav-arrow">→</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="nav-about" href="../about.html">About this edition</a> &bull; <a class="nav-about" href="https://twitter.com/inform7tips">@inform7tips</a></p></div></footer>
</body></html>
