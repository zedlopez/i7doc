<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 214. Slogar's Revenge</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="superheading"><div class="heading"><h1>Slogar's Revenge</h1><div class="subheading">Example 214 ★★★</div></div></div>
<div class="linkback">
<a href="../WI_12.html#section_17" title="Advanced Actions &gt; Visible vs touchable vs carried">WI §12.17 Visible vs touchable vs carried</a><br><a href="../RB_6.html#section_3" title="Commands &gt; Modifying Existing Commands">RB §6.3 Modifying Existing Commands</a>
</div>
<p class="example-desc">Creating an amulet of tumblers that can be used to lock and unlock things even when it is worn, overriding the usual requirement that keys be carried.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="eddystone.html" title="Creating new commands involving the standard compass directions."><div class="nav-arrow">←</div> <div class="doc-navbar-text">213. Eddystone</div></a></div><div class="doc-navbar-center">&thinsp;</div><div class="doc-navbar-right"><a class="nav-el" href="magnetos_revenge.html" title="Kitty Pryde of the X-Men is able to reach through solid objects, so we might implement her with special powers that the player does not have&hellip;"><div class="doc-navbar-text">215. Magneto's Revenge</div> <div class="nav-arrow">→</div></a></div></div>
</header>
<p>Under most circumstances, locking and unlocking require the player to be carrying the key he uses to unlock something. This makes sense -- unless the key is on a keychain, or on a chain around his neck, for instance. So here we explore one way to circumstantially override the carrying requirements, while still making sure that the player cannot unlock the door if the unlocking tool is nowhere in sight.</p>
<p>In essence, we are rewriting the carrying requirements rule with a different one of our own devising, and swapping it in only at those moments when it is correct to do so.</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex214">Play/modify Slogar's Revenge in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="SlogarsRevenge/index.html">Play Slogar's Revenge in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Slogar&apos;s Revenge&quot;\n\nSection 1 - Procedure\n\nThe amulet carrying rule substitutes for the carrying requirements rule when locking something with the Amulet of Tumblers.\n\nThe amulet carrying rule substitutes for the carrying requirements rule when unlocking something with the Amulet of Tumblers.\n\n\nThis is the amulet carrying rule:\n\tif the player has the second noun:\n\t\tcontinue the action;\n\tsay &quot;(first picking up the amulet)[command clarification break]&quot;;\n\ttry silently taking the second noun;\n\tif the player is not carrying the second noun:\n\t\tstop the action;\n\nSection 2 - Scenario\n\nThe Daunting Dungeon is a room.\n\nWest of the Daunting Dungeon is the Disturbing Door. The Disturbing Door is a door. West of the Disturbing Door is the Fallow Field.\n\nThe Disturbing Door is closed and locked.\n\nThe player wears the Amulet of Tumblers. The Amulet of Tumblers unlocks the Disturbing Door.\n\nTest me with &quot;unlock disturbing door with amulet / open door / west / remove amulet / close door / lock disturbing door with amulet / drop amulet / unlock disturbing door with amulet&quot;.`)">⧉</button><div class="codeline storytitle">&quot;Slogar&#39;s Revenge&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline i7header">Section 1 - Procedure</div><div class="codeline">The amulet carrying rule substitutes for the carrying requirements rule when locking something with the Amulet of Tumblers.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The amulet carrying rule substitutes for the carrying requirements rule when unlocking something with the Amulet of Tumblers.</div>
</div><p>We can now replace the usual behavior of the carrying requirements rule (to check whether the player is carrying something and, if not, to generate an implicit take) with a similar rule of our own; note that &quot;if the player has the second noun&quot; is a more compact way to write &quot;if the player carries the second noun or the player wears the second noun&quot;:</p>
<div class="codeblock"><div class="codeline">This is the amulet carrying rule:</div>
<div class="codeline">&ensp;&ensp;if the player has the second noun:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;continue the action;</div>
<div class="codeline">&ensp;&ensp;say &quot;(first picking up the amulet)[command clarification break]&quot;;</div>
<div class="codeline">&ensp;&ensp;try silently taking the second noun;</div>
<div class="codeline">&ensp;&ensp;if the player is not carrying the second noun:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;stop the action;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline i7header">Section 2 - Scenario</div><div class="codeline">The Daunting Dungeon is a room.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">West of the Daunting Dungeon is the Disturbing Door. The Disturbing Door is a door. West of the Disturbing Door is the Fallow Field.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The Disturbing Door is closed and locked.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The player wears the Amulet of Tumblers. The Amulet of Tumblers unlocks the Disturbing Door.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;unlock disturbing door with amulet / open door / west / remove amulet / close door / lock disturbing door with amulet / drop amulet / unlock disturbing door with amulet&quot;.</div>
</div><details class="testme-output"><summary>Test me with "unlock disturbing door with amulet / open door / west / remove amulet / close door / lock disturbing door with amulet / drop amulet / unlock disturbing door with amulet".</summary><div class="testme-output">Daunting Dungeon<br>You can see a Disturbing Door here.<br><br>&gt;(Testing.)<br><br>&gt;[1] unlock disturbing door with amulet<br>You unlock the Disturbing Door.<br><br>&gt;[2] open door<br>You open the Disturbing Door.<br><br>&gt;[3] west<br><br>Fallow Field<br>You can see a Disturbing Door here.<br><br>&gt;[4] remove amulet<br>You take off the Amulet of Tumblers.<br><br>&gt;[5] close door<br>You close the Disturbing Door.<br><br>&gt;[6] lock disturbing door with amulet<br>You lock the Disturbing Door.<br><br>&gt;[7] drop amulet<br>Dropped.<br><br>&gt;[8] unlock disturbing door with amulet<br>(first picking up the amulet)<br>You unlock the Disturbing Door.
</div></details><p>For a more systematic handling of the keychain problem (and a number of other refinements to the behavior of doors), see the Locksmith extension included with Inform.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a class="nav-el" href="eddystone.html" title="Creating new commands involving the standard compass directions."><div class="nav-arrow">←</div> <div class="doc-navbar-text">213. Eddystone</div></a></div><div class="doc-navbar-center">&thinsp;</div><div class="doc-navbar-right"><a class="nav-el" href="magnetos_revenge.html" title="Kitty Pryde of the X-Men is able to reach through solid objects, so we might implement her with special powers that the player does not have&hellip;"><div class="doc-navbar-text">215. Magneto's Revenge</div> <div class="nav-arrow">→</div></a></div></div>
<footer id="credits-footer"><nav><div class="nav-el"><a class="nav-el" href="../index.html">Contents</a></div><div class="nav-el"><a class="nav-el" href="../examples/index.html">Examples</a></div><div class="nav-el"><a class="nav-el" href="../general_index.html">Index</a></div><div class="nav-el"><a class="nav-el" href="../search.html">Search</a></div></nav>
<div class="footing"><p id="i7credit"><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p class="about"><a class="nav-about" href="../about.html">About this edition</a> &bull; <a class="nav-about" href="https://twitter.com/inform7tips">@inform7tips</a></p></div></footer>
</body></html>
