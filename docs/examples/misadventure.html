<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 306. Misadventure</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<h1>Misadventure</h1><div class="subheading">Example 306 ★</div>
<div class="linkback">
<a href="../WI_17.html#section_10" title="Understanding &gt; Commands consisting only of nouns">WI §17.10 Commands consisting only of nouns</a><br><a href="../RB_6.html#section_9" title="Commands &gt; Going, Pushing Things in Directions">RB §6.9 Going, Pushing Things in Directions</a>
</div>
<p class="example-desc">A going by name command which does respect movement rules, and accepts names of rooms as commands.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a href="straw_into_gold.html" title="Creating a Rumpelstiltskin character who is always referred to as &quot;dwarf&quot;, &quot;guy&quot;, &quot;dude&quot;, or &quot;man&quot; -- depending on which the player last used -- until the first time the player refers to him as &quot;Rumpelstiltskin&quot;.">305. Straw Into Gold</a></div><div class="doc-navbar-right"><a href="safari_guide.html" title="The same functionality, but making the player continue to move until he reaches his destination or a barrier, handling all openable doors on the way.">307. Safari Guide</a></div></div>
</header>
<p>The original Adventure allowed the player to type the names of rooms in order to move to them, and it is now not too difficult for us to do the same. Adventure restricted this option to adjacent rooms, but we might want to be a bit more flexible, so we will accept any room:</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex306">Play/modify Misadventure in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Compassless/index.html">Play Misadventure in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Misadventure&quot;\n\nPlover Room is a room. &quot;You&apos;re in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.&quot;\n\nThe Dark Corridor is northeast of Plover Room. Plover Room is south of the Dark Corridor. The printed name of the Dark Corridor is &quot;Dark Room&quot;. The description of the Dark Corridor is &quot;You&apos;re in the dark-room. A corridor leading south is the only exit.&quot;\n\nThe Alcove is west of Plover Room. &quot;You are in an alcove. A small northwest path seems to widen after a short distance. An extremely tight tunnel leads east. It looks like a very tight squeeze. An eerie light can be seen at the other end.&quot;\n\nNorthwest of the Alcove is the Misty Cavern. The description of Misty Cavern is &quot;You are following a wide path around the outer edge of a large cavern. Far below, through a heavy white mist, strange splashing noises can be heard. The mist rises up through a fissure in the ceiling. The path exits to the south and west.&quot; West of Misty Cavern is the Alcove.\n\nUnderstand &quot;[any room]&quot; as going by name. Understand &quot;go to [any room]&quot; as going by name.\n\nGoing by name is an action applying to one thing.\n\n\nCheck going by name:\n\tif the noun is the location, say &quot;You&apos;re already in [the location].&quot; instead;\n\tif the noun is not adjacent and the noun is unvisited, say &quot;That noun did not make sense in this context.&quot; instead.\n\n\nCarry out going by name:\n\tlet aim be the best route from the location to the noun, using doors;\n\tif aim is not a direction, say &quot;You can&apos;t think how to get there from here.&quot; instead;\n\tsay &quot;(heading [aim])[command clarification break]&quot;;\n\ttry going aim;\n\tif the location is not the noun, say &quot;You&apos;ll have to stop here.&quot;\n\n\nUnderstand &quot;[door]&quot; as entering.\n\n\nThe player carries a plover egg and a platinum pyramid. The description of the egg is &quot;Plover&apos;s eggs, by the way, are quite large.&quot; The printed name of the egg is &quot;emerald the size of a plover&apos;s egg&quot;. Understand &quot;emerald&quot; as the egg. The description of the pyramid is &quot;The platinum pyramid is 8 inches on a side!&quot;\n\nInstead of going to the Plover Room from the Alcove when the player carries something which is not the plover egg:\n\tsay &quot;Something you&apos;re carrying won&apos;t fit through the tunnel with you. You&apos;d best take inventory and drop something.&quot;\n\nTest me with &quot;go to misty cavern / go to dark corridor / go to plover room / go to alcove / go to dark corridor / drop pyramid / go to dark corridor / g / go to alcove / g / go to misty cavern&quot;.`)">⧉</button><div class="codeline storytitle">&quot;Misadventure&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Plover Room is a room. &quot;You&#39;re in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The Dark Corridor is northeast of Plover Room. Plover Room is south of the Dark Corridor. The printed name of the Dark Corridor is &quot;Dark Room&quot;. The description of the Dark Corridor is &quot;You&#39;re in the dark-room. A corridor leading south is the only exit.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The Alcove is west of Plover Room. &quot;You are in an alcove. A small northwest path seems to widen after a short distance. An extremely tight tunnel leads east. It looks like a very tight squeeze. An eerie light can be seen at the other end.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Northwest of the Alcove is the Misty Cavern. The description of Misty Cavern is &quot;You are following a wide path around the outer edge of a large cavern. Far below, through a heavy white mist, strange splashing noises can be heard. The mist rises up through a fissure in the ceiling. The path exits to the south and west.&quot; West of Misty Cavern is the Alcove.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Understand &quot;[any room]&quot; as going by name. Understand &quot;go to [any room]&quot; as going by name.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Going by name is an action applying to one thing.</div>
</div><p>We should reject movement to the player&#39;s current location, or to anywhere he hasn&#39;t been and can&#39;t see:</p>
<div class="codeblock"><div class="codeline">Check going by name:</div>
<div class="codeline">&ensp;&ensp;if the noun is the location, say &quot;You&#39;re already in [the location].&quot; instead;</div>
<div class="codeline">&ensp;&ensp;if the noun is not adjacent and the noun is unvisited, say &quot;That noun did not make sense in this context.&quot; instead.</div>
</div><p>The assumption here is that the player does know the names of the rooms adjacent to his current location, even if he hasn&#39;t been there yet.</p>
<p>Now for the travel itself. The simplest way to ensure that the usual movement rules will still apply is to convert GO BY NAME into a GO action, and here the best route comes to our aid:</p>
<div class="codeblock"><div class="codeline">Carry out going by name:</div>
<div class="codeline">&ensp;&ensp;let aim be the best route from the location to the noun, using doors;</div>
<div class="codeline">&ensp;&ensp;if aim is not a direction, say &quot;You can&#39;t think how to get there from here.&quot; instead;</div>
<div class="codeline">&ensp;&ensp;say &quot;(heading [aim])[command clarification break]&quot;;</div>
<div class="codeline">&ensp;&ensp;try going aim;</div>
<div class="codeline">&ensp;&ensp;if the location is not the noun, say &quot;You&#39;ll have to stop here.&quot;</div>
</div><p>This will allow the player to travel toward rooms he has already visited even if they are several moves away.</p>
<p>Finally, so that the player can also use the names of doors as commands:</p>
<div class="codeblock"><div class="codeline">Understand &quot;[door]&quot; as entering.</div>
</div><p>And in keeping with the original, we might add to our scenario a rule or two about restrictions on movement, just to test that it&#39;s all working right:</p>
<div class="codeblock"><div class="codeline">The player carries a plover egg and a platinum pyramid. The description of the egg is &quot;Plover&#39;s eggs, by the way, are quite large.&quot; The printed name of the egg is &quot;emerald the size of a plover&#39;s egg&quot;. Understand &quot;emerald&quot; as the egg. The description of the pyramid is &quot;The platinum pyramid is 8 inches on a side!&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Instead of going to the Plover Room from the Alcove when the player carries something which is not the plover egg:</div>
<div class="codeline">&ensp;&ensp;say &quot;Something you&#39;re carrying won&#39;t fit through the tunnel with you. You&#39;d best take inventory and drop something.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;go to misty cavern / go to dark corridor / go to plover room / go to alcove / go to dark corridor / drop pyramid / go to dark corridor / g / go to alcove / g / go to misty cavern&quot;.</div>
</div><details class="testme-output"><summary>Test me with "go to misty cavern / go to dark corridor / go to plover room / go to alcove / go to dark corridor / drop pyramid / go to dark corridor / g / go to alcove / g / go to misty cavern".</summary><div class="testme-output">Plover Room<br>You&#39;re in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.<br><br>&gt;(Testing.)<br><br>&gt;[1] go to misty cavern<br>That noun did not make sense in this context.<br><br>&gt;[2] go to dark corridor<br>(heading northeast)<br><br>Dark Room<br>You&#39;re in the dark-room. A corridor leading south is the only exit.<br><br>&gt;[3] go to plover room<br>(heading southwest)<br><br>Plover Room<br>You&#39;re in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.<br><br>&gt;[4] go to alcove<br>(heading west)<br><br>Alcove<br>You are in an alcove. A small northwest path seems to widen after a short distance. An extremely tight tunnel leads east. It looks like a very tight squeeze. An eerie light can be seen at the other end.<br><br>&gt;[5] go to dark corridor<br>(heading east)<br>Something you&#39;re carrying won&#39;t fit through the tunnel with you. You&#39;d best take inventory and drop something.<br><br>You&#39;ll have to stop here.<br><br>&gt;[6] drop pyramid<br>Dropped.<br><br>&gt;[7] go to dark corridor<br>(heading east)<br><br>Plover Room<br>You&#39;re in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.<br><br>You&#39;ll have to stop here.<br><br>&gt;[8] g<br>(heading northeast)<br><br>Dark Room<br>You&#39;re in the dark-room. A corridor leading south is the only exit.<br><br>&gt;[9] go to alcove<br>(heading southwest)<br><br>Plover Room<br>You&#39;re in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.<br><br>You&#39;ll have to stop here.<br><br>&gt;[10] g<br>(heading west)<br><br>Alcove<br>You are in an alcove. A small northwest path seems to widen after a short distance. An extremely tight tunnel leads east. It looks like a very tight squeeze. An eerie light can be seen at the other end.<br><br>You can see a platinum pyramid here.<br><br>&gt;[11] go to misty cavern<br>(heading northwest)<br><br>Misty Cavern<br>You are following a wide path around the outer edge of a large cavern. Far below, through a heavy white mist, strange splashing noises can be heard. The mist rises up through a fissure in the ceiling. The path exits to the south and west.
</div></details><div class="doc-navbar"><div class="doc-navbar-left"><a href="straw_into_gold.html" title="Creating a Rumpelstiltskin character who is always referred to as &quot;dwarf&quot;, &quot;guy&quot;, &quot;dude&quot;, or &quot;man&quot; -- depending on which the player last used -- until the first time the player refers to him as &quot;Rumpelstiltskin&quot;.">305. Straw Into Gold</a></div><div class="doc-navbar-right"><a href="safari_guide.html" title="The same functionality, but making the player continue to move until he reaches his destination or a barrier, handling all openable doors on the way.">307. Safari Guide</a></div></div>
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<footer id="credits-footer"><p><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p>Thanks go to <a href="http://nitku.net/blog/">Juhana Leinonen</a> for <a href="https://borogove.app">Borogove</a>. The playable examples use <a href="https://eblong.com">Andrew Plotkin</a>'s <a href="https://eblong.com/zarf/glk/glkote.html">GlkOte</a> and <a href="https://eblong.com/zarf/glulx/quixe/index.html">Quixe</a>, distributed under an <a href="../mit.html">MIT License.</a></p><p class="about"><a href="../about.html">About this edition</a> &bull; <a href="https://twitter.com/inform7tips">@inform7tips</a></p></footer>
</body></html>
