<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<title>Ex. 202. Croft</title>
<script src="../i7doc.js"></script>
<link rel="stylesheet" href="../i7doc.css">
</head>
<body>
<header class="example-header">
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<h1>Croft</h1><div class="subheading">Example 202 ★★★</div>
<div class="linkback">
<a href="../WI_12.html#section_10" title="Advanced Actions &gt; Action variables">WI §12.10 Action variables</a><br><a href="../RB_6.html#section_8" title="Commands &gt; Taking, Dropping, Inserting and Putting">RB §6.8 Taking, Dropping, Inserting and Putting</a>
</div>
<p class="example-desc">Adding special reporting and handling for objects dropped when the player is on a supporter, and special entering rules for moving from one supporter to another.</p>
<div class="doc-navbar"><div class="doc-navbar-left"><a href="puff_of_orange_smoke.html" title="A system in which every character has a body, which is left behind when the person dies; attempts to do something to the body are redirected to the person while the person is alive.">201. Puff of Orange Smoke</a></div><div class="doc-navbar-right"><a href="man_of_steel.html" title="An escaping action which means &quot;go to any room you can reach from here&quot;, and is only useful to non-player characters.">203. The Man of Steel</a></div></div>
</header>
<p>Suppose that we have a design in which the player spends lots of time on enterable supporters, and in which we want to report certain actions -- dropping things onto those supporters, or leaping from one to another -- in a new way. We might begin by adding some action variables to help us keep track of the situation:</p>
<p><span class="borogove-link"><a href="https://snippets.borogove.app/inform7/v10ex202">Play/modify Croft in Borogove</a></span>
 &bull; <span class="quixe-link"><a href="Croft/index.html">Play Croft in Quixe</a></span>
</p><div class="codeblock"><button class="copycode" title="Copy to clipboard" onclick="copyCode(`&quot;Croft&quot;\n\nThe dropping action has an object called the container dropped into (matched as &quot;into&quot;).\n\nThe dropping action has an object called the supporter dropped onto (matched as &quot;onto&quot;).\n\nRule for setting action variables for dropping:\n\tif the actor is in a container (called C), now the container dropped into is C;\n\tif the actor is on a supporter (called C), now the supporter dropped onto is C.\n\nReport dropping a heavy thing onto a metallic thing:\n\tsay &quot;You drop [the noun], and [the supporter dropped onto] clangs protestingly.&quot; instead.\n\nReport someone dropping a heavy thing onto a metallic thing:\n\tsay &quot;[The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.&quot; instead.\n\nA thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.\n\nThe Ancient Cambodian Temple is a room. &quot;A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.&quot;\n\nA platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.\n\nThe bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.\n\nThe wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.\n\nPersuasion rule: persuasion succeeds.\n\nThe entering action has an object called the place left (matched as &quot;from&quot;).\n\tCheck entering a platform from a platform:\n\t\tif actor is the player, say &quot;You leap into midair to cross the distance...&quot;;\n\totherwise say &quot;[The actor] leaps gracefully across the distance...&quot;;\n\tmove the actor to the holder of the noun, without printing a room description.\n\n\nRule for setting action variables for entering:\n\tnow the place left is the holder of the actor.\n\nReport entering a platform from a platform:\n\tsay &quot;You land in a cat-like crouch on [the noun].&quot; instead.\n\nReport Lara entering a platform from a platform:\n\tsay &quot;Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].&quot; instead.\n\nReport entering a platform from the location:\n\tsay &quot;You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.&quot; instead.\n\nReport Lara entering a platform from a location:\n\tsay &quot;Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.&quot;\n\nInstead of examining a person who is not the player:\n\tsay &quot;[The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].&quot;\n\nInstead of climbing a platform, try entering the noun.\n\nTest me with &quot;Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood&quot;.`)">⧉</button><div class="codeline storytitle">&quot;Croft&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The dropping action has an object called the container dropped into (matched as &quot;into&quot;).</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The dropping action has an object called the supporter dropped onto (matched as &quot;onto&quot;).</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Rule for setting action variables for dropping:</div>
<div class="codeline">&ensp;&ensp;if the actor is in a container (called C), now the container dropped into is C;</div>
<div class="codeline">&ensp;&ensp;if the actor is on a supporter (called C), now the supporter dropped onto is C.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Report dropping a heavy thing onto a metallic thing:</div>
<div class="codeline">&ensp;&ensp;say &quot;You drop [the noun], and [the supporter dropped onto] clangs protestingly.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Report someone dropping a heavy thing onto a metallic thing:</div>
<div class="codeline">&ensp;&ensp;say &quot;[The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The Ancient Cambodian Temple is a room. &quot;A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Persuasion rule: persuasion succeeds.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">The entering action has an object called the place left (matched as &quot;from&quot;).</div>
<div class="codeline">&ensp;&ensp;Check entering a platform from a platform:</div>
<div class="codeline">&ensp;&ensp;&ensp;&ensp;if actor is the player, say &quot;You leap into midair to cross the distance...&quot;;</div>
<div class="codeline">&ensp;&ensp;otherwise say &quot;[The actor] leaps gracefully across the distance...&quot;;</div>
<div class="codeline">&ensp;&ensp;move the actor to the holder of the noun, without printing a room description.</div>
</div><p>Because this rule occurs before the &quot;implicitly pass through other barriers rule&quot;, that rule will not occur when we move from platform to platform; we&#39;ll use our own custom rule instead.</p>
<div class="codeblock"><div class="codeline">Rule for setting action variables for entering:</div>
<div class="codeline">&ensp;&ensp;now the place left is the holder of the actor.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Report entering a platform from a platform:</div>
<div class="codeline">&ensp;&ensp;say &quot;You land in a cat-like crouch on [the noun].&quot; instead.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Report Lara entering a platform from a platform:</div>
<div class="codeline">&ensp;&ensp;say &quot;Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].&quot; instead.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Report entering a platform from the location:</div>
<div class="codeline">&ensp;&ensp;say &quot;You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.&quot; instead.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Report Lara entering a platform from a location:</div>
<div class="codeline">&ensp;&ensp;say &quot;Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Instead of examining a person who is not the player:</div>
<div class="codeline">&ensp;&ensp;say &quot;[The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].&quot;</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Instead of climbing a platform, try entering the noun.</div>
<div class="codeline">&ensp;&ensp;</div>
<div class="codeline">Test me with &quot;Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood&quot;.</div>
</div><details class="testme-output"><summary>Test me with "Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood".</summary><div class="testme-output">Ancient Cambodian Temple (on the wood platform)<br>A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.<br><br>On the bronze platform is Lara.<br><br>>(Testing.)<br><br>>[1] lara, drop map<br>Lara puts down the map.<br><br>>[2] lara, drop gun<br>Lara drops the gun onto the bronze platform, which clangs protestingly.<br><br>>[3] drop idol<br>Dropped.<br><br>>[4] enter bronze platform<br>You leap into midair to cross the distance...<br><br>You land in a cat-like crouch on the bronze platform.<br><br>>[5] drop pickaxe<br>You drop the pickaxe, and the bronze platform clangs protestingly.<br><br>>[6] get off<br>You get off the bronze platform.<br><br>Ancient Cambodian Temple<br>A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.<br><br>On the bronze platform are a pickaxe, a gun, a map and Lara.<br><br>On the wood platform is a precious idol.<br><br>>[7] climb wood<br>You jump, catch the edge of the wood platform in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.
</div></details><div class="doc-navbar"><div class="doc-navbar-left"><a href="puff_of_orange_smoke.html" title="A system in which every character has a body, which is left behind when the person dies; attempts to do something to the body are redirected to the person while the person is alive.">201. Puff of Orange Smoke</a></div><div class="doc-navbar-right"><a href="man_of_steel.html" title="An escaping action which means &quot;go to any room you can reach from here&quot;, and is only useful to non-player characters.">203. The Man of Steel</a></div></div>
<nav><div class="nav-el"><a href="../index.html">Contents</a></div> <div class="nav-el"><a href="../examples/index.html">Examples</a></div> <div class="nav-el"><a href="../general_index.html">Index</a></div> <div class="nav-el"><a href="../search.html">Search</a></div></nav>
<footer id="credits-footer"><p><a href="http://inform7.com">Inform 7</a> and its documentation are &copy; 2006-<span id="current_year">2022</span> by Graham Nelson and published under the <a href="../license.html">Artistic License 2.0</a>.</p><p>Thanks go to <a href="http://nitku.net/blog/">Juhana Leinonen</a> for <a href="https://borogove.app">Borogove</a>. The playable examples use <a href="https://eblong.com">Andrew Plotkin</a>'s <a href="https://eblong.com/zarf/glk/glkote.html">GlkOte</a> and <a href="https://eblong.com/zarf/glulx/quixe/index.html">Quixe</a>, distributed under an <a href="../mit.html">MIT License.</a></p><p class="about"><a href="../about.html">About this edition</a> &bull; <a href="https://twitter.com/inform7tips">@inform7tips</a></p></footer>
</body></html>
